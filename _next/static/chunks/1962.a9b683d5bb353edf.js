"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1962],{71962:(e,t,l)=>{l.r(t),l.d(t,{default:()=>L});var n=l(12115),a=l(54262),o=l(55089),r=l(78443),i=l(93929),c=l(97771),s=l(6327),u=l(20109),m=l(58671),d=l(40561),h=l(36417),g=l(47821),E=l(2241),p=l(67072),f=l(46296),C=l.n(f);let b=(0,c.makeStyles)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function v(e){let t=(0,n.useRef)(null);return n.createElement(C(),{nodeRef:t,cancel:'[class*="MuiDialogContent-root"]',onStart:e=>{var t,l;return null===(l=null===(t=e.target)||void 0===t?void 0:t.className)||void 0===l?void 0:l.includes("MuiDialogTitle")}},n.createElement(u.A,{ref:t,...e}))}let k=(0,p.observer)(function(e){let{classes:t}=b(),{title:l,children:a,onClose:o}=e;return n.createElement(m.A,{...e,PaperComponent:v},n.createElement(d.A,null,n.createElement(h.A,{style:{cursor:"move"}},l,o?n.createElement(g.A,{className:t.closeButton,onClick:()=>{o()}},n.createElement(s.A,null)):null),n.createElement(E.A,null),a))});var w=l(47204),A=l(51657),S=l.n(A),y=l(36941),M=l(71024),x=l(77770),N=l(92791),T=l(27742),H=l(38632);let O=(0,c.makeStyles)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),B=function({rows:e,onChange:t,showTips:l}){let{classes:o}=O(),[i,c]=(0,n.useState)(null),[s,u]=(0,n.useState)([]),{name:m,color:d,baseUri:h,...g}=e[0],[E,p]=(0,n.useState)("blue"),[f,C]=(0,n.useState)({idx:0,field:null});return n.createElement("div",null,n.createElement(r.A,{disabled:!s.length,onClick:e=>{c(e.currentTarget)}},"Change color of selected items"),n.createElement(r.A,{onClick:()=>{t((0,H.BO)([...e],s))},disabled:!s.length},n.createElement(M.A,null),l?"Move selected items up":null),n.createElement(r.A,{onClick:()=>{t((0,H.oJ)([...e],s))},disabled:!s.length},n.createElement(y.A,null),l?"Move selected items down":null),n.createElement(r.A,{onClick:()=>{t((0,H.BO)([...e],s,e.length))},disabled:!s.length},n.createElement(N.A,null),l?"Move selected items to top":null),n.createElement(r.A,{onClick:()=>{t((0,H.oJ)([...e],s,e.length))},disabled:!s.length},n.createElement(x.A,null),l?"Move selected items to bottom":null),n.createElement(A.ColorPopover,{anchorEl:i,color:E,onChange:l=>{p(l),s.forEach(t=>{let n=e.find(e=>e.name===t);n&&(n.color=l)}),t([...e])},onClose:()=>{c(null)}}),n.createElement("div",{style:{height:400,width:"100%"}},n.createElement(T.z,{getRowId:e=>e.name,checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:e=>{u(e)},rows:e,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:l,id:a})=>n.createElement(S(),{color:l||"blue",onChange:l=>{let n=e.find(e=>e.name===a);n&&(n.color=l),t([...e])}})},{field:"name",headerName:"Name",width:(0,a.measureGridWidth)(e.map(e=>e.name))},...Object.keys(g).map(t=>({field:t,renderCell:({value:e})=>n.createElement("div",{className:o.cell},n.createElement(w.SanitizedHTML,{html:(0,a.getStr)(e)})),width:(0,a.measureGridWidth)(e.map(e=>`${e[t]}`))}))],sortModel:[],onSortModelChange:l=>{let n=l[0],o=(f.idx+1)%2,r=n.field||f.field;C({idx:o,field:r}),t(r?[...e].sort((e,t)=>{let l=(0,a.getStr)(e[r]),n=(0,a.getStr)(t[r]);return 1===o?l.localeCompare(n):n.localeCompare(l)}):e)}})))},R=(0,c.makeStyles)()({content:{minWidth:800}});function L({model:e,handleClose:t}){let{classes:l}=R(),{sources:c}=e,[s,u]=(0,n.useState)(structuredClone(c||[])),[m,d]=(0,a.useLocalStorage)("multiwiggle-showTips",!1);return n.createElement(k,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor"},n.createElement(o.A,{className:l.content},n.createElement(r.A,{variant:"contained",style:{float:"right"},onClick:()=>{d(!m)}},m?"Hide tips":"Show tips"),n.createElement("br",null),m?n.createElement(n.Fragment,null,"Helpful tips",n.createElement("ul",null,n.createElement("li",null,"You can select rows in the table with the checkboxes"),n.createElement("li",null,"Multi-select is enabled with shift-click and control-click"),n.createElement("li",null,'The "Move selected items up/down" can re-arrange subtracks'),n.createElement("li",null,"Sorting the data grid itself can also re-arrange subtracks"),n.createElement("li",null,"Changes are applied when you hit Submit"),n.createElement("li",null,"You can click and drag the dialog box to move it on the screen"),n.createElement("li",null,"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"))):null,n.createElement(B,{rows:s,onChange:u,showTips:m})),n.createElement(i.A,null,n.createElement(r.A,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),u(e.sources||[])}},"Clear custom settings"),n.createElement(r.A,{variant:"contained",color:"secondary",onClick:()=>{t(),u([...e.sources||[]])}},"Cancel"),n.createElement(r.A,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(s),t()}},"Submit")))}},38632:(e,t,l)=>{l.d(t,{A3:()=>i,BO:()=>o,oJ:()=>r});var n=l(53394),a=l(54262);function o(e,t,l=1){let n=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>e-t),a=0;for(let t of n){let n=Math.max(a,t-l);n>=a&&e.splice(n,0,e.splice(t,1)[0]),a+=1}return e}function r(e,t,l=1){let n=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>t-e),a=e.length-1;for(let t of n){let n=Math.min(a,t+l);n<=a&&e.splice(n,0,e.splice(t,1)[0]),a-=1}return e}function i(e){let{prefersOffset:t}=e,{trackLabels:l}=(0,a.getContainingView)(e),o=(0,a.getContainingTrack)(e),r=(0,n.getConf)(o,"name");return"overlapping"!==l||t?10:(0,a.measureText)(r,12.8)+100}}}]);
//# sourceMappingURL=1962.a9b683d5bb353edf.js.map