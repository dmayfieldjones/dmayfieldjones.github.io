"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4719],{74719:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var l=n(12115),a=n(47204),r=n(54262),i=n(10702),s=n(51644),o=n(22471),c=n(95155);let m=(0,o.A)((0,c.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");var u=n(9561),d=n(78443),g=n(19293),E=n(70503),p=n(47821),h=n(3961),v=n(28683),A=n(67072),f=n(2848),y=n(97771),k=n(55023),x=n(31348),b=n(6327),S=n(14294),C=n(33177),P=n(60673);let N=(0,l.lazy)(()=>n.e(2912).then(n.bind(n,22912))),w=(0,y.makeStyles)()(()=>({lockedPluginTooltip:{marginRight:"0.5rem"}}));function j(){let{classes:e}=w();return l.createElement(C.A,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it."},l.createElement(S.A,null))}let I=(0,A.observer)(function({plugin:e,model:t}){let{pluginManager:n}=(0,r.getEnv)(t),a=(0,r.getSession)(t),{jbrowse:i,adminMode:s}=a,o=!!(0,x.isSessionWithSessionPlugins)(a)&&a.sessionPlugins.some(t=>{var l;return(null===(l=n.pluginMetadata[e.name])||void 0===l?void 0:l.url)===t.url});return l.createElement(P.Ay,{key:e.name},s||o?l.createElement(p.A,{"data-testid":`removePlugin-${e.name}`,onClick:()=>{a.queueDialog(t=>[N,{plugin:e.name,onClose:l=>{if(l){let t=n.pluginMetadata[e.name];s?i.removePlugin(t):(0,x.isSessionWithSessionPlugins)(a)&&a.removeSessionPlugin(t)}t()}}])}},l.createElement(b.A,null)):l.createElement(j,null),l.createElement(u.A,null,e.name))}),M=(0,A.observer)(function({pluginManager:e,model:t}){let{plugins:n}=e,{filterText:a}=t,r=n.filter(t=>{var n;return!(null===(n=e.pluginMetadata[t.name])||void 0===n?void 0:n.isCore)});return l.createElement(k.A,null,r.length>0?r.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())).map(e=>l.createElement(I,{key:e.name,plugin:e,model:t})):l.createElement(u.A,null,"No plugins currently installed"))});var T=n(77740);let z=(0,o.A)((0,c.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),L=(0,o.A)((0,c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var F=n(53259),R=n(48289),W=n(28254),$=n(59289);let _=(0,y.makeStyles)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"},mr:{marginRight:"0.5em"}}),B=(0,A.observer)(function({plugin:e,model:t}){let{classes:n}=_(),a=(0,r.getSession)(t),{pluginManager:i}=(0,r.getEnv)(t),{runtimePluginDefinitions:s}=i,o=s.some(t=>"url"in t&&t.url===e.url),[c,m]=(0,l.useState)(!1),{adminMode:g,jbrowse:E}=a,{name:p,authors:h,description:v}=e;return l.createElement(F.A,{variant:"outlined",key:p,className:n.card},l.createElement(R.A,null,l.createElement(u.A,{variant:"h5"},l.createElement(W.A,{href:`${e.location}#readme`,target:"_blank",rel:"noopener"},e.name)),l.createElement("div",{className:n.dataField},l.createElement(L,{className:n.mr}),l.createElement(u.A,null,h.join(", "))),l.createElement(u.A,{className:n.bold},"Description:"),l.createElement(u.A,null,v)),l.createElement($.A,null,l.createElement(d.A,{variant:"contained",disabled:o||c,startIcon:o?l.createElement(z,null):l.createElement(T.A,null),onClick:()=>{g?E.addPlugin(e):(0,x.isSessionWithSessionPlugins)(a)?a.addSessionPlugin(e):a.notify("No way to install plugin"),m(!0)}},o?"Installed":"Install")))}),q=(0,l.lazy)(()=>n.e(1775).then(n.bind(n,81775))),D=(0,y.makeStyles)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"},mr:{marginRight:"0.3em"},m:{margin:"1em"}})),H=(0,A.observer)(function({model:e}){let{classes:t}=D(),{plugins:n,error:o}=function(){let[e,t]=(0,l.useState)(),[n,a]=(0,l.useState)();return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok){let t=await e.text();throw Error(`HTTP ${e.status} fetching plugins: ${t}`)}let n=await e.json();t(n.plugins)}catch(e){console.error(e),a(e)}})()},[]),{plugins:e,error:n}}(),c=(0,r.getSession)(e),{adminMode:A}=c,{pluginManager:y}=(0,f.getEnv)(e);return l.createElement("div",null,A&&l.createElement(l.Fragment,null,!r.isElectron&&l.createElement("div",{className:t.adminBadge},l.createElement(m,{className:t.mr}),l.createElement(u.A,null,"You are using the ",l.createElement("code",null,"admin-server"),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store.")),l.createElement(d.A,{className:t.customPluginButton,variant:"contained",onClick:()=>{c.queueDialog(t=>[q,{model:e,onClose:t}])}},"Add custom plugin")),l.createElement(g.A,{label:"Filter plugins",value:e.filterText,onChange:t=>{e.setFilterText(t.target.value)},fullWidth:!0,slotProps:{input:{endAdornment:l.createElement(E.A,{position:"end"},l.createElement(p.A,{onClick:()=>{e.clearFilterText()}},l.createElement(i.A,null)))}}}),l.createElement(h.A,{defaultExpanded:!0},l.createElement(v.A,{expandIcon:l.createElement(s.A,{className:t.expandIcon})},l.createElement(u.A,{variant:"h5"},"Installed plugins")),l.createElement("div",{className:t.m},l.createElement(M,{pluginManager:y,model:e}))),l.createElement(h.A,{defaultExpanded:!0},l.createElement(v.A,{expandIcon:l.createElement(s.A,{className:t.expandIcon})},l.createElement(u.A,{variant:"h5"},"Available plugins")),o?l.createElement(u.A,{color:"error"},`${o}`):n?n.filter(t=>!(r.isElectron&&t.cjsUrl)&&t.name.toLowerCase().includes(e.filterText.toLowerCase())).map(t=>l.createElement(B,{key:t.name,plugin:t,model:e})):l.createElement(a.LoadingEllipses,null)))})},10702:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(22471),a=n(95155);let r=(0,l.A)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},51644:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(22471),a=n(95155);let r=(0,l.A)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},14294:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(22471),a=n(95155);let r=(0,l.A)((0,a.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")}}]);
//# sourceMappingURL=4719.0bbffd35841a0b42.js.map