"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3661],{13661:(e,t,r)=>{r.d(t,{renderToSvg:()=>x});var a=r(95155),n=r(12115),i=r(94029),l=r(15715),s=r(22696),o=r(29543),d=r(73746);function h({width:e,height:t,shift:r}){let n=(0,d.A)();return(0,a.jsx)("rect",{width:e+2*r,height:t,fill:(0,l.stripAlpha)(n.palette.background.default)})}var c=r(70102);async function x(e,t){var r;await (0,o.when)(()=>e.initialized);let{themeName:d="default",Wrapper:x=({children:e})=>e}=t,g=(0,l.getSession)(e),m=null===(r=g.allThemes)||void 0===r?void 0:r.call(g)[d],{width:p,tracks:u,height:f}=e,j=await Promise.all(u.map(async e=>{let r=e.displays[0];return await (0,o.when)(()=>void 0===r.ready||r.ready),{track:e,result:await r.renderSvg({...t,theme:m})}})),{staticSlices:w,offsetRadians:b,centerXY:v}=e,y=(0,l.radToDeg)(b);return(0,l.renderToStaticMarkup)((0,a.jsx)(s.A,{theme:(0,i.createJBrowseTheme)(m),children:(0,a.jsx)(x,{children:(0,a.jsxs)("svg",{width:p,height:f,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,p+100,f].toString(),children:[(0,a.jsx)(h,{width:p,height:f,shift:50}),(0,a.jsxs)("g",{transform:`translate(${v}) rotate(${y})`,children:[w.map((t,r)=>(0,a.jsx)(c.A,{model:e,slice:t},r)),j.map(({result:e},t)=>(0,a.jsx)(n.Fragment,{children:e},t))]})]})})}))}},70102:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(95155),n=r(15715),i=r(19567),l=r(73746),s=r(19468);let o=(0,r(74100).makeStyles)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}}),d=(0,s.observer)(function({model:e,slice:t,region:r}){let i=(0,l.A)(),{radiusPx:s}=e,o=s+1,{endRadians:d,startRadians:c}=t,x=(0,n.polarToCartesian)(o,c),g=(0,n.polarToCartesian)(o,d),m=(d-c)*o,p=d-c>Math.PI?"1":"0",u=`[${Number(r.regions.length).toLocaleString()}]`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{text:u,view:e,maxWidthPx:m,radians:(d+c)/2,radiusPx:o,title:`${u} more regions`,color:i.palette.text.primary}),(0,a.jsx)("path",{d:["M",...x,"A",o,o,"0",p,"1",...g].join(" "),...(0,n.getStrokeProps)(i.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})}),h=(0,s.observer)(function({view:e,text:t,maxWidthPx:r,radians:i,radiusPx:l,title:s,color:d}){let{classes:h}=o(),c=(0,n.polarToCartesian)(l+5,i);return t?6.5*t.length<r?(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)+90})`,...(0,n.getFillProps)(d),children:[t,(0,a.jsx)("title",{children:s||t})]}):r>4?(0,n.radToDeg)(i+e.offsetRadians-Math.PI/2)>=180?(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)})`,fill:d,children:[t,(0,a.jsx)("title",{children:s||t})]}):(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)+180})`,fill:d,children:[t,(0,a.jsx)("title",{children:s||t})]}):null:null}),c=(0,s.observer)(function({model:e,slice:t,region:r}){let s=(0,l.A)(),{radiusPx:o}=e,{endRadians:d,startRadians:c}=t,x=(0,n.getSession)(e).assemblyManager.get(r.assemblyName),g=x?x.getRefNameColor(r.refName):void 0;if(g)try{g=(0,i.makeContrasting)(g,s.palette.background.paper)}catch(e){g=s.palette.text.primary}else g=s.palette.text.primary;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{text:r.refName,view:e,maxWidthPx:(d-c)*o,radians:(d+c)/2,radiusPx:o,color:g}),(0,a.jsx)("path",{d:function(e,t,r,a){e.flipped&&([r,a]=[a,r]);let n=e.bpToXY(r,t),i=e.bpToXY(a,t);return["M",...n,"A",t,t,"0",Math.abs(a-r)/e.bpPerRadian>Math.PI?"1":"0","1",...i].join(" ")}(t,o+1,r.start,r.end),stroke:g,strokeWidth:2,fill:"none"})]})}),x=(0,s.observer)(function({model:e,slice:t}){return t.region.elided?(0,a.jsx)(d,{model:e,region:t.region,slice:t},(0,n.assembleLocString)(t.region.regions[0])):(0,a.jsx)(c,{region:t.region,model:e,slice:t},(0,n.assembleLocString)(t.region))})}}]);
//# sourceMappingURL=3661.621f65ac9d6160db.js.map