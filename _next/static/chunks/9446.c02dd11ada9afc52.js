"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9446],{15508:(o,r,e)=>{e.d(r,{DW:()=>c,L9:()=>a,pf:()=>n,sY:()=>i,w7:()=>l});var t=e(9273);let n={color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000",color_rev_diff_chr:"#969696",color_pair_lr:"#c8c8c8",color_pair_rr:"navy",color_pair_rl:"teal",color_pair_ll:"green",color_nostrand:"#c8c8c8",color_interchrom:"purple",color_longinsert:"red",color_shortinsert:"pink",color_unknown:"grey"},l={color_fwd_strand_not_proper:"#CA6767",color_rev_strand_not_proper:"#7272AA",color_fwd_strand:"#DC2A2A",color_rev_strand:"#4141BA",color_fwd_missing_mate:"#921111",color_rev_missing_mate:"#111192",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#696969",color_pair_lr:"#8C8C8C",color_pair_rr:"#00005A",color_pair_rl:"#005A5A",color_pair_ll:"#005A00",color_nostrand:"#8C8C8C",color_interchrom:"#5A005A",color_longinsert:"#B30000",color_shortinsert:"#FF3A5C",color_unknown:"grey"};function a(o,r,e){let t=o.refName===r.refName,a=Math.abs(o.tlen||0);return t&&a>((null==e?void 0:e.upper)||0)?[n.color_longinsert,l.color_longinsert]:t&&a<((null==e?void 0:e.lower)||0)?[n.color_shortinsert,l.color_shortinsert]:t?void 0:[n.color_interchrom,l.color_interchrom]}let f=[n.color_unknown,n.color_unknown];function i(o,r,e){return s(o)||a(o,r,e)||f}function s(o){let r=t.il.fr[o.pair_orientation||""],e=t.rr[r];return"LR"===r?void 0:[n[e],l[e]]}function c(o){return s(o)||f}},49446:(o,r,e)=>{e.d(r,{drawFeats:()=>s});var t=e(15715),n=e(88753);function l(o,r,e,t,n,l){e<0&&(o+=e,e=-e),t<0&&(r+=t,t=-t),l&&(n.fillStyle=l),n.fillRect(o,r,e,t)}function a(o,r,e,t,n,l){e<0&&(o+=e,e=-e),t<0&&(r+=t,t=-t),l&&(n.strokeStyle=l),n.strokeRect(o,r,e,t)}var f=e(15508),i=e(68821);function s(o,r){let{chainData:e}=o;if(!e)return;let{assemblyManager:s}=(0,t.getSession)(o),c=(0,t.getContainingView)(o),_=c.assemblyNames[0],d=s.get(_);d&&((0,i.dv)(e)?function({ctx:o,self:r,chainData:e,view:i,asm:s}){var c,_,d,m,h,u,p;let v=[],x=(0,n.getConf)(r,"featureHeight"),g=(null==(c=r.colorBy)?void 0:c.type)||"insertSizeAndOrientation",{chains:N,stats:P}=e;for(let e of N)if(e.length>1){let o=e[0],r=e[1],t=s.getCanonicalRefName(o.refName)||o.refName,n=s.getCanonicalRefName(r.refName)||r.refName,l=null==(_=i.bpToPx({refName:t,coord:o.start}))?void 0:_.offsetPx,a=null==(d=i.bpToPx({refName:t,coord:o.end}))?void 0:d.offsetPx,f=null==(m=i.bpToPx({refName:n,coord:r.start}))?void 0:m.offsetPx,c=null==(h=i.bpToPx({refName:n,coord:r.end}))?void 0:h.offsetPx,u=0;if(void 0!==l&&void 0!==a&&void 0!==f&&void 0!==c){if(o.refName===r.refName){let e=Math.min(o.start,r.start);u=Math.abs(Math.max(o.end,r.end)-e)}v.push({r1s:l,r1e:a,r2s:f,r2e:c,v0:o,v1:r,distance:u})}}else if(r.drawSingletons){let r=e[0],t=s.getCanonicalRefName(r.refName)||r.refName,n=null==(u=i.bpToPx({refName:t,coord:r.start}))?void 0:u.offsetPx,f=null==(p=i.bpToPx({refName:t,coord:r.end}))?void 0:p.offsetPx;if(void 0!==n&&void 0!==f){let r=Math.max(f-n,2);l(n-i.offsetPx,0,r,x,o,"#f00"),a(n-i.offsetPx,0,r,x,o,"#a00")}}let M=Math.log((0,t.max)(v.map(o=>o.distance))),C=Math.max(Math.log((0,t.min)(v.map(o=>o.distance)))-1,0),b=(r.height-20)/(M-C);for(let{r1e:r,r1s:e,r2e:t,r2s:n,distance:s,v0:c,v1:_}of v){let d=Math.max(r-e,2),m=Math.max(t-n,2),[h,u]=function({type:o,v0:r,v1:e,stats:t}){if("insertSizeAndOrientation"===o)return(0,f.sY)(r,e,t);if("orientation"===o)return(0,f.DW)(r);if("insertSize"===o)return(0,f.L9)(r,e,t);if("gradient"===o){let o=Math.min(r.start,e.start),t=Math.max(r.end,e.end);return[`hsl(${10*Math.log10(Math.abs(t-o))},50%,50%)`,`hsl(${10*Math.log10(Math.abs(t-o))},50%,30%)`]}}({type:g,v0:c,v1:_,stats:P})||[],p=(Math.log(s)-C)*b,v=x/2-.5,N=n-r;l(r-i.offsetPx,p+v,N,1,o,"black"),a(e-i.offsetPx,p,d,x,o,u),a(n-i.offsetPx,p,m,x,o,u),l(e-i.offsetPx,p,d,x,o,h),l(n-i.offsetPx,p,m,x,o,h)}}({self:o,view:c,asm:d,ctx:r,chainData:e}):function({ctx:o,self:r,chainData:e,view:i,asm:s}){var c,_,d,m,h;let u=[],{chains:p}=e,{height:v}=r,x=(0,n.getConf)(r,"featureHeight");for(let o of p){let r=Number.MAX_VALUE,e=Number.MIN_VALUE;for(let t of o){let o=s.getCanonicalRefName(t.refName)||t.refName,n=null==(c=i.bpToPx({refName:o,coord:t.start}))?void 0:c.offsetPx,l=null==(_=i.bpToPx({refName:o,coord:t.end}))?void 0:_.offsetPx;void 0!==n&&void 0!==l&&(r=Math.min(r,n),e=Math.max(e,l))}u.push({distance:Math.abs(e-r),minX:r,chain:o})}let g=u.map(o=>o.distance),N=Math.log((0,t.max)(g)),P=Math.max(Math.log((0,t.min)(g))-1,0),M=(v-20)/(N-P),C=x/2-.5;for(let{minX:r,distance:e,chain:t}of u){let n,c=(Math.log(e)-P)*M;l(r-i.offsetPx,c+C,e,1,o,"black");let _=t[0];for(let r of(n=2048&_.flags?"-"===(null==(d=_.SA)?void 0:d.split(";")[0].split(",")[2])?-1:1:_.strand,t)){let e=s.getCanonicalRefName(r.refName)||r.refName,t=null==(m=i.bpToPx({refName:e,coord:r.start}))?void 0:m.offsetPx,_=null==(h=i.bpToPx({refName:e,coord:r.end}))?void 0:h.offsetPx;if(void 0!==t&&void 0!==_){let e=Math.max(_-t,2),s=t-i.offsetPx,d=-1==r.strand*n?"color_rev_strand":"color_fwd_strand";a(s,c,e,x,o,f.w7[d]),l(s,c,e,x,o,f.pf[d])}}}}({self:o,view:c,asm:d,ctx:r,chainData:e}))}}}]);
//# sourceMappingURL=9446.c02dd11ada9afc52.js.map