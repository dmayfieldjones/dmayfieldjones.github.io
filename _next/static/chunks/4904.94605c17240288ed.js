"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{74904:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(1986),s=a(29269),l=a(15715),i=a(64446),n=a(31232),c=a(91603),o=a(33057),d=a(70177);class u extends s.BaseFeatureDataAdapter{constructor(){super(...arguments),this.calculatedIntervalTreeMap={}}async loadDataP(e){let{statusCallback:t=()=>{}}=e||{},a=await (0,l.fetchAndMaybeUnzip)((0,i.openLocation)(this.getConf("gffLocation"),this.pluginManager)),s=[],n={},u=new TextDecoder("utf8"),f=0,h=0;for(;f<a.length;){let e=a.indexOf(10,f),r=-1===e?a.subarray(f):a.subarray(f,e),i=u.decode(r).trim();if(i){if(i.startsWith("#"))s.push(i);else if(i.startsWith(">"))break;else{let e=i.indexOf("	"),t=i.slice(0,e);n[t]||(n[t]=""),n[t]+=`${i}
`}}h++%1e4==0&&t(`Loading ${(0,l.getProgressDisplayStr)(f,a.length)}`),f=e+1}let g=Object.fromEntries(Object.entries(n).map(([e,t])=>[e,a=>{if(!this.calculatedIntervalTreeMap[e]){null==a||a("Parsing GFF data");let s=new r.Ay;for(let a of(0,o.g)(t).flat().map((t,a)=>new c.default({data:(0,d.d)(t),id:`${this.id}-${e}-${a}`})))s.insert([a.get("start"),a.get("end")],a);this.calculatedIntervalTreeMap[e]=s}return this.calculatedIntervalTreeMap[e]}]));return{header:s.join("\n"),intervalTreeMap:g}}async loadData(e){return this.gffFeatures||(this.gffFeatures=this.loadDataP(e).catch(e=>{throw this.gffFeatures=void 0,e})),this.gffFeatures}async getRefNames(e={}){let{intervalTreeMap:t}=await this.loadData(e);return Object.keys(t)}async getHeader(e={}){let{header:t}=await this.loadData(e);return t}getFeatures(e,t={}){return(0,n.ObservableCreate)(async a=>{var r;try{let{start:s,end:l,refName:i}=e,{intervalTreeMap:n}=await this.loadData(t);for(let e of(null===(r=n[i])||void 0===r?void 0:r.call(n,t.statusCallback).search([s,l]))||[])a.next(e);a.complete()}catch(e){a.error(e)}},t.stopToken)}freeResources(){}}}}]);
//# sourceMappingURL=4904.94605c17240288ed.js.map