"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2668],{62668:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var l=t(12115),n=t(47204),i=t(54262),r=t(55089),s=t(9561),o=t(19293),p=t(80583),c=t(93929),u=t(78443),d=t(67072),y=t(2848),g=t(28278),m=t(50324);let f=(0,d.observer)(function(e){let{model:a,handleClose:t}=e,[d,f]=(0,l.useState)(""),[D,h]=(0,l.useState)(),[k,E]=(0,l.useState)(!1),[v,A]=(0,l.useState)(),C=/^[A-Za-z][A-Za-z0-9]$/.exec(d),L=2===d.length&&!C,$=(0,i.useDebounce)(d,1e3),[I,w]=(0,l.useState)("");return(0,l.useEffect)(()=>{(async()=>{try{if(!L){A(void 0),E(!0);let e=await (0,g.X)({self:a,tag:$,blocks:(0,i.getContainingView)(a).staticBlocks});h(e)}}catch(e){console.error(e),A(e)}finally{E(!1)}})()},[a,L,$]),l.createElement(n.Dialog,{open:!0,onClose:t,title:"Group by"},l.createElement(r.A,null,l.createElement(s.A,null,'NOTE: this will create new session tracks with the "filter by" set to the values chosen here rather than affecting the current track state'),l.createElement(o.A,{fullWidth:!0,value:I,onChange:e=>{w(e.target.value)},label:"Group by...",select:!0},l.createElement(p.A,{value:"strand"},"Strand"),l.createElement(p.A,{value:"tag"},"Tag")),"tag"===I?l.createElement(l.Fragment,null,l.createElement(s.A,{color:"textSecondary"},"Examples: HP for haplotype, RG for read group, etc."),l.createElement(o.A,{value:d,onChange:e=>{f(e.target.value)},placeholder:"Enter tag name",error:L,helperText:L?"Not a valid tag":"",autoComplete:"off","data-testid":"group-tag-name",slotProps:{htmlInput:{maxLength:2,"data-testid":"group-tag-name-input"}}}),v?l.createElement(n.ErrorMessage,{error:v}):k?l.createElement(n.LoadingEllipses,{title:"Loading unique tags"}):D?l.createElement("div",null,l.createElement("div",null,"Found unique ",d," values:"),l.createElement("div",null,D.join(", "))):null):null),l.createElement(c.A,null,l.createElement(u.A,{variant:"contained",color:"primary",type:"submit",disabled:!D,autoFocus:!0,onClick:()=>{let e=(0,i.getContainingTrack)(a),l=structuredClone((0,y.getSnapshot)(e.configuration)),n=(0,i.getSession)(a),r=(0,i.getContainingView)(a);if("tag"===I){if(D)for(let e of[...D,void 0]){let a=`${l.trackId}-${d}:${e}-${+Date.now()}-sessionTrack`;n.addTrackConf({...l,trackId:a,name:`${l.name} (-)`,displays:[{displayId:`${a}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${a}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:{...m.JD,tagFilter:{tag:d,value:e}}}}]}),r.showTrack(a)}}else if("strand"===I){let e=`${l.trackId}-${d}:(-)-${+Date.now()}-sessionTrack`,a=`${l.trackId}-${d}:(+)-${+Date.now()}-sessionTrack`;n.addTrackConf({...l,trackId:e,name:`${l.name} (-)`,displays:[{displayId:`${e}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${e}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:m.CQ}},{displayId:`${e}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:m.CQ}]}),n.addTrackConf({...l,trackId:a,name:`${l.name} (+)`,displays:[{displayId:`${a}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${a}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:m.Ar}},{displayId:`${a}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:m.Ar}]}),r.showTrack(e),r.showTrack(a)}t()}},"Submit"),l.createElement(u.A,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel")))})}}]);
//# sourceMappingURL=2668.d033e25e949c38b7.js.map