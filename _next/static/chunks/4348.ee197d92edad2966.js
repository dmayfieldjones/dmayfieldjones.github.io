"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4348],{64348:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(92766),s=a(54262),n=a(72471),i=a(28251),o=a(90287),c=a(18998);class l extends r.BaseFeatureDataAdapter{constructor(){super(...arguments),this.gcMode="content"}async configure(){var e;let t=await (null===(e=this.getSubAdapter)||void 0===e?void 0:e.call(this,this.getConf("sequenceAdapter")));if(!t)throw Error("Error getting subadapter");return t.dataAdapter}async getRefNames(e){return(await this.configure()).getRefNames(e)}getFeatures(e,t){let{statusCallback:a=()=>{},stopToken:r}=t||{};return(0,n.ObservableCreate)(async n=>{var l;let u=await this.configure(),d=this.getConf("windowSize"),f=this.getConf("windowDelta"),g=1===d?1:d/2,p=1===d,{start:h,end:w}=e;if(h=Math.max(0,h-g),(w+=g)<0||h>w){n.complete();return}let m=(null===(l=(await (0,o._)(u.getFeatures({...e,start:h,end:w},t).pipe((0,c.$)())))[0])||void 0===l?void 0:l.get("seq"))||"",C=performance.now();await (0,s.updateStatus)("Calculating GC",a,()=>{for(let t=g;t<m.length-g;t+=f){performance.now()-C>400&&((0,i.checkStopToken)(r),C=performance.now());let a=p?m[t]:m.slice(t-g,t+g),o=0,c=0,l=0;for(let e of a)"c"===e||"C"===e?o++:("g"===e||"G"===e)&&c++,"N"!==e&&l++;let u=h,d="content"===this.gcMode?(c+o)/(l||1):"skew"===this.gcMode?(c-o)/(c+o||1):0;n.next(new s.SimpleFeature({uniqueId:`${this.id}_${u+t}`,refName:e.refName,start:u+t,end:u+t+f,score:d}))}}),n.complete()})}freeResources(){}}l.capabilities=["hasLocalStats"];let u=l}}]);
//# sourceMappingURL=4348.ee197d92edad2966.js.map