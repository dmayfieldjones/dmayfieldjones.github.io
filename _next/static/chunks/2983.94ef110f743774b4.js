"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2983],{52983:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var l=n(95155),r=n(45064),a=n.n(r),s=n(15715),i=n(12115),o=n(94029),u=n(9670),c=n(2440),f=n(86847);async function d({view:e,feature:t}){var n;let{assemblyManager:l}=(0,s.getSession)(e),r=t.get("CIGAR"),a=t.get("strand"),i=(null===(n=t.get("tags"))||void 0===n?void 0:n.SA)||"",o=t.get("name"),u=(0,f.NI)(r,1),c=await l.waitForAssembly(e.assemblyNames[0]);if(!c)throw Error("assembly not found");let d=(0,f.Cu)(i,t.id(),a,o,!0),m=t.toJSON();m.clipPos=u,m.strand=1,m.mate={refName:o,start:u,end:u+(0,f.Gl)(r)};let h=[m,...d];for(let[e,t]of h.entries())t.refName=c.getCanonicalRefName(t.refName)||t.refName,t.syntenyId=e,t.mate.syntenyId=e,t.mate.uniqueId=`${t.uniqueId}_mate`;return h.sort((e,t)=>e.clipPos-t.clipPos),h}let m=(0,i.lazy)(()=>n.e(7759).then(n.bind(n,47759))),h=(0,i.lazy)(()=>n.e(7934).then(n.bind(n,97934)));function p({model:e,feature:t}){let{view:n}=e,[r,a]=(0,i.useState)(),[c,f]=(0,i.useState)();(0,i.useEffect)(()=>{(async()=>{try{let e=await d({view:n,feature:new s.SimpleFeature(t)});a(e)}catch(e){f(e),console.error(e)}})()},[t,n]);let m=[];if(r)for(let e=0;e<r.length-1;e++)m.push([r[e],r[e+1]]);return m.length?(0,l.jsxs)("div",{children:[(0,l.jsx)(u.A,{children:"Launch split view"}),c?(0,l.jsx)(o.ErrorMessage,{error:c}):null,(0,l.jsx)("ul",{children:m.map((t,n)=>{let[r,a]=t;return(0,l.jsxs)("li",{children:[r.refName,":",(0,s.toLocale)(1===r.strand?r.end:r.start)," ->"," ",a.refName,":",(0,s.toLocale)(1===a.strand?a.start:a.end)," ",(0,l.jsx)(g,{model:e,f1:r,f2:a})," ",(0,l.jsx)(y,{model:e,f1:r,f2:a})]},`${JSON.stringify(t)}-${n}`)})})]}):null}function g({model:e,f1:t,f2:n}){return(0,l.jsx)(c.A,{href:"#",onClick:l=>{l.preventDefault();let r=(0,s.getSession)(e);r.queueDialog(l=>[m,{handleClose:l,session:r,feature:new s.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(top/bottom)"})}function y({model:e,f1:t,f2:n}){return(0,l.jsx)(c.A,{href:"#",onClick:l=>{l.preventDefault();let r=(0,s.getSession)(e);r.queueDialog(l=>[h,{handleClose:l,session:r,feature:new s.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(single row)"})}var w=n(26891);function v({tag:e,model:t}){return(0,l.jsxs)("div",{children:[(0,l.jsx)(u.A,{children:"List of supplementary alignment locations"}),(0,l.jsx)("ul",{children:e.split(";").filter(e=>!!e).map((e,n)=>{let[r,a,s,i]=e.split(","),o=(0,f.PC)(i),u=Math.floor(o/5),d=+a,m=+a+o,h=d-u,p=m+u,g=`${r}:${Math.max(1,h)}-${p}`,y=d.toLocaleString("en-US"),v=m.toLocaleString("en-US"),x=`${r}:${y}-${v} (${s}) [${o}bp]`;return(0,l.jsx)("li",{children:(0,l.jsx)(c.A,{href:"#",onClick:async e=>{e.preventDefault(),(0,w.h)(g,t)},children:x})},`${g}-${n}`)})})]})}function x(e){let{model:t,tag:n,feature:r}=e,i=(0,s.getSession)(t),{pluginManager:o}=(0,s.getEnv)(i),u=!1;try{u=!!o.getViewType("BreakpointSplitView")}catch(e){}return(0,l.jsxs)(a(),{...e,title:"Supplementary alignments",children:[(0,l.jsx)(v,{model:t,tag:n}),u?(0,l.jsx)(p,{model:t,feature:r}):null]})}}}]);
//# sourceMappingURL=2983.94ef110f743774b4.js.map