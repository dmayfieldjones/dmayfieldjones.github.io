"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5630],{75630:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c,featureData:()=>u});var r=a(25927),s=a(92766),i=a(54262),n=a(31177),l=a(72471);let o=new Set(["DUP","TRA","INV","CNV","DEL"]);function u(e,t,a,r){let s=e.split("	"),n=s[a?3:0],l=+s[a?4:1],u=+s[a?5:2],h=s[a?0:3],c=+s[a?1:4],f=+s[a?2:5],p=s[6],m=+s[7],v=d(s[8]),g=d(s[9]),w=s.slice(10),b=r?Object.fromEntries(r.slice(10).map((e,t)=>[e,w[t]])):w,y=o.has(w[0])?`<${w[0]}>`:void 0;return new i.SimpleFeature({...b,start:l,end:u,type:"paired_feature",refName:n,strand:v,name:p,score:m,uniqueId:t,mate:{refName:h,start:c,end:f,strand:g},...y?{ALT:[y]}:{}})}function d(e){return"+"===e?1:"-"===e?-1:"."===e?0:void 0}class h extends s.BaseFeatureDataAdapter{constructor(){super(...arguments),this.intervalTrees={}}async loadDataP(e){let t=this.pluginManager,a=this.getConf("bedpeLocation"),r=(0,n.openLocation)(a,t),s=await (0,i.fetchAndMaybeUnzip)(r,e);if(s.length>0x1fffffe8)throw Error("Data exceeds maximum string length (512MB)");let l=new TextDecoder("utf8",{fatal:!0}).decode(s).split(/\n|\r\n|\r/).filter(e=>!!e),o=[],u=0;for(;u<l.length&&l[u].startsWith("#");u++)o.push(l[u]);let d=o.join("\n"),h={},c={};for(;u<l.length;u++){let e=l[u],t=e.split("	"),a=t[0],r=t[3];h[a]||(h[a]=[]),c[r]||(c[r]=[]),h[a].push(e),c[r].push(e)}return{header:d,feats1:h,feats2:c,columnNames:this.getConf("columnNames")}}async loadData(e={}){return this.bedpeFeatures||(this.bedpeFeatures=this.loadDataP(e).catch(e=>{throw this.bedpeFeatures=void 0,e})),this.bedpeFeatures}async getRefNames(e={}){let{feats1:t,feats2:a}=await this.loadData(e);return[...new Set([...Object.keys(t),...Object.keys(a)])]}async getHeader(e={}){let{header:t}=await this.loadData(e);return t}async getNames(){let{header:e,columnNames:t}=await this.loadData();if(t.length)return t;let a=e.split(/\n|\r\n|\r/).filter(e=>!!e).at(-1);return(null==a?void 0:a.includes("	"))?a.slice(1).split("	").map(e=>e.trim()):void 0}async loadFeatureTreeP(e){var t,a,s,i;let{feats1:n,feats2:l}=await this.loadData(),o=await this.getNames(),d=new r.Ay;for(let r of[...null!==(a=null===(t=n[e])||void 0===t?void 0:t.map((t,a)=>u(t,`${this.id}-${e}-${a}-r1`,!1,o)))&&void 0!==a?a:[],...null!==(i=null===(s=l[e])||void 0===s?void 0:s.map((t,a)=>u(t,`${this.id}-${e}-${a}-r2`,!0,o)))&&void 0!==i?i:[]])d.insert([r.get("start"),r.get("end")],r);return d}async loadFeatureTree(e){return this.intervalTrees[e]||(this.intervalTrees[e]=this.loadFeatureTreeP(e).catch(t=>{throw this.intervalTrees[e]=void 0,t})),this.intervalTrees[e]}getFeatures(e,t={}){return(0,l.ObservableCreate)(async t=>{let{start:a,end:r,refName:s}=e,i=await this.loadFeatureTree(s);null==i||i.search([a,r]).forEach(e=>{t.next(e)}),t.complete()},t.stopToken)}freeResources(){}}h.capabilities=["getFeatures","getRefNames"];let c=h}}]);
//# sourceMappingURL=5630.d5989459176cdd09.js.map