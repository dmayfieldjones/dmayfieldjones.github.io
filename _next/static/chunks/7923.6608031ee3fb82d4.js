"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7923],{37923:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(95155),a=n(28687),r=n.n(a),s=n(15715),i=n(70473),l=n(12115),c=n(89890),f=n.n(c),d=n(45064),u=n.n(d),m=n(88753),g=n(66292),b=n(69068),j=n.n(b),x=n(19468),p=n(74100),h=n(94029);function C({config:e}){let[t,n]=(0,l.useState)(),[a,r]=(0,l.useState)(),{rpcManager:i}=(0,s.getSession)(e);(0,l.useEffect)(()=>{(async()=>{try{let t=(0,m.readConfObject)(e,"adapter"),n=await i.call(e.trackId,"CoreGetInfo",{adapterConfig:t});r(n)}catch(e){console.error(e),n(e)}})()},[e,i]);let c="string"==typeof a?{header:`<pre>${a.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:a||{};return(0,o.jsx)(u(),{title:"File info",children:t?(0,o.jsx)(h.ErrorMessage,{error:t}):void 0===a?(0,o.jsx)(h.LoadingEllipses,{message:"Loading file data"}):(0,o.jsx)(f(),{attributes:c})})}var y=n(64150);let v=(0,p.makeStyles)()(e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}})),A=(0,x.observer)(function({config:e,onClose:t}){let{classes:n}=v(),[a,r]=(0,l.useState)(),[c,f]=(0,l.useState)(),[d,u]=(0,l.useState)(!1),{rpcManager:b}=(0,s.getSession)(e);(0,l.useEffect)(()=>{(async()=>{try{let t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map(async t=>{let n=(0,m.readConfObject)(e,"adapter");return[t,await b.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]}));f(Object.fromEntries(t))}catch(e){console.error(e),r(e)}})()},[e,b]);let x=c?Object.entries(c):[],p=x.flatMap(([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`
Too many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""]).filter(e=>!!e).join("\n");return(0,o.jsx)(h.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl",children:(0,o.jsx)(y.A,{className:n.container,children:a?(0,o.jsx)(h.ErrorMessage,{error:a}):void 0===c?(0,o.jsx)(h.LoadingEllipses,{message:"Loading refNames"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{variant:"contained",onClick:()=>{j()(x.flatMap(([e,t])=>[`--- ${e} ---`,...t]).filter(e=>!!e).join("\n")),u(!0),setTimeout(()=>{u(!1)},1e3)},children:d?"Copied to clipboard!":"Copy ref names"}),(0,o.jsx)("pre",{className:n.refNames,children:p})]})})})}),N=(0,p.makeStyles)()({content:{minWidth:800},button:{float:"right"}}),S=(0,x.observer)(function({config:e}){let[t,n]=(0,l.useState)(!1),a=(0,m.readConfObject)(e),r=(0,s.getSession)(e),{classes:i}=N(),[c,d]=(0,l.useState)(!1),b=(0,m.getConf)(r,["formatAbout","hideUris"])||(0,m.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:x}=(0,s.getEnv)(r),p=x.evaluateExtensionPoint("Core-customizeAbout",{config:{...a,...(0,m.getConf)(r,["formatAbout","config"],{config:a}),...(0,m.readConfObject)(e,["formatAbout","config"],{config:a})}},{session:r,config:e}),h=x.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:r,config:e});return(0,o.jsxs)("div",{className:i.content,children:[(0,o.jsxs)(u(),{title:"Configuration",children:[b?null:(0,o.jsxs)("span",{className:i.button,children:[(0,o.jsx)(g.A,{variant:"contained",color:"secondary",onClick:()=>{d(!0)},children:"Show ref names"}),(0,o.jsx)(g.A,{variant:"contained",onClick:()=>{let e=function e(t,n){for(let o in t)o===n?delete t[o]:"object"==typeof t[o]&&e(t[o],n);return t}(structuredClone(a),"baseUri");j()(JSON.stringify(e,null,2)),n(!0),setTimeout(()=>{n(!1)},1e3)},children:t?"Copied to clipboard!":"Copy config"})]}),(0,o.jsx)(f(),{attributes:p.config,omit:["displays","baseUri","refNames","formatAbout","metadata"],hideUris:b})]}),p.config.metadata?(0,o.jsx)(u(),{title:"Metadata",children:(0,o.jsx)(f(),{attributes:p.config.metadata,omit:["displays","baseUri","refNames","formatAbout"],hideUris:b})}):null,h?(0,o.jsx)(u(),{title:h.name,children:(0,o.jsx)(h.Component,{config:e})}):null,(0,o.jsx)(C,{config:e}),c?(0,o.jsx)(A,{config:e,onClose:()=>{d(!1)}}):null]})});function k({config:e,handleClose:t}){let n=(0,s.getSession)(e),a=(0,i.getTrackName)(e,n),{pluginManager:l}=(0,s.getEnv)(n),c=l.evaluateExtensionPoint("Core-replaceAbout",S,{session:n,config:e});return(0,o.jsx)(r(),{open:!0,onClose:t,title:a,maxWidth:"xl",children:(0,o.jsx)(c,{config:e})})}}}]);
//# sourceMappingURL=7923.6608031ee3fb82d4.js.map