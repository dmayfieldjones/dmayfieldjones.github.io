"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9224],{29224:(e,n,s)=>{s.r(n),s.d(n,{default:()=>H});var l=s(95155),a=s(12115),i=s(94029),t=s(15715),r=s(31313),o=s(30821),d=s(76856);let c=(0,d.A)((0,l.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");var u=s(9670),m=s(66292),h=s(95946),g=s(73816),x=s(53494),j=s(96670),p=s(6968),A=s(19468),v=s(51539),f=s(74100),y=s(99136),b=s(37153),k=s(79608),S=s(57919),C=s(78822),P=s(80910);let N=(0,a.lazy)(()=>s.e(5047).then(s.bind(s,95047))),w=(0,f.makeStyles)()(()=>({lockedPluginTooltip:{marginRight:"0.5rem"}}));function E(){let{classes:e}=w();return(0,l.jsx)(C.A,{className:e.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it.",children:(0,l.jsx)(S.A,{})})}let I=(0,A.observer)(function({plugin:e,model:n}){let{pluginManager:s}=(0,t.getEnv)(n),a=(0,t.getSession)(n),{jbrowse:i,adminMode:r}=a,o=!!(0,b.isSessionWithSessionPlugins)(a)&&a.sessionPlugins.some(n=>{var l;return(null==(l=s.pluginMetadata[e.name])?void 0:l.url)===n.url});return(0,l.jsxs)(P.Ay,{children:[r||o?(0,l.jsx)(x.A,{"data-testid":`removePlugin-${e.name}`,onClick:()=>{a.queueDialog(n=>[N,{plugin:e.name,onClose:l=>{if(l){let n=s.pluginMetadata[e.name];r?i.removePlugin(n):(0,b.isSessionWithSessionPlugins)(a)&&a.removeSessionPlugin(n)}n()}}])},children:(0,l.jsx)(k.A,{})}):(0,l.jsx)(E,{}),(0,l.jsx)(u.A,{children:e.name})]},e.name)}),M=(0,A.observer)(function({pluginManager:e,model:n}){let{plugins:s}=e,{filterText:a}=n,i=s.filter(n=>{var s;return!(null==(s=e.pluginMetadata[n.name])?void 0:s.isCore)});return(0,l.jsx)(y.A,{children:i.length>0?i.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())).map(e=>(0,l.jsx)(I,{plugin:e,model:n},e.name)):(0,l.jsx)(u.A,{children:"No plugins currently installed"})})});var z=s(15843);let L=(0,d.A)((0,l.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),T=(0,d.A)((0,l.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var F=s(67144),R=s(16614),W=s(2440),$=s(58126);let _=(0,f.makeStyles)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"},mr:{marginRight:"0.5em"}}),B=(0,A.observer)(function({plugin:e,model:n}){let{classes:s}=_(),i=(0,t.getSession)(n),{pluginManager:r}=(0,t.getEnv)(n),{runtimePluginDefinitions:o}=r,d=o.some(n=>"url"in n&&n.url===e.url),[c,h]=(0,a.useState)(!1),{adminMode:g,jbrowse:x}=i,{name:j,authors:p,description:A}=e;return(0,l.jsxs)(F.A,{variant:"outlined",className:s.card,children:[(0,l.jsxs)(R.A,{children:[(0,l.jsx)(u.A,{variant:"h5",children:(0,l.jsx)(W.A,{href:`${e.location}#readme`,target:"_blank",rel:"noopener",children:e.name})}),(0,l.jsxs)("div",{className:s.dataField,children:[(0,l.jsx)(T,{className:s.mr}),(0,l.jsx)(u.A,{children:p.join(", ")})]}),(0,l.jsx)(u.A,{className:s.bold,children:"Description:"}),(0,l.jsx)(u.A,{children:A})]}),(0,l.jsx)($.A,{children:(0,l.jsx)(m.A,{variant:"contained",disabled:d||c,startIcon:d?(0,l.jsx)(L,{}):(0,l.jsx)(z.A,{}),onClick:()=>{g?x.addPlugin(e):(0,b.isSessionWithSessionPlugins)(i)?i.addSessionPlugin(e):i.notify("No way to install plugin"),h(!0)},children:d?"Installed":"Install"})})]},j)}),q=(0,a.lazy)(()=>s.e(5062).then(s.bind(s,15062))),D=(0,f.makeStyles)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"},mr:{marginRight:"0.3em"},m:{margin:"1em"}})),H=(0,A.observer)(function({model:e}){let{classes:n}=D(),{plugins:s,error:d}=function(){let[e,n]=(0,a.useState)(),[s,l]=(0,a.useState)();return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok){let n=await e.text();throw Error(`HTTP ${e.status} fetching plugins: ${n}`)}let s=await e.json();n(s.plugins)}catch(e){console.error(e),l(e)}})()},[]),{plugins:e,error:s}}(),{filterText:A}=e,f=(0,t.getSession)(e),{adminMode:y}=f,{pluginManager:b}=(0,v.getEnv)(e);return(0,l.jsxs)("div",{children:[y&&(0,l.jsxs)(l.Fragment,{children:[!t.isElectron&&(0,l.jsxs)("div",{className:n.adminBadge,children:[(0,l.jsx)(c,{className:n.mr}),(0,l.jsxs)(u.A,{children:["You are using the ",(0,l.jsx)("code",{children:"admin-server"}),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store."]})]}),(0,l.jsx)(m.A,{className:n.customPluginButton,variant:"contained",onClick:()=>{f.queueDialog(n=>[q,{model:e,onClose:n}])},children:"Add custom plugin"})]}),(0,l.jsx)(h.A,{label:"Filter plugins",value:A,onChange:n=>{e.setFilterText(n.target.value)},fullWidth:!0,slotProps:{input:{endAdornment:(0,l.jsx)(g.A,{position:"end",children:(0,l.jsx)(x.A,{onClick:()=>{e.clearFilterText()},children:(0,l.jsx)(r.A,{})})})}}}),(0,l.jsxs)(j.A,{defaultExpanded:!0,children:[(0,l.jsx)(p.A,{expandIcon:(0,l.jsx)(o.A,{className:n.expandIcon}),children:(0,l.jsx)(u.A,{variant:"h5",children:"Installed plugins"})}),(0,l.jsx)("div",{className:n.m,children:(0,l.jsx)(M,{pluginManager:b,model:e})})]}),(0,l.jsxs)(j.A,{defaultExpanded:!0,children:[(0,l.jsx)(p.A,{expandIcon:(0,l.jsx)(o.A,{className:n.expandIcon}),children:(0,l.jsx)(u.A,{variant:"h5",children:"Available plugins"})}),d?(0,l.jsx)(u.A,{color:"error",children:`${d}`}):s?s.filter(e=>!(t.isElectron&&e.cjsUrl)&&e.name.toLowerCase().includes(A.toLowerCase())).map(n=>(0,l.jsx)(B,{plugin:n,model:e},n.name)):(0,l.jsx)(i.LoadingEllipses,{})]})]})})},30821:(e,n,s)=>{s.d(n,{A:()=>i});var l=s(76856),a=s(95155);let i=(0,l.A)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},31313:(e,n,s)=>{s.d(n,{A:()=>i});var l=s(76856),a=s(95155);let i=(0,l.A)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},57919:(e,n,s)=>{s.d(n,{A:()=>i});var l=s(76856),a=s(95155);let i=(0,l.A)((0,a.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")}}]);
//# sourceMappingURL=9224.352719b70709ae77.js.map