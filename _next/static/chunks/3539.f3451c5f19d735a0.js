"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3539],{73539:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(88753),n=a(29269),i=a(15715),r=a(64446),u=a(31232);class p extends n.BaseSequenceAdapter{async getRefNames(e){let{fasta:t}=await this.setup(e);return[...t.keys()]}async getRegions(e){let{fasta:t}=await this.setup(e);return[...t.entries()].map(([e,t])=>({refName:e,start:0,end:t.sequence.length}))}async setupPre(e){let t=this.getConf("fastaLocation");return{fasta:new Map([...new Map((await (0,r.openLocation)(t,this.pluginManager).readFile("utf8")).split(">").filter(e=>/\S/.test(e)).map(e=>{let[t,...a]=e.split("\n"),[s,...n]=t.split(" "),i=a.join("").replace(/\s/g,"");return[s,{description:n.join(" "),sequence:i}]})).entries()].map(([e,t])=>[(0,s.readConfObject)(this.config,"rewriteRefNames",{refName:e})||e,t]))}}async getHeader(){let e=this.getConf("metadataLocation");return""===e.uri||"/path/to/fa.metadata.yaml"===e.uri?null:(0,r.openLocation)(e,this.pluginManager).readFile("utf8")}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch(e=>{throw this.setupP=void 0,e})),this.setupP}getFeatures(e,t){let{refName:a,start:s,end:n}=e;return(0,u.ObservableCreate)(async e=>{let{fasta:r}=await this.setup(t),u=r.get(a);u&&e.next(new i.SimpleFeature({id:`${a}-${s}-${n}`,data:{refName:a,start:s,end:n,seq:u.sequence.slice(s,n)}})),e.complete()})}freeResources(){}}}}]);
//# sourceMappingURL=3539.f3451c5f19d735a0.js.map