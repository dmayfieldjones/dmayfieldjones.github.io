"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5129],{25129:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var l=n(12115),a=n(97717),r=n.n(a),i=n(54262),s=n(47204),o=n(9561),m=n(28254),u=n(46042);async function c({view:e,feature:t}){var n;let{assemblyManager:l}=(0,i.getSession)(e),a=t.get("CIGAR"),r=t.get("strand"),s=(null===(n=t.get("tags"))||void 0===n?void 0:n.SA)||"",o=t.get("name"),m=(0,u.NI)(a,1),c=await l.waitForAssembly(e.assemblyNames[0]);if(!c)throw Error("assembly not found");let f=(0,u.Cu)(s,t.id(),r,o,!0),d=t.toJSON();d.clipPos=m,d.strand=1,d.mate={refName:o,start:m,end:m+(0,u.Gl)(a)};let p=[d,...f];return p.forEach((e,t)=>{e.refName=c.getCanonicalRefName(e.refName)||e.refName,e.syntenyId=t,e.mate.syntenyId=t,e.mate.uniqueId=`${e.uniqueId}_mate`}),p.sort((e,t)=>e.clipPos-t.clipPos),p}let f=(0,l.lazy)(()=>n.e(6e3).then(n.bind(n,96e3))),d=(0,l.lazy)(()=>n.e(7375).then(n.bind(n,37375)));function p({model:e,feature:t}){let{view:n}=e,[a,r]=(0,l.useState)(),[m,u]=(0,l.useState)();(0,l.useEffect)(()=>{(async()=>{try{let e=await c({view:n,feature:new i.SimpleFeature(t)});r(e)}catch(e){u(e),console.error(e)}})()},[t,n]);let f=[];if(a)for(let e=0;e<a.length-1;e++)f.push([a[e],a[e+1]]);return f.length?l.createElement("div",null,l.createElement(o.A,null,"Launch split view"),m?l.createElement(s.ErrorMessage,{error:m}):null,l.createElement("ul",null,f.map((t,n)=>{let[a,r]=t;return l.createElement("li",{key:`${JSON.stringify(t)}-${n}`},a.refName,":",(0,i.toLocale)(1===a.strand?a.end:a.start)," ->"," ",r.refName,":",(0,i.toLocale)(1===r.strand?r.start:r.end)," ",l.createElement(g,{model:e,f1:a,f2:r})," ",l.createElement(y,{model:e,f1:a,f2:r}))}))):null}function g({model:e,f1:t,f2:n}){return l.createElement(m.A,{href:"#",onClick:l=>{l.preventDefault();let a=(0,i.getSession)(e);a.queueDialog(l=>[f,{handleClose:l,session:a,feature:new i.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])}},"(top/bottom)")}function y({model:e,f1:t,f2:n}){return l.createElement(m.A,{href:"#",onClick:l=>{l.preventDefault();let a=(0,i.getSession)(e);a.queueDialog(l=>[d,{handleClose:l,session:a,feature:new i.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])}},"(single row)")}var E=n(13516);function h({tag:e,model:t}){return l.createElement("div",null,l.createElement(o.A,null,"List of supplementary alignment locations"),l.createElement("ul",null,e.split(";").filter(e=>!!e).map((e,n)=>{let[a,r,i,s]=e.split(","),o=(0,u.PC)(s),c=Math.floor(o/5),f=+r,d=+r+o,p=f-c,g=d+c,y=`${a}:${Math.max(1,p)}-${g}`,h=f.toLocaleString("en-US"),w=d.toLocaleString("en-US"),v=`${a}:${h}-${w} (${i}) [${o}bp]`;return l.createElement("li",{key:`${y}-${n}`},l.createElement(m.A,{href:"#",onClick:async e=>{e.preventDefault(),(0,E.h)(y,t)}},v))})))}function w(e){let{model:t,tag:n,feature:a}=e,s=(0,i.getSession)(t),{pluginManager:o}=(0,i.getEnv)(s),m=!1;try{m=!!o.getViewType("BreakpointSplitView")}catch(e){}return l.createElement(r(),{...e,title:"Supplementary alignments"},l.createElement(h,{model:t,tag:n}),m?l.createElement(p,{model:t,feature:a}):null)}}}]);
//# sourceMappingURL=5129.488258aea73b5492.js.map