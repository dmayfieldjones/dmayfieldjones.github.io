"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5148],{25148:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(12115),o=n(15288),r=n.n(o),l=n(54262),i=n(23806),s=n(84939),c=n.n(s),m=n(97717),f=n.n(m),u=n(53394),d=n(78443),g=n(21079),E=n.n(g),b=n(67072),p=n(97771),C=n(47204);function h({config:e}){let[t,n]=(0,a.useState)(),[o,r]=(0,a.useState)(),{rpcManager:i}=(0,l.getSession)(e);(0,a.useEffect)(()=>{(async()=>{try{let t=(0,u.readConfObject)(e,"adapter"),n=await i.call(e.trackId,"CoreGetInfo",{adapterConfig:t});r(n)}catch(e){console.error(e),n(e)}})()},[e,i]);let s="string"==typeof o?{header:`<pre>${o.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:o||{};return a.createElement(f(),{title:"File info"},t?a.createElement(C.ErrorMessage,{error:t}):void 0===o?a.createElement(C.LoadingEllipses,{message:"Loading file data"}):a.createElement(c(),{attributes:s}))}var y=n(55089);let v=(0,p.makeStyles)()(e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}})),S=(0,b.observer)(function({config:e,onClose:t}){let{classes:n}=v(),[o,r]=(0,a.useState)(),[s,c]=(0,a.useState)(),[m,f]=(0,a.useState)(!1),{rpcManager:g}=(0,l.getSession)(e);(0,a.useEffect)(()=>{(async()=>{try{let t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map(async t=>{let n=(0,u.readConfObject)(e,"adapter");return[t,await g.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]}));c(Object.fromEntries(t))}catch(e){console.error(e),r(e)}})()},[e,g]);let b=s?Object.entries(s):[],p=b.flatMap(([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`
Too many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""]).filter(e=>!!e).join("\n");return a.createElement(C.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl"},a.createElement(y.A,{className:n.container},o?a.createElement(C.ErrorMessage,{error:o}):void 0===s?a.createElement(C.LoadingEllipses,{message:"Loading refNames"}):a.createElement(a.Fragment,null,a.createElement(d.A,{variant:"contained",onClick:()=>{E()(b.flatMap(([e,t])=>[`--- ${e} ---`,...t]).filter(e=>!!e).join("\n")),f(!0),setTimeout(()=>{f(!1)},1e3)}},m?"Copied to clipboard!":"Copy ref names"),a.createElement("pre",{className:n.refNames},p))))}),k=(0,p.makeStyles)()({content:{minWidth:800},button:{float:"right"}}),A=(0,b.observer)(function({config:e}){let[t,n]=(0,a.useState)(!1),o=(0,u.readConfObject)(e),r=(0,l.getSession)(e),{classes:i}=k(),[s,m]=(0,a.useState)(!1),g=(0,u.getConf)(r,["formatAbout","hideUris"])||(0,u.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:b}=(0,l.getEnv)(r),p=b.evaluateExtensionPoint("Core-customizeAbout",{config:{...o,...(0,u.getConf)(r,["formatAbout","config"],{config:o}),...(0,u.readConfObject)(e,["formatAbout","config"],{config:o})}},{session:r,config:e}),C=b.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:r,config:e});return a.createElement("div",{className:i.content},a.createElement(f(),{title:"Configuration"},g?null:a.createElement("span",{className:i.button},a.createElement(d.A,{variant:"contained",color:"secondary",onClick:()=>{m(!0)}},"Show ref names"),a.createElement(d.A,{variant:"contained",onClick:()=>{let e=function e(t,n){for(let a in t)a===n?delete t[a]:"object"==typeof t[a]&&e(t[a],n);return t}(structuredClone(o),"baseUri");E()(JSON.stringify(e,null,2)),n(!0),setTimeout(()=>{n(!1)},1e3)}},t?"Copied to clipboard!":"Copy config")),a.createElement(c(),{attributes:p,omit:["displays","baseUri","refNames","formatAbout"],hideUris:g})),C?a.createElement(f(),{title:C.name},a.createElement(C.Component,{config:e})):null,a.createElement(h,{config:e}),s?a.createElement(S,{config:e,onClose:()=>{m(!1)}}):null)});function N({config:e,handleClose:t}){let n=(0,l.getSession)(e),o=(0,i.getTrackName)(e,n),{pluginManager:s}=(0,l.getEnv)(n),c=s.evaluateExtensionPoint("Core-replaceAbout",A,{session:n,config:e});return a.createElement(r(),{open:!0,onClose:t,title:o,maxWidth:"xl"},a.createElement(c,{config:e}))}}}]);
//# sourceMappingURL=5148.f26b7047cc5e1027.js.map