"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3438],{33438:(e,o,t)=>{t.d(o,{drawXY:()=>f});var r=t(53394),l=t(54262),a=t(94871),n=t(28251),c=t(23836);function f(e,o){let{features:t,bpPerPx:f,regions:m,scaleOpts:i,height:p,config:s,ticks:u,displayCrossHatches:h,offset:x=0,colorCallback:d}=o,g=m[0],S=(g.end-g.start)/f,w=p-2*x,k=(0,r.readConfObject)(s,"filled"),C=(0,r.readConfObject)(s,"clipColor"),v=(0,r.readConfObject)(s,"summaryScoreMode"),M=(0,r.readConfObject)(s,"bicolorPivotValue"),b=(0,r.readConfObject)(s,"minSize"),T=(0,c.getScale)({...i,range:[0,w]}),y=(0,c.getOrigin)(i.scaleType),R=T.domain(),P=R[0],N=R[1],O=e=>(0,l.clamp)(w-(T(e)||0),0,w)+x,j=e=>O(y)-O(e),E=e=>k?j(e):Math.max(b,1),_=!1,H=Number.NEGATIVE_INFINITY,I=[],V=P<M&&N>M,Y=performance.now();if("whiskers"===v){let o,r;for(let m of(Y=performance.now(),t.values())){performance.now()-Y>400&&((0,n.checkStopToken)(),Y=performance.now());let[t,i]=(0,l.featureSpanPx)(m,g,f);if(m.get("summary")){let n=Math.max(i-t+.3,b),f=m.get("maxScore"),p=d(m,f),s=V?p:p===o?r:r=(function(e,o){let t=e.toHsl(),r=1.4*t.l;return(0,a.colord)({...t,l:(0,l.clamp)(r,0,100)})})((0,a.colord)(p),0).toHex();(0,c.fillRectCtx)(t,O(f),n,E(f),e,s),o=p}}for(let m of(r=void 0,o=void 0,Y=performance.now(),t.values())){performance.now()-Y>400&&((0,n.checkStopToken)(),Y=performance.now());let[t,i]=(0,l.featureSpanPx)(m,g,f),p=m.get("score"),s=m.get("maxScore"),u=m.get("minScore"),h=m.get("summary"),x=d(m,p),S=V&&h?x===o?r:r=(0,a.colord)(d(m,s)).mix((0,a.colord)(d(m,u))).toString():x,w=Math.max(i-t+.3,b);Math.floor(t)!==Math.floor(H)&&(I.push(m),H=t),_=_||p<P||p>N,(0,c.fillRectCtx)(t,O(p),w,E(p),e,S),o=x}for(let m of(r=void 0,o=void 0,Y=performance.now(),t.values())){performance.now()-Y>400&&((0,n.checkStopToken)(),Y=performance.now());let[t,i]=(0,l.featureSpanPx)(m,g,f);if(m.get("summary")){let n=m.get("minScore"),f=d(m,n),p=Math.max(i-t+.3,b),s=V?f:f===o?r:r=(function(e,o){let t=e.toHsl(),r=.6*t.l;return(0,a.colord)({...t,l:(0,l.clamp)(r,0,100)})})((0,a.colord)(f),0).toHex();(0,c.fillRectCtx)(t,O(n),p,E(n),e,s),o=f}}}else for(let o of(Y=performance.now(),t.values())){performance.now()-Y>400&&((0,n.checkStopToken)(),Y=performance.now());let[t,r]=(0,l.featureSpanPx)(o,g,f);Math.floor(t)!==Math.floor(H)&&(I.push(o),H=t);let a=o.get("score"),m=d(o,a);_=_||a<P||a>N;let i=Math.max(r-t+.3,b);if("max"===v){let r=o.get("summary")?o.get("maxScore"):a;(0,c.fillRectCtx)(t,O(r),i,E(r),e,m)}else if("min"===v){let r=o.get("summary")?o.get("minScore"):a;(0,c.fillRectCtx)(t,O(r),i,E(r),e,m)}else(0,c.fillRectCtx)(t,O(a),i,E(a),e,m)}if(e.save(),_)for(let o of(e.fillStyle=C,Y=performance.now(),t.values())){performance.now()-Y>400&&((0,n.checkStopToken)(),Y=performance.now());let[t,r]=(0,l.featureSpanPx)(o,g,f),a=r-t+.3,m=o.get("score");m>N?(0,c.fillRectCtx)(t,x,a,2,e):m<P&&"log"!==i.scaleType&&(0,c.fillRectCtx)(t,p,a,2,e)}return e.restore(),h&&(e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.5)",u.values.forEach(o=>{e.beginPath(),e.moveTo(0,Math.round(O(o))),e.lineTo(S,Math.round(O(o))),e.stroke()})),{reducedFeatures:I}}}}]);
//# sourceMappingURL=3438.e5979e371cfa89c7.js.map