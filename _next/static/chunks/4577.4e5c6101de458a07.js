(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4577],{34577:(e,r,t)=>{"use strict";t.d(r,{fetchJb1:()=>w});var o=t(31177),s=t(54262),i=t(54073),a=t.n(i),n=t(44253),l=t.n(n);function c(e){return(null==e?void 0:e.label)&&"string"==typeof e.label}function u(e,r){for(let t of Object.keys(r))t in e&&"object"==typeof r[t]&&"object"==typeof e[t]?u(e[t],r[t]):(void 0===e[t]||void 0!==r[t])&&(e[t]=r[t]);return e}function f(e,r){if(e.tracks&&!Array.isArray(e.tracks)){if(c(e.tracks))e.tracks=[e.tracks];else{let r=[];for(let t of Object.keys(e.tracks)){let o=e.tracks[t];c(o)?r.push(o):r.push({label:t,...o})}e.tracks=r}}let t=e.trackMetadata;if(null==t?void 0:t.sources){var o;if("string"==typeof t.sources&&(t.sources=[t.sources]),(null==(o=t.sources)?void 0:o.url)&&"string"==typeof o.url&&(t.sources=[t.sources]),!Array.isArray(t.sources)){let e=[];for(let r of Object.keys(t.sources)){let o=t.sources[r];"name"in o||(o.name=r),e.push(o)}t.sources=e}t.sources=t.sources.map(e=>{if("string"==typeof e){let r={url:e},t=/\.(\w+)$/.exec(e);return t&&(r.type=t[1].toLowerCase()),r}return e})}if(e.sourceUrl=e.sourceUrl||r,e.sourceUrl.startsWith("/")&&(e.sourceUrl=new URL(e.sourceUrl,window.location.href).href),e.baseUrl=e.baseUrl||new URL(".",e.sourceUrl).href,e.baseUrl.length&&!e.baseUrl.endsWith("/")&&(e.baseUrl+="/"),e.sourceUrl){let r=[];e.tracks&&r.push(...e.tracks),e.stores&&r.push(...Object.values(e.stores)),e.names&&r.push(e.names),r.forEach(r=>{r.baseUrl||(r.baseUrl=e.baseUrl||"/")}),e.refSeqs&&"string"==typeof e.refSeqs&&(e.refSeqs=new URL(e.refSeqs,e.sourceUrl).href),e.nameUrl&&(e.nameUrl=new URL(e.nameUrl,e.sourceUrl).href)}return e.stores=e.stores||{},(e.tracks||[]).forEach(r=>{let t;if(r.config){let e=r.config;r.config=void 0,r={...e,...r}}!r.store&&(t="FeatureTrack"===r.type?"JBrowse/View/Track/HTMLFeatures":"ImageTrack"===r.type?"JBrowse/View/Track/FixedImage":"ImageTrack.Wiggle"===r.type?"JBrowse/View/Track/FixedImage/Wiggle":"SequenceTrack"===r.type?"JBrowse/View/Track/Sequence":p("JBrowse/View/Track",r.type),r.type=t,d(e,r),r.histograms&&(r.histograms.baseUrl||(r.histograms.baseUrl=r.baseUrl),d(e,r.histograms)))}),e}function p(e,r){return r?(r.includes("/")||(r=`${e}/${r}`),r=r.replace(/^\//,"")):""}function d(e,r){var t,o,i;let{urlTemplate:a=""}=r,n=r.storeClass?p("JBrowse/Store",r.storeClass):r?(null===(o=r.type)||void 0===o?void 0:o.includes("/FixedImage"))?`JBrowse/Store/TiledImage/Fixed${0===r.backendVersion?"_v0":""}`:/\.jsonz?$/i.test(a)?`JBrowse/Store/SeqFeature/NCList${0===r.backendVersion?"_v0":""}`:/\.bam$/i.test(a)?"JBrowse/Store/SeqFeature/BAM":/\.cram$/i.test(a)?"JBrowse/Store/SeqFeature/CRAM":/\.gff3?$/i.test(a)?"JBrowse/Store/SeqFeature/GFF3":/\.bed$/i.test(a)?"JBrowse/Store/SeqFeature/BED":/\.vcf.b?gz$/i.test(a)?"JBrowse/Store/SeqFeature/VCFTabix":/\.gff3?.b?gz$/i.test(a)?"JBrowse/Store/SeqFeature/GFF3Tabix":/\.bed.b?gz$/i.test(a)?"JBrowse/Store/SeqFeature/BEDTabix":/\.(bw|bigwig)$/i.test(a)?"JBrowse/Store/SeqFeature/BigWig":/\.(bb|bigbed)$/i.test(a)?"JBrowse/Store/SeqFeature/BigBed":/\.(fa|fasta)$/i.test(a)?"JBrowse/Store/SeqFeature/IndexedFasta":/\.(fa|fasta)\.b?gz$/i.test(a)?"JBrowse/Store/SeqFeature/BgzipIndexedFasta":/\.2bit$/i.test(a)?"JBrowse/Store/SeqFeature/TwoBit":(null===(i=r.type)||void 0===i?void 0:i.endsWith("/Sequence"))?"JBrowse/Store/Sequence/StaticChunked":"":"";if(!n){console.warn(`Unable to determine an appropriate data store to use with track '${r.label}', please explicitly specify a storeClass in the configuration.`);return}let l={...r,type:n};l.name="JBrowse/Store/Sequence/StaticChunked"!==n&&"JBrowse/Store/Sequence/IndexedFasta"!==n&&"JBrowse/Store/SeqFeature/IndexedFasta"!==n&&"JBrowse/Store/SeqFeature/BgzipIndexedFasta"!==n&&"JBrowse/Store/SeqFeature/TwoBit"!==n&&"JBrowse/Store/Sequence/TwoBit"!==n&&!r.useAsRefSeqStore||(null===(t=e.stores)||void 0===t?void 0:t.refseqs)?`store${(0,s.objectHash)(l)}`:"refseqs",e.stores||(e.stores={}),e.stores[l.name]=l,r.store=l.name}function y(e){return void 0!==e.uri}function h(e){return void 0!==e.localPath}async function w(e={uri:"",locationType:"UriLocation"},r={include:["{dataRoot}/trackList.json","{dataRoot}/tracks.conf"]},t={uri:"",locationType:"UriLocation"}){let o="uri"in e?"uri":"localPath",s=JSON.parse(JSON.stringify(e)),i="";if(y(e)&&(i=e.uri),h(e)&&(i=e.localPath),i.endsWith("/")&&(s[o]=i.slice(0,-1)),y(t)&&t.uri||h(t)&&t.localPath){let e="uri"in t?"uri":"localPath",r="";y(t)&&(r=t.uri),h(t)&&(r=t.localPath),r.endsWith("/")&&(r=r.slice(0,-1));let i={};for(let t of["jbrowse.conf","jbrowse_conf.json"]){let o=null;try{o=await b({[e]:`${r}/${t}`})}catch(e){console.error(`tried to access ${r}/${t}, but failed`)}i=S(i,o)||{}}return s[o]&&(i.dataRoot=s[o]),g(i)}let a=f(r,window.location.href);return s[o]&&(a.dataRoot=s[o]),g(a)}async function g(e,r=B){let t=u(structuredClone(r),e),o=await v(t);return k(o=S(o,e)||o,o),function(e){if(e.tracks||(e.tracks=[]),!e.baseUrl)throw Error("Must provide a `baseUrl` in configuration")}(o),o}async function b(e){let r=await (0,o.openLocation)(e).readFile("utf8");return y(e)?m(r,e.uri):h(e)?m(r,e.localPath):m(r)}function m(e,r=""){return e.trim().startsWith("{")?function(e,r){if("string"==typeof e){let t;try{t=JSON.parse(e)}catch(e){throw Error(`${e} when parsing configuration.`)}return f(t,r)}return f(e,r)}(e,r):function(e,r){let t;try{t=function(e,r){let t,o,s,i,n=[],c={tracks:{}};function u(){if(void 0!==s){let e;try{let r=/^json:(.+)/i.exec(s);if(e=r?JSON.parse(r[1]):/^[+-]?[\d.,]+([eE][-+]?\d+)?$/.test(s)?Number.parseFloat(s.replaceAll(",","")):s,!t)throw Error(`Error parsing in section ${n.join(" - ")}`);let i=[...n,...t].join(".");if("+="===o){let r=a()(c,i);r?Array.isArray(r)||(r=[r]):r=[],r.push(e),e=r}"true"===e&&(e=!0),"false"===e&&(e=!1),l()(c,i,e)}catch(e){throw Error(`syntax error${r?` in ${r}`:""}${i?` at line ${i-1}`:""}`)}}}return e.split(/\n|\r\n|\r/).forEach((e,r)=>{let a;i=r+1;let l=e.replace(/^\s*#.+/,"");if(a=/^\s*\[([^\]]+)/.exec(l))u(),t=void 0,s=void 0,1===(n=a[1].trim().split(/\s*\.\s*/)).length&&"general"===n[0].toLowerCase()&&(n=[]);else if(a=l.match(void 0===s?/^([^+=]+)(\+?=)(.*)/:/^(\S[^+=]+)(\+?=)(.*)/))u(),t=a[1].trim().split(/\s*\.\s*/),[,,o]=a,"include"===[...n,...t].join(".")&&(o="+="),s=a[3].trim();else if(void 0!==t&&(a=/^\s{0,4}\+\s*(.+)/.exec(l)))u(),o="+=",s=a[1].trim();else if(void 0!==s&&(a=/^\s+(\S.*)/.exec(l))){let e=a[1];s+=s.length?` ${e.trim()}`:e.trim()}else u(),t=void 0,s=void 0}),u(),c}(e,r)}catch(e){throw Error(`${e} when parsing configuration.`)}return f(t,r)}(e,r)}function S(e,r){if(null===r)return null;for(let t of(null===e&&(e={}),Object.keys(r)))if("tracks"===t&&t in e){let o=e[t]||[],s=r[t]||[];if(Array.isArray(o)&&Array.isArray(s))e[t]=function(e,r){if(!r.length)return e;let t={};return e.forEach((e,r)=>{e.index=r,t[e.label]=e}),r.forEach(r=>{let o=t[r.label];o?S(o,r):e.push(r)}),e}(o,s);else throw Error(`Track config has not been properly regularized: ${o} ${s}`)}else"datasets"!==t&&t in e&&"object"==typeof r[t]&&"object"==typeof e[t]?e[t]=u(e[t],r[t]):"dataRoot"===t?(void 0===e[t]||"data"===e[t]&&void 0!==r[t])&&(e[t]=r[t]):(void 0===e[t]||void 0!==r[t])&&(e[t]=r[t]);return e}async function v(e){async function r(t,o){var s;let i=t.sourceUrl||t.baseUrl;if(!i)throw Error(`Could not determine source URL: ${JSON.stringify(t)}`);let a=S(structuredClone(o),t);if(!a)throw Error("Problem merging configs");let n=k((Array.isArray(s=t.include||[])||(s=[s]),s.map(e=>("string"==typeof e&&(e={url:e}),"format"in e||(e.format=e.url.endsWith(".conf")?"conf":"JB_json"),"JB_json"!==e.format||"version"in e||(e.version=1),e))),a);t.include=void 0;let l=n.map(async t=>(t.cacheBuster=e.cacheBuster,r(await b({uri:new URL(t.url,i).href,locationType:"UriLocation"}),a)));return(await Promise.all(l)).forEach(e=>{t=S(t,e)||t}),t}return r(e=structuredClone(e),{})}function k(e,r){if(!e)return e;if(Array.isArray(e))for(let t=0;t<e.length;t+=1)e[t]=k(e[t],r);else if("object"==typeof e)for(let t of Object.keys(e))e[t]=k(e[t],r);else if("string"==typeof e)return function(e,r){return e.replaceAll(/{([\s\w.]+)}/g,(e,t)=>{t=t.replaceAll(/\s+/g,"");let o=a()(r,t);if(void 0!==o)return"function"==typeof o?o(t):o;if(r.callback){let e=r.callback.call(this,t);if(void 0!==e)return e}return e})}(e,r);return e}let B={tracks:[],containerID:"GenomeBrowser",dataRoot:"data",show_tracklist:!0,show_nav:!0,show_menu:!0,show_overview:!0,show_fullviewlink:!0,update_browser_title:!0,updateBrowserURL:!0,refSeqs:"{dataRoot}/seq/refSeqs.json",include:["jbrowse.conf","jbrowse_conf.json"],nameUrl:"{dataRoot}/names/root.json",datasets:{_DEFAULT_EXAMPLES:!0,volvox:{url:"?data=sample_data/json/volvox",name:"Volvox Example"},modencode:{url:"?data=sample_data/json/modencode",name:"MODEncode Example"},yeast:{url:"?data=sample_data/json/yeast",name:"Yeast Example"}},highlightSearchedRegions:!1,highResolutionMode:"auto"}},54073:(e,r,t)=>{let o=t(72194);function s(e,r,t){return"function"==typeof t.join?t.join(e):e[0]+r+e[1]}function i(e,r,t){return"function"!=typeof t.isValid||t.isValid(e,r)}function a(e){return o(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,r,t){var n,l;if(o(t)||(t={default:t}),!a(e))return void 0!==t.default?t.default:e;"number"==typeof r&&(r=String(r));let c=Array.isArray(r),u="string"==typeof r,f=t.separator||".",p=t.joinChar||("string"==typeof f?f:".");if(!u&&!c)return e;if(u&&r in e)return i(r,e,t)?e[r]:t.default;let d=c?r:(n=r,"function"==typeof(l=t).split?l.split(n):n.split(f)),y=d.length,h=0;do{let r=d[h];for("number"==typeof r&&(r=String(r));r&&"\\"===r.slice(-1);)r=s([r.slice(0,-1),d[++h]||""],p,t);if(r in e){if(!i(r,e,t))return t.default;e=e[r]}else{let o=!1,a=h+1;for(;a<y;)if(o=(r=s([r,d[a++]],p,t))in e){if(!i(r,e,t))return t.default;e=e[r],h=a-1;break}if(!o)return t.default}}while(++h<y&&a(e));return h===y?e:t.default}},1990:(e,r,t)=>{"use strict";var o=t(72194);function s(e){return!0===o(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var r,t;return!1!==s(e)&&"function"==typeof(r=e.constructor)&&!1!==s(t=r.prototype)&&!1!==t.hasOwnProperty("isPrototypeOf")}},85429:e=>{"use strict";e.exports=function(e){return"object"==typeof e?null===e:"function"!=typeof e}},72194:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},44253:(e,r,t)=>{"use strict";let{deleteProperty:o}=Reflect,s=t(85429),i=t(1990),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,n=e=>"__proto__"===e||"constructor"===e||"prototype"===e,l=e=>{if(!s(e))throw TypeError("Object keys must be strings or symbols");if(n(e))throw Error(`Cannot set unsafe key: "${e}"`)},c=e=>Array.isArray(e)?e.flat().map(String).join(","):e,u=(e,r)=>{if("string"!=typeof e||!r)return e;let t=e+";";return void 0!==r.arrays&&(t+=`arrays=${r.arrays};`),void 0!==r.separator&&(t+=`separator=${r.separator};`),void 0!==r.split&&(t+=`split=${r.split};`),void 0!==r.merge&&(t+=`merge=${r.merge};`),void 0!==r.preservePaths&&(t+=`preservePaths=${r.preservePaths};`),t},f=(e,r,t)=>{let o=c(r?u(e,r):e);l(o);let s=h.cache.get(o)||t();return h.cache.set(o,s),s},p=(e,r={})=>{let t=r.separator||".",o="/"!==t&&r.preservePaths;if("string"==typeof e&&!1!==o&&/\//.test(e))return[e];let s=[],i="",a=e=>{let r;""!==e.trim()&&Number.isInteger(r=Number(e))?s.push(r):s.push(e)};for(let r=0;r<e.length;r++){let o=e[r];if("\\"===o){i+=e[++r];continue}if(o===t){a(i),i="";continue}i+=o}return i&&a(i),s},d=(e,r)=>r&&"function"==typeof r.split?r.split(e):"symbol"==typeof e?[e]:Array.isArray(e)?e:f(e,r,()=>p(e,r)),y=(e,r,t,s)=>{if(l(r),void 0===t)o(e,r);else if(s&&s.merge){let o="function"===s.merge?s.merge:Object.assign;o&&i(e[r])&&i(t)?e[r]=o(e[r],t):e[r]=t}else e[r]=t;return e},h=(e,r,t,o)=>{if(!r||!a(e))return e;let s=d(r,o),i=e;for(let e=0;e<s.length;e++){let r=s[e],n=s[e+1];if(l(r),void 0===n){y(i,r,t,o);break}if("number"==typeof n&&!Array.isArray(i[r])){i=i[r]=[];continue}a(i[r])||(i[r]={}),i=i[r]}return e};h.split=d,h.cache=new Map,h.clear=()=>{h.cache=new Map},e.exports=h}}]);
//# sourceMappingURL=4577.4e5c6101de458a07.js.map