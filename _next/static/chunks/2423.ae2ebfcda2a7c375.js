"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2423],{92423:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var l=i(95155),n=i(12115),r=i(86168),s=i(51319),a=i.n(s),o=i(84762),d=i(19468),u=i(45064),c=i.n(u),f=i(15715),v=i(9670),h=i(54102),m=i(59886),p=i(24716),x=i(65496),j=i(95946);function g({columns:e,filter:t,setFilter:i}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.A,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),e.map(({field:e})=>(0,l.jsx)(j.A,{placeholder:`Filter ${e}`,value:t[e]||"",onChange:l=>{i({...t,[e]:l.target.value})}},`filter-${e}`))]})}function b(e){var t;let i;let{feature:r,descriptions:s={}}=e,[a,o]=(0,n.useState)({}),d=Object.entries(r.samples||{}),u=[],j=Object.keys(a);try{u=d.map(e=>({...Object.fromEntries(Object.entries(e[1]).map(e=>[e[0],`${e[1]}`])),sample:e[0],id:e[0]})).filter(e=>!j.length||j.every(t=>{let i=a[t];return!i||RegExp(i,"i").exec(e[t])}))}catch(e){i=e}let[b,N]=(0,n.useState)(!1),O=["sample",...Object.keys((null===(t=d[0])||void 0===t?void 0:t[1])||{})],S=O.map(e=>(0,f.measureGridWidth)(u.map(t=>t[e]))),y=O.map((e,t)=>{var i,l;return{field:e,description:null===(l=null===(i=null==s?void 0:s.FORMAT)||void 0===i?void 0:i[e])||void 0===l?void 0:l.Description,width:S[t]}});return d.length?(0,l.jsxs)(c(),{...e,title:"Samples",children:[i?(0,l.jsx)(v.A,{color:"error",children:`${i}`}):null,(0,l.jsx)(h.A,{control:(0,l.jsx)(m.A,{checked:b,onChange:e=>{N(e.target.checked)}}),label:(0,l.jsx)(v.A,{variant:"body2",children:"Show options"})}),b?(0,l.jsx)(g,{setFilter:o,columns:y,filter:a}):null,(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,l.jsx)(p.z,{rows:u,hideFooter:u.length<100,columns:y,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:b?x.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}})})]}):null}let N={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"},O=(0,n.lazy)(()=>i.e(1672).then(i.bind(i,61672))),S=(0,n.lazy)(()=>i.e(3204).then(i.bind(i,33204)));function y({descriptions:e,feature:t}){var i,n,r,s,a;let o=null===(n=null===(i=null==e?void 0:e.INFO)||void 0===i?void 0:i.ANN)||void 0===n?void 0:n.Description,d=(null===(s=null===(r=null==o?void 0:o.match(/.*Functional annotations:'(.*)'$/))||void 0===r?void 0:r[1])||void 0===s?void 0:s.split("|"))||[],u=(null===(a=t.INFO)||void 0===a?void 0:a.ANN)||[];return(0,l.jsx)(S,{fields:d,data:u,title:"Variant ANN field"})}function A({descriptions:e,feature:t}){var i,n,r,s,a;let o=null===(n=null===(i=null==e?void 0:e.INFO)||void 0===i?void 0:i.CSQ)||void 0===n?void 0:n.Description,d=(null===(s=null===(r=null==o?void 0:o.match(/.*Format: (.*)/))||void 0===r?void 0:r[1])||void 0===s?void 0:s.split("|"))||[],u=(null===(a=t.INFO)||void 0===a?void 0:a.CSQ)||[];return(0,l.jsx)(S,{fields:d,data:u,title:"Variant CSQ field"})}function F({model:e}){let{featureData:t}=e,i=JSON.parse(JSON.stringify(t)),{type:n=""}=i;return"breakend"===n?(0,l.jsx)(O,{feature:i,locStrings:i.ALT.map(e=>{var t;return(null===(t=(0,r.h)(e))||void 0===t?void 0:t.MatePosition)||""}),model:e}):"translocation"===n?(0,l.jsx)(O,{feature:i,model:e,locStrings:[`${i.INFO.CHR2[0]}:${i.INFO.END}`]}):"paired_feature"===n?(0,l.jsx)(O,{feature:i,model:e,locStrings:[`${i.mate.refName}:${i.mate.start}`]}):n.includes("inversion")||n.includes("deletion")||n.includes("duplication")||n.includes("cnv")||n.includes("sv")?(0,l.jsx)(O,{feature:{uniqueId:"random",refName:i.refName,start:i.start,end:i.start+1,mate:{refName:i.refName,start:i.end,end:i.end+1}},model:e,locStrings:[`${i.refName}:${i.end}`]}):null}let w=(0,d.observer)(function(e){let{model:t}=e,{featureData:i,descriptions:r}=t,s=JSON.parse(JSON.stringify(i)),{samples:d,ALT:u,...c}=s;return(0,l.jsxs)(o.A,{"data-testid":"variant-side-drawer",children:[(0,l.jsx)(a(),{feature:c,descriptions:{...N,...r},...e}),(0,l.jsxs)(n.Suspense,{fallback:null,children:[(0,l.jsx)(A,{feature:c,descriptions:r}),(0,l.jsx)(y,{feature:c,descriptions:r}),(0,l.jsx)(F,{model:t})]}),(0,l.jsx)(b,{feature:s,...e,descriptions:r})]})})}}]);
//# sourceMappingURL=2423.ae2ebfcda2a7c375.js.map