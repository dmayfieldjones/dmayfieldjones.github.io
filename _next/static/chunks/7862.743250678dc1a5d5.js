"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4809,7862],{87862:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var n=r(95155),o=r(47204),s=r(54262),l=r(67072),i=r(97771),a=r(12115),c=r(51846),d=r(40939),m=r.n(d),x=r(14294),h=r(22471);let u=(0,h.A)((0,n.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var g=r(77159),j=r(49300);let p=(0,h.A)((0,n.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft"),f=(0,h.A)((0,n.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight");var v=r(68749),b=r(44394),k=r(47821),y=r(34809);let A=(0,i.makeStyles)()(e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}})),C=(0,l.observer)(function({model:e}){let{classes:t}=A(),[r,o]=(0,a.useState)(null);return(0,n.jsxs)("div",{className:t.controls,children:[(0,n.jsx)(k.A,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow,children:(0,n.jsx)(b.A,{})}),(0,n.jsx)(k.A,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in",children:(0,n.jsx)(v.A,{})}),(0,n.jsx)(k.A,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:(0,n.jsx)(p,{})}),(0,n.jsx)(k.A,{onClick:e.rotateClockwiseButton,title:"rotate clockwise",children:(0,n.jsx)(f,{})}),(0,n.jsx)(k.A,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock,children:e.lockedFitToWindow?(0,n.jsx)(x.A,{}):(0,n.jsx)(u,{})}),(0,n.jsx)(k.A,{onClick:e=>{o(e.currentTarget)},children:(0,n.jsx)(g.A,{})}),e.hideTrackSelectorButton?null:(0,n.jsx)(k.A,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:(0,n.jsx)(c.TrackSelector,{})}),r?(0,n.jsx)(m(),{anchorEl:r,menuItems:[{label:"Export SVG",icon:j.A,onClick:()=>{(0,s.getSession)(e).queueDialog(t=>[y.default,{model:e,handleClose:t}])}}],onMenuItemClick:(e,t)=>{t(),o(null)},open:!!r,onClose:()=>{o(null)}}):null]})});var S=r(9552),T=r(88552),w=r(78443);let z=(0,i.makeStyles)()(e=>({importFormContainer:{padding:e.spacing(6)}})),M=(0,l.observer)(function({model:e}){let{classes:t}=z(),r=(0,s.getSession)(e),{error:l}=e,{assemblyNames:i,assemblyManager:c}=r,[d,m]=(0,a.useState)(i[0]),x=c.get(d),h=i.length?null==x?void 0:x.error:"No configured assemblies",u=(null==x?void 0:x.regions)||[],g=h||l;return(0,n.jsxs)(S.A,{className:t.importFormContainer,children:[g?(0,n.jsx)(T.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(0,n.jsx)(T.Ay,{item:!0,children:(0,n.jsx)(o.ErrorMessage,{error:g})})}):null,(0,n.jsxs)(T.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,n.jsx)(T.Ay,{item:!0,children:(0,n.jsx)(o.AssemblySelector,{onChange:t=>{e.setError(void 0),m(t)},session:r,selected:d})}),(0,n.jsx)(T.Ay,{item:!0,children:(0,n.jsx)(w.A,{disabled:!u.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(u)},variant:"contained",color:"primary",children:u.length||g?"Open":"Loading..."})})]})]})});var N=r(87457);let L=(0,i.makeStyles)()(e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}})),P=(0,l.observer)(({model:e})=>(0,n.jsxs)(n.Fragment,{children:[e.staticSlices.map(t=>(0,n.jsx)(N.A,{model:e,slice:t},(0,s.assembleLocString)(t.region.elided?t.region.regions[0]:t.region))),e.tracks.map(t=>{let r=t.displays[0];return(0,n.jsx)(r.RenderingComponent,{display:r,view:e},r.id)})]})),V=(0,l.observer)(({model:e})=>{let t=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight&&e.initialized,r=!t&&!e.disableImportForm;return r||e.error?(0,n.jsx)(M,{model:e}):t&&!r?(0,n.jsx)($,{model:e}):null}),$=(0,l.observer)(function({model:e}){let{width:t,height:r,id:s,offsetRadians:l,centerXY:i,figureWidth:a,figureHeight:c,hideVerticalResizeHandle:d}=e,{classes:m}=L();return(0,n.jsxs)("div",{className:m.root,style:{width:t,height:r},"data-testid":s,children:[(0,n.jsx)("div",{className:m.scroller,style:{width:t,height:r},children:(0,n.jsx)("svg",{style:{transform:`rotate(${l}rad)`,transition:"transform 0.5s",transformOrigin:i.map(e=>`${e}px`).join(" "),position:"absolute",left:0,top:0},width:a,height:c,children:(0,n.jsx)("g",{transform:`translate(${i})`,children:(0,n.jsx)(P,{model:e})})})}),(0,n.jsx)(C,{model:e}),d?null:(0,n.jsx)(o.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})}),F=V},34809:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var n=r(95155),o=r(12115),s=r(47204),l=r(54262),i=r(77311),a=r(9561),c=r(19293),d=r(55089),m=r(80583),x=r(79201),h=r(17386),u=r(93929),g=r(78443);function j(){return(0,n.jsxs)("div",{children:[(0,n.jsx)(i.A,{size:20,style:{marginRight:20}}),(0,n.jsx)(a.A,{display:"inline",children:"Creating SVG"})]})}function p({children:e,...t}){return(0,n.jsx)("div",{children:(0,n.jsx)(c.A,{...t,children:e})})}function f(e,t){return(0,l.useLocalStorage)(`svg-${e}`,t)}function v({model:e,handleClose:t}){let r=(0,l.getSession)(e),i="undefined"!=typeof OffscreenCanvas,[c,v]=(0,o.useState)(i),[b,k]=(0,o.useState)(!1),[y,A]=(0,o.useState)(),[C,S]=f("file","jbrowse.svg"),[T,w]=f("theme",r.themeName||"default");return(0,n.jsxs)(s.Dialog,{open:!0,onClose:t,title:"Export SVG",children:[(0,n.jsxs)(d.A,{children:[y?(0,n.jsx)(s.ErrorMessage,{error:y}):b?(0,n.jsx)(j,{}):null,(0,n.jsx)(p,{helperText:"filename",value:C,onChange:e=>{S(e.target.value)}}),r.allThemes?(0,n.jsx)(p,{select:!0,label:"Theme",value:T,onChange:e=>{w(e.target.value)},children:Object.entries(r.allThemes()).map(([e,t])=>(0,n.jsx)(m.A,{value:e,children:t.name||"(Unknown name)"},e))}):null,i?(0,n.jsx)(x.A,{control:(0,n.jsx)(h.A,{checked:c,onChange:()=>{v(e=>!e)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):(0,n.jsx)(a.A,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),(0,n.jsxs)(u.A,{children:[(0,n.jsx)(g.A,{variant:"contained",color:"secondary",onClick:()=>{t()},children:"Cancel"}),(0,n.jsx)(g.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{k(!0),A(void 0);try{await e.exportSvg({rasterizeLayers:c,filename:C,themeName:T}),t()}catch(e){console.error(e),A(e)}finally{k(!1)}},children:"Submit"})]})]})}},87457:(e,t,r)=>{r.d(t,{A:()=>x});var n=r(95155),o=r(54262),s=r(28446),l=r(35761),i=r(67072);let a=(0,r(97771).makeStyles)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}}),c=(0,i.observer)(function({model:e,slice:t,region:r}){let s=(0,l.A)(),{radiusPx:i}=e,a=i+1,{endRadians:c,startRadians:m}=t,x=(0,o.polarToCartesian)(a,m),h=(0,o.polarToCartesian)(a,c),u=(c-m)*a,g=c-m>Math.PI?"1":"0",j=`[${Number(r.regions.length).toLocaleString()}]`;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{text:j,view:e,maxWidthPx:u,radians:(c+m)/2,radiusPx:a,title:`${j} more regions`,color:s.palette.text.primary}),(0,n.jsx)("path",{d:["M",...x,"A",a,a,"0",g,"1",...h].join(" "),...(0,o.getStrokeProps)(s.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})}),d=(0,i.observer)(function({view:e,text:t,maxWidthPx:r,radians:s,radiusPx:l,title:i,color:c}){let{classes:d}=a(),m=(0,o.polarToCartesian)(l+5,s);return t?6.5*t.length<r?(0,n.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${m}) rotate(${(0,o.radToDeg)(s)+90})`,...(0,o.getFillProps)(c),children:[t,(0,n.jsx)("title",{children:i||t})]}):r>4?(0,o.radToDeg)(s+e.offsetRadians-Math.PI/2)>=180?(0,n.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,o.radToDeg)(s)})`,fill:c,children:[t,(0,n.jsx)("title",{children:i||t})]}):(0,n.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,o.radToDeg)(s)+180})`,fill:c,children:[t,(0,n.jsx)("title",{children:i||t})]}):null:null}),m=(0,i.observer)(function({model:e,slice:t,region:r}){let i=(0,l.A)(),{radiusPx:a}=e,{endRadians:c,startRadians:m}=t,x=(0,o.getSession)(e).assemblyManager.get(r.assemblyName),h=x?x.getRefNameColor(r.refName):void 0;if(h)try{h=(0,s.makeContrasting)(h,i.palette.background.paper)}catch(e){h=i.palette.text.primary}else h=i.palette.text.primary;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{text:r.refName,view:e,maxWidthPx:(c-m)*a,radians:(c+m)/2,radiusPx:a,color:h}),(0,n.jsx)("path",{d:function(e,t,r,n){e.flipped&&([r,n]=[n,r]);let o=e.bpToXY(r,t),s=e.bpToXY(n,t);return["M",...o,"A",t,t,"0",Math.abs(n-r)/e.bpPerRadian>Math.PI?"1":"0","1",...s].join(" ")}(t,a+1,r.start,r.end),stroke:h,strokeWidth:2,fill:"none"})]})}),x=(0,i.observer)(function({model:e,slice:t}){return t.region.elided?(0,n.jsx)(c,{model:e,region:t.region,slice:t},(0,o.assembleLocString)(t.region.regions[0])):(0,n.jsx)(m,{region:t.region,model:e,slice:t},(0,o.assembleLocString)(t.region))})},14294:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(22471),o=r(95155);let s=(0,n.A)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")}}]);
//# sourceMappingURL=7862.743250678dc1a5d5.js.map