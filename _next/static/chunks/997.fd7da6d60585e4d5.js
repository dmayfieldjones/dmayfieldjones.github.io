"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{2441:()=>{try{self["workbox:core:7.0.0"]&&_()}catch(e){}},4754:()=>{try{self["workbox:range-requests:7.0.0"]&&_()}catch(e){}},8997:(e,t,n)=>{n.d(t,{A:()=>dv});var i,r,o,a,s,l,c,u,d,h,f,p={};n.r(p),n.d(p,{blob:()=>eu,buffer:()=>eh,csv:()=>eL,dsv:()=>ek,html:()=>eD,image:()=>eM,json:()=>e$,svg:()=>eN,text:()=>e_,tsv:()=>eT,xml:()=>eI});var m={};n.r(m),n.d(m,{brush:()=>n_,brushSelection:()=>nx,brushX:()=>nA,brushY:()=>nC});var g={};n.r(g),n.d(g,{dispatch:()=>nE});var y={};n.r(y),n.d(y,{FormatSpecifier:()=>nN,format:()=>a,formatDefaultLocale:()=>nG,formatLocale:()=>nW,formatPrefix:()=>s,formatSpecifier:()=>nD,precisionFixed:()=>nj,precisionPrefix:()=>nq,precisionRound:()=>nz});let v="1.52.0";function b(){}function w(e){return null==e?b:function(){return this.querySelector(e)}}function x(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function A(){return[]}function C(e){return null==e?A:function(){return this.querySelectorAll(e)}}function S(e){return function(){return this.matches(e)}}function k(e){return function(t){return t.matches(e)}}var L=Array.prototype.find;function T(){return this.firstElementChild}var M=Array.prototype.filter;function E(){return Array.from(this.children)}function $(e){return Array(e.length)}function P(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function I(e,t,n,i,r,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new P(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function D(e,t,n,i,r,o,a){var s,l,c,u=new Map,d=t.length,h=o.length,f=Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?r[s]=l:u.set(c,l));for(s=0;s<h;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(i[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new P(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(f[s])===l&&(r[s]=l)}function N(e){return e.__data__}function F(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}P.prototype={constructor:P,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var B="http://www.w3.org/1999/xhtml";let O={svg:"http://www.w3.org/2000/svg",xhtml:B,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function R(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),O.hasOwnProperty(t)?{space:O[t],local:e}:e}function H(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function W(e,t){return e.style.getPropertyValue(t)||H(e).getComputedStyle(e,null).getPropertyValue(t)}function G(e){return e.trim().split(/^|\s+/)}function j(e){return e.classList||new q(e)}function q(e){this._node=e,this._names=G(e.getAttribute("class")||"")}function z(e,t){for(var n=j(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function V(e,t){for(var n=j(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function U(){this.textContent=""}function Y(){this.innerHTML=""}function X(){this.nextSibling&&this.parentNode.appendChild(this)}function K(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(e){var t=R(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===B&&t.documentElement.namespaceURI===B?t.createElement(e):t.createElementNS(n,e)}})(t)}function Q(){return null}function Z(){var e=this.parentNode;e&&e.removeChild(this)}function ee(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function et(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function en(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)(n=t[i],e.type&&n.type!==e.type||n.name!==e.name)?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function ei(e,t,n){return function(){var i,r=this.__on,o=function(e){t.call(this,e,this.__data__)};if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function er(e,t,n){var i=H(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}q.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eo=[null];function ea(e,t){this._groups=e,this._parents=t}function es(){return new ea([[document.documentElement]],eo)}function el(e){return"string"==typeof e?new ea([[document.querySelector(e)]],[document.documentElement]):new ea([[e]],eo)}function ec(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.blob()}function eu(e,t){return fetch(e,t).then(ec)}function ed(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.arrayBuffer()}function eh(e,t){return fetch(e,t).then(ed)}ea.prototype=es.prototype={constructor:ea,select:function(e){"function"!=typeof e&&(e=w(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a,s=t[r],l=s.length,c=i[r]=Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new ea(i,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){return x(t.apply(this,arguments))}}else e=C(e);for(var n=this._groups,i=n.length,r=[],o=[],a=0;a<i;++a)for(var s,l=n[a],c=l.length,u=0;u<c;++u)(s=l[u])&&(r.push(e.call(s,s.__data__,u,l)),o.push(s));return new ea(r,o)},selectChild:function(e){var t;return this.select(null==e?T:(t="function"==typeof e?e:k(e),function(){return L.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?E:(t="function"==typeof e?e:k(e),function(){return M.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=S(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new ea(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,N);var n=t?D:I,i=this._parents,r=this._groups;"function"!=typeof e&&(v=e,e=function(){return v});for(var o=r.length,a=Array(o),s=Array(o),l=Array(o),c=0;c<o;++c){var u=i[c],d=r[c],h=d.length,f="object"==typeof(y=e.call(u,u&&u.__data__,c,i))&&"length"in y?y:Array.from(y),p=f.length,m=s[c]=Array(p),g=a[c]=Array(p);n(u,d,m,g,l[c]=Array(h),f,t);for(var y,v,b,w,x=0,A=0;x<p;++x)if(b=m[x]){for(x>=A&&(A=x+1);!(w=g[A])&&++A<p;);b._next=w||null}}return(a=new ea(a,i))._enter=s,a._exit=l,a},enter:function(){return new ea(this._enter||this._groups.map($),this._parents)},exit:function(){return new ea(this._exit||this._groups.map($),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=Array(r),l=0;l<a;++l)for(var c,u=n[l],d=i[l],h=u.length,f=s[l]=Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<r;++l)s[l]=n[l];return new ea(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=F);for(var n=this._groups,i=n.length,r=Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,c=r[o]=Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new ea(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],a=0,s=o.length;a<s;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this},attr:function(e,t){var n=R(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):W(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=G(e+"");if(arguments.length<2){for(var i=j(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?z:V)(this,e)}}:t?function(e){return function(){z(this,e)}}:function(e){return function(){V(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?U:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(X)},lower:function(){return this.each(K)},append:function(e){var t="function"==typeof e?e:J(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:J(e),i=null==t?Q:"function"==typeof t?t:w(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Z)},clone:function(e){return this.select(e?et:ee)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value}return}for(i=0,s=t?ei:en;i<a;++i)this.each(s(o[i],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return er(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return er(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};var ef={},ep={};function em(e){return Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function eg(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var i in e)i in t||n.push(t[i]=i)}),n}function ey(e,t){var n=e+"",i=n.length;return i<t?Array(t-i+1).join(0)+n:n}function ev(e){var t=RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function i(e,t){var i,r=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return ep;if(c)return c=!1,ef;var t,i,r=a;if(34===e.charCodeAt(r)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(i=e.charCodeAt(a++))?c=!0:13===i&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(r+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(i=e.charCodeAt(t=a++)))c=!0;else if(13===i)c=!0,10===e.charCodeAt(a)&&++a;else if(i!==n)continue;return e.slice(r,t)}return l=!0,e.slice(r,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(i=u())!==ep;){for(var d=[];i!==ef&&i!==ep;)d.push(i),i=u();t&&null==(d=t(d,s++))||r.push(d)}return r}function r(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){var n,i,r,o,a,s;return null==e?"":e instanceof Date?(i=(n=e).getUTCHours(),r=n.getUTCMinutes(),o=n.getUTCSeconds(),a=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((s=n.getUTCFullYear())<0?"-"+ey(-s,6):s>9999?"+"+ey(s,6):ey(s,4))+"-"+ey(n.getUTCMonth()+1,2)+"-"+ey(n.getUTCDate(),2)+(a?"T"+ey(i,2)+":"+ey(r,2)+":"+ey(o,2)+"."+ey(a,3)+"Z":o?"T"+ey(i,2)+":"+ey(r,2)+":"+ey(o,2)+"Z":r||i?"T"+ey(i,2)+":"+ey(r,2)+"Z":"")):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,o=i(e,function(e,i){var o;if(n)return n(e,i-1);r=e,n=t?(o=em(e),function(n,i){return t(o(n),i,e)}):em(e)});return o.columns=r||[],o},parseRows:i,format:function(t,n){return null==n&&(n=eg(t)),[n.map(a).join(e)].concat(r(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=eg(e)),r(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var eb=ev(","),ew=eb.parse;eb.parseRows,eb.format,eb.formatBody,eb.formatRows,eb.formatRow,eb.formatValue;var ex=ev("	"),eA=ex.parse;function eC(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.text()}function e_(e,t){return fetch(e,t).then(eC)}function eS(e){return function(t,n,i){return 2==arguments.length&&"function"==typeof n&&(i=n,n=void 0),e_(t,n).then(function(t){return e(t,i)})}}function ek(e,t,n,i){3==arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=ev(e);return e_(t,n).then(function(e){return r.parse(e,i)})}ex.parseRows,ex.format,ex.formatBody,ex.formatRows,ex.formatRow,ex.formatValue;var eL=eS(ew),eT=eS(eA);function eM(e,t){return new Promise(function(n,i){var r=new Image;for(var o in t)r[o]=t[o];r.onerror=i,r.onload=function(){n(r)},r.src=e})}function eE(e){if(!e.ok)throw Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function e$(e,t){return fetch(e,t).then(eE)}function eP(e){return(t,n)=>e_(t,n).then(t=>(new DOMParser).parseFromString(t,e))}let eI=eP("application/xml");var eD=eP("text/html"),eN=eP("image/svg+xml"),eF={value:()=>{}};function eB(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new eO(i)}function eO(e){this._=e}function eR(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=eF,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}eO.prototype=eB.prototype={constructor:eO,on:function(e,t){var n,i=this._,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(e=r[o]).type)&&(n=function(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}(i[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<a;)if(n=(e=r[o]).type)i[n]=eR(i[n],e.name,t);else if(null==t)for(n in i)i[n]=eR(i[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new eO(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],o=0,n=i.length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};let eH={capture:!0,passive:!1};function eW(e){e.preventDefault(),e.stopImmediatePropagation()}function eG(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ej(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function eq(){}var ez="\\s*([+-]?\\d+)\\s*",eV="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eY=/^#([0-9a-f]{3,8})$/,eX=RegExp(`^rgb\\(${ez},${ez},${ez}\\)$`),eK=RegExp(`^rgb\\(${eU},${eU},${eU}\\)$`),eJ=RegExp(`^rgba\\(${ez},${ez},${ez},${eV}\\)$`),eQ=RegExp(`^rgba\\(${eU},${eU},${eU},${eV}\\)$`),eZ=RegExp(`^hsl\\(${eV},${eU},${eU}\\)$`),e0=RegExp(`^hsla\\(${eV},${eU},${eU},${eV}\\)$`),e1={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function e2(){return this.rgb().formatHex()}function e5(){return this.rgb().formatRgb()}function e3(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eY.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e8(t):3===n?new e9(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e4(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eX.exec(e))?new e9(t[1],t[2],t[3],1):(t=eK.exec(e))?new e9(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eJ.exec(e))?e4(t[1],t[2],t[3],t[4]):(t=eQ.exec(e))?e4(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eZ.exec(e))?tr(t[1],t[2]/100,t[3]/100,1):(t=e0.exec(e))?tr(t[1],t[2]/100,t[3]/100,t[4]):e1.hasOwnProperty(e)?e8(e1[e]):"transparent"===e?new e9(NaN,NaN,NaN,0):null}function e8(e){return new e9(e>>16&255,e>>8&255,255&e,1)}function e4(e,t,n,i){return i<=0&&(e=t=n=NaN),new e9(e,t,n,i)}function e6(e,t,n,i){var r;return 1==arguments.length?((r=e)instanceof eq||(r=e3(r)),r)?new e9((r=r.rgb()).r,r.g,r.b,r.opacity):new e9:new e9(e,t,n,null==i?1:i)}function e9(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function e7(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function te(){let e=tt(this.opacity);return`${1===e?"rgb(":"rgba("}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${1===e?")":`, ${e})`}`}function tt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ti(e){return((e=tn(e))<16?"0":"")+e.toString(16)}function tr(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ta(e,t,n,i)}function to(e){if(e instanceof ta)return new ta(e.h,e.s,e.l,e.opacity);if(e instanceof eq||(e=e3(e)),!e)return new ta;if(e instanceof ta)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(n-i)/s+(n<i)*6:n===o?(i-t)/s+2:(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new ta(a,s,l,e.opacity)}function ta(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function ts(e){return(e=(e||0)%360)<0?e+360:e}function tl(e){return Math.max(0,Math.min(1,e||0))}function tc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tu(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}eG(eq,e3,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:e2,formatHex:e2,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return to(this).formatHsl()},formatRgb:e5,toString:e5}),eG(e9,e6,ej(eq,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e9(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new e9(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new e9(tn(this.r),tn(this.g),tn(this.b),tt(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:e7,formatHex:e7,formatHex8:function(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:te,toString:te})),eG(ta,function(e,t,n,i){return 1==arguments.length?to(e):new ta(e,t,n,null==i?1:i)},ej(eq,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ta(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new ta(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new e9(tc(e>=240?e-240:e+120,r,i),tc(e,r,i),tc(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ta(ts(this.h),tl(this.s),tl(this.l),tt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=tt(this.opacity);return`${1===e?"hsl(":"hsla("}${ts(this.h)}, ${100*tl(this.s)}%, ${100*tl(this.l)}%${1===e?")":`, ${e})`}`}}));let td=e=>()=>e;function th(e,t){var n,i,r=t-e;return r?(n=e,i=r,function(e){return n+e*i}):td(isNaN(e)?t:e)}let tf=function e(t){var n,i=1==(n=+t)?th:function(e,t){var i,r,o;return t-e?(i=e,r=t,i=Math.pow(i,o=n),r=Math.pow(r,o)-i,o=1/o,function(e){return Math.pow(i+e*r,o)}):td(isNaN(e)?t:e)};function r(e,t){var n=i((e=e6(e)).r,(t=e6(t)).r),r=i(e.g,t.g),o=i(e.b,t.b),a=th(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function tp(e){return function(t){var n,i,r=t.length,o=Array(r),a=Array(r),s=Array(r);for(n=0;n<r;++n)i=e6(t[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}tp(function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return tu((n-i/t)*t,a,r,o,s)}}),tp(function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return tu((n-i/t)*t,r,o,a,s)}});function tm(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var tg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ty=RegExp(tg.source,"g");function tv(e,t){var n,i,r,o,a,s=tg.lastIndex=ty.lastIndex=0,l=-1,c=[],u=[];for(e+="",t+="";(r=tg.exec(e))&&(o=ty.exec(t));)(a=o.index)>s&&(a=t.slice(s,a),c[l]?c[l]+=a:c[++l]=a),(r=r[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,u.push({i:l,x:tm(r,o)})),s=ty.lastIndex;return s<t.length&&(a=t.slice(s),c[l]?c[l]+=a:c[++l]=a),c.length<2?u[0]?(n=u[0].x,function(e){return n(e)+""}):(i=t,function(){return i}):(t=u.length,function(e){for(var n,i=0;i<t;++i)c[(n=u[i]).i]=n.x(e);return c.join("")})}function tb(e,t){var n,i,r=typeof t;return null==t||"boolean"===r?td(t):("number"===r?tm:"string"===r?(i=e3(t))?(t=i,tf):tv:t instanceof e3?tf:t instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(i){return n.setTime(e*(1-i)+t*i),n}}:!ArrayBuffer.isView(n=t)||n instanceof DataView?Array.isArray(t)?function(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,o=Array(r),a=Array(i);for(n=0;n<r;++n)o[n]=tb(e[n],t[n]);for(;n<i;++n)a[n]=t[n];return function(e){for(n=0;n<r;++n)a[n]=o[n](e);return a}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,i={},r={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?i[n]=tb(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}}:tm:function(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,r=t.slice();return function(o){for(n=0;n<i;++n)r[n]=e[n]*(1-o)+t[n]*o;return r}})(e,t)}function tw(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var tx,tA,tC=0,t_=0,tS=0,tk=0,tL=0,tT=0,tM="object"==typeof performance&&performance.now?performance:Date,tE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function t$(){return tL||(tE(tP),tL=tM.now()+tT)}function tP(){tL=0}function tI(){this._call=this._time=this._next=null}function tD(e,t,n){var i=new tI;return i.restart(e,t,n),i}function tN(){tL=(tk=tM.now())+tT,tC=t_=0;try{t$(),++tC;for(var e,t=tx;t;)(e=tL-t._time)>=0&&t._call.call(void 0,e),t=t._next;--tC}finally{tC=0,function(){for(var e,t,n=tx,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:tx=t);tA=e,tB(i)}(),tL=0}}function tF(){var e=tM.now(),t=e-tk;t>1e3&&(tT-=t,tk=e)}function tB(e){!tC&&(t_&&(t_=clearTimeout(t_)),e-tL>24?(e<1/0&&(t_=setTimeout(tN,e-tM.now()-tT)),tS&&(tS=clearInterval(tS))):(tS||(tk=tM.now(),tS=setInterval(tF,1e3)),tC=1,tE(tN)))}function tO(e,t,n){var i=new tI;return t=null==t?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,n),i}tI.prototype=tD.prototype={constructor:tI,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?t$():+n)+(null==t?0:+t),this._next||tA===this||(tA?tA._next=this:tx=this,tA=this),this._call=e,this._time=n,tB()},stop:function(){this._call&&(this._call=null,this._time=1/0,tB())}};var tR=eB("start","end","cancel","interrupt"),tH=[];function tW(e,t,n,i,r,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(l){var c,u,d,h;if(1!==n.state)return s();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return tO(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(tO(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(c=0,n.state=3,i=Array(d=n.tween.length),u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=tD(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:tR,tween:tH,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function tG(e,t){var n=tq(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function tj(e,t){var n=tq(e,t);if(n.state>3)throw Error("too late; already running");return n}function tq(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function tz(e,t){var n,i,r,o=e.__transition,a=!0;if(o){for(r in t=null==t?null:t+"",o){if((n=o[r]).name!==t){a=!1;continue}i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]}a&&delete e.__transition}}var tV=180/Math.PI,tU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tY(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*tV,skewX:Math.atan(l)*tV,scaleX:a,scaleY:s}}function tX(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,a){var s,l,c,u,d=[],h=[];return o=e(o),a=e(a),!function(e,i,r,o,a,s){if(e!==r||i!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:tm(e,r)},{i:l-2,x:tm(i,o)})}else(r||o)&&a.push("translate("+r+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,d,h),s=o.rotate,l=a.rotate,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:tm(s,l)})):l&&d.push(r(d)+"rotate("+l+i),c=o.skewX,u=a.skewX,c!==u?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:tm(c,u)}):u&&d.push(r(d)+"skewX("+u+i),!function(e,t,n,i,o,a){if(e!==n||t!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:tm(e,n)},{i:s-2,x:tm(t,i)})}else(1!==n||1!==i)&&o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,d,h),o=a=null,function(e){for(var t,n=-1,i=h.length;++n<i;)d[(t=h[n]).i]=t.x(e);return d.join("")}}}var tK=tX(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tU:tY(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),tJ=tX(function(e){return null==e?tU:(i||(i=document.createElementNS("http://www.w3.org/2000/svg","g")),i.setAttribute("transform",e),e=i.transform.baseVal.consolidate())?tY((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):tU},", ",")",")");function tQ(e,t,n){var i=e._id;return e.each(function(){var e=tj(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return tq(e,i).value[t]}}function tZ(e,t){var n;return("number"==typeof t?tm:t instanceof e3?tf:(n=e3(t))?(t=n,tf):tv)(e,t)}var t0=es.prototype.constructor;function t1(e){return function(){this.style.removeProperty(e)}}var t2=0;function t5(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}var t3=es.prototype;t5.prototype=(function(e){return es().transition(e)}).prototype={constructor:t5,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=w(e));for(var i=this._groups,r=i.length,o=Array(r),a=0;a<r;++a)for(var s,l,c=i[a],u=c.length,d=o[a]=Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,tW(d[h],t,n,h,d,tq(s,n)));return new t5(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=C(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=tq(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&tW(h,t,n,m,f,p);o.push(f),a.push(l)}return new t5(o,a,t,n)},selectChild:t3.selectChild,selectChildren:t3.selectChildren,filter:function(e){"function"!=typeof e&&(e=S(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new t5(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=Array(i),s=0;s<o;++s)for(var l,c=t[s],u=n[s],d=c.length,h=a[s]=Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<i;++s)a[s]=t[s];return new t5(a,this._parents,this._name,this._id)},selection:function(){return new t0(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++t2,i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=tq(a,t);tW(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new t5(i,this._parents,e,n)},call:t3.call,nodes:t3.nodes,node:t3.node,size:t3.size,empty:t3.empty,each:t3.each,on:function(e,t){var n,i,r,o,a,s,l=this._id;return arguments.length<2?tq(this.node(),l).on.on(e):this.each((n=l,i=e,r=t,s=(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?tG:tj,function(){var e=s(this,n),t=e.on;t!==o&&(a=(o=t).copy()).on(i,r),e.on=a}))},attr:function(e,t){var n=R(e),i="transform"===n?tJ:tZ;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l))}}:function(e,t,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l))}})(n,i,tQ(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?r:r=t(i=a,n)}}:function(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===i?r:r=t(i=a,n)}})(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var i=R(e);return this.tween(n,(i.local?function(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t){this.setAttributeNS(e.space,e.local,r.call(this,t))}),n}return r._value=t,r}:function(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t){this.setAttribute(e,r.call(this,t))}),n}return r._value=t,r})(i,t))},style:function(e,t,n){var i,r,o,a,s,l,c,u,d,h,f,p,m,g,y,v,b,w,x,A,C,S="transform"==(e+="")?tK:tZ;return null==t?this.styleTween(e,(i=e,function(){var e=W(this,i),t=(this.style.removeProperty(i),W(this,i));return e===t?null:e===r&&t===o?a:a=S(r=e,o=t)})).on("end.style."+e,t1(e)):"function"==typeof t?this.styleTween(e,(s=e,l=tQ(this,"style."+e,t),function(){var e=W(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=W(this,s)),e===n?null:e===c&&n===u?d:(u=n,d=S(c=e,t))})).each((h=this._id,b="end."+(v="style."+(f=e)),function(){var e=tj(this,h),t=e.on,n=null==e.value[v]?y||(y=t1(f)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(b,g=n),e.on=m})):this.styleTween(e,(w=e,C=t+"",function(){var e=W(this,w);return e===C?null:e===x?A:A=S(x=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw Error();return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t){this.style.setProperty(e,o.call(this,t),n)}),i}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=tQ(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){this.textContent=i.call(this,e)}),t}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=tq(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?function(e,t){var n,i;return function(){var r=tj(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}}r.tween=i}}:function(e,t,n){var i,r;if("function"!=typeof n)throw Error();return function(){var o=tj(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}o.tween=r}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){tG(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){tG(this,e).delay=t}})(t,e)):tq(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){tj(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){tj(this,e).duration=t}})(t,e)):tq(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){tj(this,e).ease=t}}(t,e)):tq(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();tj(this,t).ease=n}))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0==--r&&o()}};n.each(function(){var n=tj(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===r&&o()})},[Symbol.iterator]:t3[Symbol.iterator]};var t8={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};es.prototype.interrupt=function(e){return this.each(function(){tz(this,e)})},es.prototype.transition=function(e){var t,n;e instanceof t5?(t=e._id,e=e._name):(t=++t2,(n=t8).time=t$(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&tW(a,e,t,c,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(a,t));return new t5(i,this._parents,e,t)};let t4=e=>()=>e;function t6(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function t9(e){e.preventDefault(),e.stopImmediatePropagation()}var t7={name:"drag"},ne={name:"space"},nt={name:"handle"},nn={name:"center"};let{abs:ni,max:nr,min:no}=Math;function na(e){return[+e[0],+e[1]]}function ns(e){return[na(e[0]),na(e[1])]}var nl={name:"x",handles:["w","e"].map(ng),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},nc={name:"y",handles:["n","s"].map(ng),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nu={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ng),input:function(e){return null==e?null:ns(e)},output:function(e){return e}},nd={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nh={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},nf={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},np={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},nm={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ng(e){return{type:e}}function ny(e){return!e.ctrlKey&&!e.button}function nv(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function nb(){return navigator.maxTouchPoints||"ontouchstart"in this}function nw(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function nx(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function nA(){return nS(nl)}function nC(){return nS(nc)}function n_(){return nS(nu)}function nS(e){var t,n=nv,i=ny,r=nb,o=!0,a=eB("start","brush","end"),s=6;function l(t){var n=t.property("__brush",m).selectAll(".overlay").data([ng("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",nd.overlay).merge(n).each(function(){var e=nw(this).extent;el(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([ng("selection")]).enter().append("rect").attr("class","selection").attr("cursor",nd.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(e){return e.type});i.exit().remove(),i.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return nd[e.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=el(this),t=nw(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var i=e.__brush.emitter;return!i||n&&i.clean?new d(e,t,n):i}function d(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function h(n){if((!t||n.touches)&&i.apply(this,arguments)){var r,a,s,l,d,h,f,p,m,g,y,v=this,b=n.target.__data__.type,w=(o&&n.metaKey?b="overlay":b)==="selection"?t7:o&&n.altKey?nn:nt,x=e===nc?null:np[b],A=e===nl?null:nm[b],C=nw(v),S=C.extent,k=C.selection,L=S[0][0],T=S[0][1],M=S[1][0],E=S[1][1],$=0,P=0,I=x&&A&&o&&n.shiftKey,D=Array.from(n.touches||[n],e=>{let t=e.identifier;return(e=tw(e,v)).point0=e.slice(),e.identifier=t,e});tz(v);var N=u(v,arguments,!0).beforestart();if("overlay"===b){k&&(m=!0);let t=[D[0],D[1]||D[0]];C.selection=k=[[r=e===nc?L:no(t[0][0],t[1][0]),s=e===nl?T:no(t[0][1],t[1][1])],[d=e===nc?M:nr(t[0][0],t[1][0]),f=e===nl?E:nr(t[0][1],t[1][1])]],D.length>1&&j(n)}else r=k[0][0],s=k[0][1],d=k[1][0],f=k[1][1];a=r,l=s,h=d,p=f;var F=el(v).attr("pointer-events","none"),B=F.selectAll(".overlay").attr("cursor",nd[b]);if(n.touches)N.moved=G,N.ended=q;else{var O,R,H,W=el(n.view).on("mousemove.brush",G,!0).on("mouseup.brush",q,!0);o&&W.on("keydown.brush",function(e){switch(e.keyCode){case 16:I=x&&A;break;case 18:w===nt&&(x&&(d=h-$*x,r=a+$*x),A&&(f=p-P*A,s=l+P*A),w=nn,j(e));break;case 32:(w===nt||w===nn)&&(x<0?d=h-$:x>0&&(r=a-$),A<0?f=p-P:A>0&&(s=l-P),w=ne,B.attr("cursor",nd.selection),j(e));break;default:return}t9(e)},!0).on("keyup.brush",function(e){switch(e.keyCode){case 16:I&&(g=y=I=!1,j(e));break;case 18:w===nn&&(x<0?d=h:x>0&&(r=a),A<0?f=p:A>0&&(s=l),w=nt,j(e));break;case 32:w===ne&&(e.altKey?(x&&(d=h-$*x,r=a+$*x),A&&(f=p-P*A,s=l+P*A),w=nn):(x<0?d=h:x>0&&(r=a),A<0?f=p:A>0&&(s=l),w=nt),B.attr("cursor",nd[b]),j(e));break;default:return}t9(e)},!0),R=(O=n.view).document.documentElement,H=el(O).on("dragstart.drag",eW,eH),"onselectstart"in R?H.on("selectstart.drag",eW,eH):(R.__noselect=R.style.MozUserSelect,R.style.MozUserSelect="none")}c.call(v),N.start(n,w.name)}function G(e){for(let t of e.changedTouches||[e])for(let e of D)e.identifier===t.identifier&&(e.cur=tw(t,v));if(I&&!g&&!y&&1===D.length){let e=D[0];ni(e.cur[0]-e[0])>ni(e.cur[1]-e[1])?y=!0:g=!0}for(let e of D)e.cur&&(e[0]=e.cur[0],e[1]=e.cur[1]);m=!0,t9(e),j(e)}function j(e){var t;let n=D[0],i=n.point0;switch($=n[0]-i[0],P=n[1]-i[1],w){case ne:case t7:x&&($=nr(L-r,no(M-d,$)),a=r+$,h=d+$),A&&(P=nr(T-s,no(E-f,P)),l=s+P,p=f+P);break;case nt:D[1]?(x&&(a=nr(L,no(M,D[0][0])),h=nr(L,no(M,D[1][0])),x=1),A&&(l=nr(T,no(E,D[0][1])),p=nr(T,no(E,D[1][1])),A=1)):(x<0?($=nr(L-r,no(M-r,$)),a=r+$,h=d):x>0&&($=nr(L-d,no(M-d,$)),a=r,h=d+$),A<0?(P=nr(T-s,no(E-s,P)),l=s+P,p=f):A>0&&(P=nr(T-f,no(E-f,P)),l=s,p=f+P));break;case nn:x&&(a=nr(L,no(M,r-$*x)),h=nr(L,no(M,d+$*x))),A&&(l=nr(T,no(E,s-P*A)),p=nr(T,no(E,f+P*A)))}h<a&&(x*=-1,t=r,r=d,d=t,t=a,a=h,h=t,b in nh&&B.attr("cursor",nd[b=nh[b]])),p<l&&(A*=-1,t=s,s=f,f=t,t=l,l=p,p=t,b in nf&&B.attr("cursor",nd[b=nf[b]])),C.selection&&(k=C.selection),g&&(a=k[0][0],h=k[1][0]),y&&(l=k[0][1],p=k[1][1]),(k[0][0]!==a||k[0][1]!==l||k[1][0]!==h||k[1][1]!==p)&&(C.selection=[[a,l],[h,p]],c.call(v),N.brush(e,w.name))}function q(e){var n,i,r,o,a;if(e.stopImmediatePropagation(),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500)}else n=e.view,i=m,r=n.document.documentElement,o=el(n).on("dragstart.drag",null),i&&(o.on("click.drag",eW,eH),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),W.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),B.attr("cursor",nd.overlay),C.selection&&(k=C.selection),((a=k)[0][0]===a[1][0]||a[0][1]===a[1][1])&&(C.selection=null,c.call(v)),N.end(e,w.name)}}function f(e){u(this,arguments).moved(e)}function p(e){u(this,arguments).ended(e)}function m(){var t=this.__brush||{selection:null};return t.extent=ns(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n,i){t.tween?t.on("start.brush",function(e){u(this,arguments).beforestart().start(e)}).on("interrupt.brush end.brush",function(e){u(this,arguments).end(e)}).tween("brush",function(){var t=this,i=t.__brush,r=u(t,arguments),o=i.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=tb(o,a);function l(e){i.selection=1===e&&null===a?null:s(e),c.call(t),r.brush()}return null!==o&&null!==a?l:l(1)}):t.each(function(){var t=arguments,r=this.__brush,o=e.input("function"==typeof n?n.apply(this,t):n,r.extent),a=u(this,t).beforestart();tz(this),r.selection=null===o?null:o,c.call(this),a.start(i).brush(i).end(i)})},l.clear=function(e,t){l.move(e,null,t)},d.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0==--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,i){var r=el(this.that).datum();a.call(t,this.that,new t6(t,{sourceEvent:n,target:l,selection:e.output(this.state.selection),mode:i,dispatch:a}),r)}},l.extent=function(e){return arguments.length?(n="function"==typeof e?e:t4(ns(e)),l):n},l.filter=function(e){return arguments.length?(i="function"==typeof e?e:t4(!!e),l):i},l.touchable=function(e){return arguments.length?(r="function"==typeof e?e:t4(!!e),l):r},l.handleSize=function(e){return arguments.length?(s=+e,l):s},l.keyModifiers=function(e){return arguments.length?(o=!!e,l):o},l.on=function(){var e=a.on.apply(a,arguments);return e===a?l:e},l}var nk={value:()=>{}};function nL(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new nT(i)}function nT(e){this._=e}function nM(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=nk,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}nT.prototype=nL.prototype={constructor:nT,on:function(e,t){var n,i=this._,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(e=r[o]).type)&&(n=function(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}(i[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<a;)if(n=(e=r[o]).type)i[n]=nM(i[n],e.name,t);else if(null==t)for(n in i)i[n]=nM(i[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nT(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],o=0,n=i.length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};let nE=nL;function n$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function nP(e){return(e=n$(Math.abs(e)))?e[1]:NaN}var nI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nD(e){var t;if(!(t=nI.exec(e)))throw Error("invalid format: "+e);return new nN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function nN(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function nF(e,t){var n=n$(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+Array(r-i.length+2).join("0")}nD.prototype=nN.prototype,nN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let nB={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>nF(100*e,t),r:nF,s:function(e,t){var n=n$(e,t);if(!n)return e+"";var i=n[0],o=n[1],a=o-(r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+Array(1-a).join("0")+n$(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nO(e){return e}var nR=Array.prototype.map,nH=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function nW(e){var t,n,i,o=void 0===e.grouping||void 0===e.thousands?nO:(t=nR.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?nO:(i=nR.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return i[+e]})}),u=void 0===e.percent?"%":e.percent+"",d=void 0===e.minus?"":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=nD(e)).fill,n=e.align,i=e.sign,f=e.symbol,p=e.zero,m=e.width,g=e.comma,y=e.precision,v=e.trim,b=e.type;"n"===b?(g=!0,b="g"):nB[b]||(void 0===y&&(y=12),v=!0,b="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var w="$"===f?a:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===f?s:/[%p]/.test(b)?u:"",A=nB[b],C=/[defgprs%]/.test(b);function S(e){var a,s,u,f=w,S=x;if("c"===b)S=A(e)+S,e="";else{var k=(e*=1)<0||1/e<0;if(e=isNaN(e)?h:A(Math.abs(e),y),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),k&&0==+e&&"+"!==i&&(k=!1),f=(k?"("===i?i:d:"-"===i||"("===i?"":i)+f,S=("s"===b?nH[8+r/3]:"")+S+(k&&"("===i?")":""),C){for(a=-1,s=e.length;++a<s;)if(48>(u=e.charCodeAt(a))||u>57){S=(46===u?l+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}}g&&!p&&(e=o(e,1/0));var L=f.length+e.length+S.length,T=L<m?Array(m-L+1).join(t):"";switch(g&&p&&(e=o(T+e,T.length?m-S.length:1/0),T=""),n){case"<":e=f+e+S+T;break;case"=":e=f+T+e+S;break;case"^":e=T.slice(0,L=T.length>>1)+f+e+S+T.slice(L);break;default:e=T+f+e+S}return c(e)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return e+""},S}return{format:f,formatPrefix:function(e,t){var n=f(((e=nD(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(nP(t)/3))),r=Math.pow(10,-i),o=nH[8+i/3];return function(e){return n(r*e)+o}}}}function nG(e){return a=(o=nW(e)).format,s=o.formatPrefix,o}function nj(e){return Math.max(0,-nP(Math.abs(e)))}function nq(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nP(t)/3)))-nP(Math.abs(e)))}function nz(e,t){return Math.max(0,nP(t=Math.abs(t)-(e=Math.abs(e)))-nP(e))+1}nG({thousands:",",grouping:[3],currency:["$",""]});let nV=Math.sqrt(50),nU=Math.sqrt(10),nY=Math.sqrt(2);function nX(e,t,n){let i,r,o,a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),l=a/Math.pow(10,s),c=l>=nV?10:l>=nU?5:l>=nY?2:1;return(s<0?(i=Math.round(e*(o=Math.pow(10,-s)/c)),r=Math.round(t*o),i/o<e&&++i,r/o>t&&--r,o=-o):(i=Math.round(e/(o=Math.pow(10,s)*c)),r=Math.round(t/o),i*o<e&&++i,r*o>t&&--r),r<i&&.5<=n&&n<2)?nX(e,t,2*n):[i,r,o]}function nK(e,t,n){return nX(e*=1,t*=1,n*=1)[2]}function nJ(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nQ(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nZ(e){let t,n,i;function r(e,i,o=0,a=e.length){if(o<a){if(0!==t(i,i))return a;do{let t=o+a>>>1;0>n(e[t],i)?o=t+1:a=t}while(o<a)}return o}return 2!==e.length?(t=nJ,n=(t,n)=>nJ(e(t),n),i=(t,n)=>e(t)-n):(t=e===nJ||e===nQ?e:n0,n=e,i=e),{left:r,center:function(e,t,n=0,o=e.length){let a=r(e,t,n,o-1);return a>n&&i(e[a-1],t)>-i(e[a],t)?a-1:a},right:function(e,i,r=0,o=e.length){if(r<o){if(0!==t(i,i))return o;do{let t=r+o>>>1;0>=n(e[t],i)?r=t+1:o=t}while(r<o)}return r}}}function n0(){return 0}let n1=nZ(nJ),n2=n1.right;function n5(e,t){return e*=1,t*=1,function(n){return Math.round(e*(1-n)+t*n)}}function n3(e){return+e}n1.left,nZ(function(e){return null===e?NaN:+e}).center;var n8=[0,1];function n4(e){return e}function n6(e,t){var n;return(t-=e*=1)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n})}function n9(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=n6(r,i),o=n(a,o)):(i=n6(i,r),o=n(o,a)),function(e){return o(i(e))}}function n7(e,t,n){var i=Math.min(e.length,t.length)-1,r=Array(i),o=Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=n6(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=n2(e,t,1,i)-1;return o[n](r[n](t))}}function ie(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var it=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(e){var t;if(!(t=it.exec(e)))throw Error("invalid format: "+e);return new ir({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ir(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function io(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ia(e){return(e=io(Math.abs(e)))?e[1]:NaN}function is(e,t){var n=io(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+Array(r-i.length+2).join("0")}ii.prototype=ir.prototype,ir.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let il={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>is(100*e,t),r:is,s:function(e,t){var n=io(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(l=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+Array(1-o).join("0")+io(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ic(e){return e}var iu=Array.prototype.map,id=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];u=(c=function(e){var t,n,i,r=void 0===e.grouping||void 0===e.thousands?ic:(t=iu.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],a=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?ic:(i=iu.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return i[+e]})}),u=void 0===e.percent?"%":e.percent+"",d=void 0===e.minus?"":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=ii(e)).fill,n=e.align,i=e.sign,f=e.symbol,p=e.zero,m=e.width,g=e.comma,y=e.precision,v=e.trim,b=e.type;"n"===b?(g=!0,b="g"):il[b]||(void 0===y&&(y=12),v=!0,b="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var w="$"===f?o:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",x="$"===f?a:/[%p]/.test(b)?u:"",A=il[b],C=/[defgprs%]/.test(b);function S(e){var o,a,u,f=w,S=x;if("c"===b)S=A(e)+S,e="";else{var k=(e*=1)<0||1/e<0;if(e=isNaN(e)?h:A(Math.abs(e),y),v&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),k&&0==+e&&"+"!==i&&(k=!1),f=(k?"("===i?i:d:"-"===i||"("===i?"":i)+f,S=("s"===b?id[8+l/3]:"")+S+(k&&"("===i?")":""),C){for(o=-1,a=e.length;++o<a;)if(48>(u=e.charCodeAt(o))||u>57){S=(46===u?s+e.slice(o+1):e.slice(o))+S,e=e.slice(0,o);break}}}g&&!p&&(e=r(e,1/0));var L=f.length+e.length+S.length,T=L<m?Array(m-L+1).join(t):"";switch(g&&p&&(e=r(T+e,T.length?m-S.length:1/0),T=""),n){case"<":e=f+e+S+T;break;case"=":e=f+T+e+S;break;case"^":e=T.slice(0,L=T.length>>1)+f+e+S+T.slice(L);break;default:e=T+f+e+S}return c(e)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return e+""},S}return{format:f,formatPrefix:function(e,t){var n=f(((e=ii(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(ia(t)/3))),r=Math.pow(10,-i),o=id[8+i/3];return function(e){return n(r*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,d=c.formatPrefix;var ih={9606:{commonName:"Human",scientificName:"Homo sapiens",assemblies:{default:"GCF_000001405.26",GRCh38:"GCF_000001405.26",GRCh37:"GCF_000001405.13",NCBI36:"GCF_000001405.12"},hasGeneCache:!0,hasParalogCache:!0,hasInteractionCache:!0,hasGeneStructureCache:!0,hasProteinCache:!0,hasSynonymCache:!0,hasTissueCache:!0,hasVariantCache:!0},10090:{commonName:"Mouse",scientificName:"Mus musculus",assemblies:{default:"GCF_000001635.27",GRCm39:"GCF_000001635.27",GRCm38:"GCF_000001635.20",MGSCv37:"GCF_000001635.18"},hasGeneCache:!0,hasParalogCache:!0,hasInteractionCache:!0,hasGeneStructureCache:!0,hasProteinCache:!0,hasSynonymCache:!0},9598:{commonName:"Chimpanzee",scientificName:"Pan troglodytes",assemblies:{default:"GCF_028858775.1","NHGRI_mPanTro3-v1.1-hic.freeze_pri":"GCF_028858775.1","Pan_tro 3.0":"GCF_000001515.7"},hasGeneCache:!0,hasSynonymCache:!0},10116:{commonName:"Rat",scientificName:"Rattus norvegicus",assemblies:{default:"GCF_000001895.5","Rnor_6.0":"GCF_000001895.5"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},3702:{commonName:"Thale cress",scientificName:"Arabidopsis thaliana",assemblies:{default:"GCF_000001735.3",TAIR10:"GCF_000001735.3"}},4530:{commonName:"Rice",scientificName:"Oryza sativa",assemblies:{default:"GCA_001433935.1","IRGSP-1.0":"GCA_001433935.1"}},4577:{commonName:"Maize",scientificName:"Zea mays",assemblies:{default:"GCA_000005005.5","IRGSP-1.0":"GCA_001433935.1"}},4641:{commonName:"Banana",scientificName:"Musa acuminata",assemblies:{default:"mock"}},7227:{commonName:"Fly",scientificName:"Drosophila melanogaster",assemblies:{default:"GCA_000001215.4","Release 6 plus ISO1 MT":"GCA_000001215.4"},hasSynonymCache:!0},7165:{commonName:"Mosquito",scientificName:"Anopheles gambiae",assemblies:{default:"GCF_000005575.2"}},746128:{commonName:"Aspergillis fumigatus",scientificName:"Aspergillis fumigatus",assemblies:{default:"GCF_000002655.1"}},227321:{scientificName:"Aspergillus nidulans",assemblies:{default:"GCF_000149205.2"}},5061:{commonName:"black mold",scientificName:"Aspergillus niger",assemblies:{default:"GCF_003184595.1"}},5062:{commonName:"koji",scientificName:"Aspergillus oryzae",assemblies:{default:"GCF_000184455.2"}},15368:{commonName:"stiff brome",scientificName:"Brachypodium distachyon",assemblies:{default:"GCF_000005505.3"}},60711:{commonName:"green monkey",scientificName:"Chlorocebus sabaeus",assemblies:{default:"GCF_015252025.1"}},7719:{commonName:"Vase tunicate",scientificName:"Ciona intestinalis",assemblies:{default:"GCF_000224145.3"}},9685:{commonName:"Cat",scientificName:"Felis catus",assemblies:{default:"GCF_000181335.3"},hasGeneCache:!0},9031:{commonName:"Chicken",scientificName:"Gallus gallus",assemblies:{default:"GCF_000002315.6"},hasGeneCache:!0,hasParalogCache:!0},9593:{commonName:"Gorilla",scientificName:"Gorilla gorilla",assemblies:{default:"GCF_008122165.1"}},4513:{commonName:"Barley",scientificName:"Hordeum vulgare",assemblies:{default:"GCA_901482405.1"}},9541:{commonName:"Crab-eating macaque",scientificName:"Macaca fascicularis",assemblies:{default:"GCF_000364345.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9544:{commonName:"Rhesus macaque",scientificName:"Macaca mulatta",assemblies:{default:"GCF_003339765.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9597:{commonName:"Bonobo",scientificName:"Pan paniscus",assemblies:{default:"GCF_013052645.1"}},9615:{commonName:"Dog",scientificName:"Canis lupus familiaris",assemblies:{default:"GCF_014441545.1"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},9823:{commonName:"Pig",scientificName:"Sus scrofa",assemblies:{default:"GCF_000003025.6"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},4932:{commonName:"Yeast",scientificName:"Saccharomyces cerevisiae",assemblies:{default:"GCA_000146045.2",R64:"GCA_000146045.2"}},5833:{commonName:"malaria parasite",scientificName:"Plasmodium falciparum",assemblies:{default:"GCA_000002765.3",GCA_000002765:"GCA_000002765.3"}},6239:{commonName:"worm",scientificName:"Caenorhabditis elegans",assemblies:{default:"GCF_000002985.6"},hasGeneCache:!0,hasParalogCache:!0,hasSynonymCache:!0},4081:{commonName:"tomato",scientificName:"Solanum lycopersicum",assemblies:{default:"GCF_000188115.4"}},4072:{commonName:"pepper",scientificName:"Capsicum annuum",assemblies:{default:"GCF_000710875.1"}},3694:{commonName:"black cottonwood",scientificName:"Populus trichocarpa",assemblies:{default:"GCF_000002775.5"}}},ip=Object.assign({},p,m,g,y);function im(){return"assembly"in this.config&&/(GCF_|GCA_)/.test(this.config.assembly)}function ig(e){var t,n,i,r=document.scripts,o=Ideogram.version;if(!1===location.pathname.includes("/examples/vanilla/"))return`https://cdn.jsdelivr.net/npm/ideogram@${o}/dist/data/${e}`;for(var a=0;a<r.length;a++)if(t=r[a],i=/ideogram/.test(t.src.split("/").slice(-1)),"src"in t&&i)return(n=t.src.split("//"))[0]+"//"+(n="/"+n[1].split("/").slice(0,-2).join("/"))+"/data/"+e;return"../data/"+e}function iy(e,t=!1){return fetch(e).then(n=>{if(n.ok)return n;if(!1===t)return iy(e.replace(".json",""),!0);throw Error("Fetch failed for "+e)})}function iv(){return ig("bands/native/")}function ib(e){return Math.round(100*e)/100}function iw(e){call(this.onDidRotateCallback,e)}function ix(){return ip.select(this.selector).node()}function iA(e,t){var n=this.config,i=new Headers;return(n.accessToken&&(i=new Headers({Authorization:"Bearer "+n.accessToken})),"text"===t)?ip.text(e,{headers:i}):ip.json(e,{headers:i})}function iC(e){var t,n,i,r,o=this.organisms;for(n in e=iL(e),o)if(i=iL((t=o[n]).commonName),r=iL(t.scientificName),i===e||r===e)return n;return null}function i_(e){return e in this.organisms?this.organisms[e].commonName:null}function iS(e){return e in this.organisms?this.organisms[e].scientificName:null}function ik(e){return e.split(/[ _-]/g).map((e,t)=>t>0?e[0].toUpperCase()+e.slice(1):e).join("")}function iL(e){return void 0===e?"":e.toLowerCase().replace(/ /g,"-")}function iT(e){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/i.test(e)}function iM(e){var t={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};return e.toUpperCase().split("").reduce(function(e,n,i,r){return t[n]<t[r[i+1]]?e-t[n]:e+t[n]},0)}function iE(e){let t=e.config,n="sans-serif";t.fontFamily&&(n=t.fontFamily);let i=600;return t.fontWeight&&(i=t.fontWeight),i+" "+(t.annotLabelSize?t.annotLabelSize:13)+"px "+n}function i$(e,t){var n=iE(t),i=(i$.canvas||(i$.canvas=document.createElement("canvas"))).getContext("2d");i.font=n;var r=i.measureText(e),o=r.actualBoundingBoxRight;return{width:Math.abs(r.actualBoundingBoxLeft)+Math.abs(o),height:Math.abs(r.actualBoundingBoxAscent)+Math.abs(r.actualBoundingBoxDescent)}}function iP(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return t+t+n+n+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function iI(e){var t=parseInt(e,10).toString(16);return 1===t.length?"0"+t:t}function iD(e,t="#FFF"){if("rgb"===e.slice(0,3)&&(e=function(e){var t,n,i;let r=e.split("rgb(")[1].trim(")").split(", ");return t=r[0],n=r[1],i=r[2],"#"+iI(t)+iI(n)+iI(i)}(e)),"#"!==e[0])return e;let n=iP(e);if("#FFF"===t)n.r>150&&n.g>150&&n.b>150&&(e=`rgb(${n.r-30}, ${n.g-30}, ${n.b-30})`),n.r>200&&n.g>200&&n.b>200&&(e=`rgb(${n.r-50}, ${n.g-50}, ${n.b-50})`);else{var i,r,o,a;let s=iP(t);3>(i=[n.r,n.g,n.b],r=[s.r,s.g,s.b],o=iN(...i),(Math.max(o,a=iN(...r))+.05)/(Math.min(o,a)+.05))&&(e="rgb(230, 230, 230)")}return e}function iN(e,t,n){var i=[e,t,n].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]}function iF(e,t){if("#"!==e[0])return e;let n=iP(e),i={r:n.r*t,g:n.g*t,b:n.b*t};return`rgb(${i.r}, ${i.g}, ${i.b})`}function iB(){return{theme:"light-border",allowHTML:!0,popperOptions:{modifiers:[{name:"flip"}]},onShow:function(){document.querySelectorAll("[data-tippy-root]").forEach(e=>e.remove())}}}ip.select=el,ip.selectAll=function(e){return"string"==typeof e?new ea([document.querySelectorAll(e)],[document.documentElement]):new ea([x(e)],eo)},ip.scaleLinear=function e(){var t,n=(function(){var e,t,n,i,r,o,a=n8,s=n8,l=tb,c=n4;function u(){var e,t,n,l=Math.min(a.length,s.length);return c!==n4&&(e=a[0],t=a[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),i=l>2?n7:n9,r=o=null,d}function d(t){return null==t||isNaN(t*=1)?n:(r||(r=i(a.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=i(s,a.map(e),tm)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,n3),u()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=n5,u()},d.clamp=function(e){return arguments.length?(c=!!e||n4,u()):c!==n4},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,i){return e=n,t=i,u()}})()(n4,n4);return n.copy=function(){return e().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())},ie.apply(n,arguments),t=n.domain,n.ticks=function(e){var n=t();return function(e,t,n){if(t*=1,e*=1,!((n*=1)>0))return[];if(e===t)return[e];let i=t<e,[r,o,a]=i?nX(t,e,n):nX(e,t,n);if(!(o>=r))return[];let s=o-r+1,l=Array(s);if(i)if(a<0)for(let e=0;e<s;++e)l[e]=-((o-e)/a);else for(let e=0;e<s;++e)l[e]=(o-e)*a;else if(a<0)for(let e=0;e<s;++e)l[e]=-((r+e)/a);else for(let e=0;e<s;++e)l[e]=(r+e)*a;return l}(n[0],n[n.length-1],null==e?10:e)},n.tickFormat=function(e,n){var i=t();return function(e,t,n,i){var r,o,a,s=function(e,t,n){t*=1,e*=1,n*=1;let i=t<e,r=i?nK(t,e,n):nK(e,t,n);return(i?-1:1)*(r<0?-(1/r):r)}(e,t,n);switch((i=ii(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ia(l)/3)))-ia(Math.abs(s))))||(i.precision=a),d(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=Math.max(0,ia(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(r=Math.abs(r=s)))-ia(r))+1)||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=Math.max(0,-ia(Math.abs(s))))||(i.precision=a-("%"===i.type)*2)}return u(i)}(i[0],i[i.length-1],null==e?10:e,n)},n.nice=function(e){null==e&&(e=10);var i,r,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(r=l,l=c,c=r,r=a,a=s,s=r);u-- >0;){if((r=nK(l,c,e))===i)return o[a]=l,o[s]=c,t(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else if(r<0)l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r;else break;i=r}return n},n},ip.max=function(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let i=-1;for(let r of e)null!=(r=t(r,++i,e))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n},h=[["gneg","#FFF","#FFF","#DDD"],["gpos25","#C8C8C8","#DDD","#BBB"],["gpos33","#BBB","#BBB","#AAA"],["gpos50","#999","#AAA","#888"],["gpos66","#888","#888","#666"],["gpos75","#777","#777","#444"],["gpos100","#444","#666","#000"],["acen","#FEE","#FEE","#FDD"],["noBands","#BBB","#BBB","#AAA"]];let iO='#_ideogram {padding-left: 5px;} #_ideogram .labeled {padding-left: 15px;} #_ideogram.labeledLeft {padding-left: 15px; padding-top: 15px;} #_ideogram text {font: 9px Tahoma; fill: #000;} #_ideogram .italic {font-style: italic;} #_ideogram .chromosome {cursor: pointer; fill: #AAA;}#_ideogram.no-rotate .chromosome {cursor: default;} #_ideogram .chrLabel, #_ideogram .annot {cursor: pointer;}#_ideogram .chrSetLabel {font-weight: bolder;}#_ideogram .ghost {opacity: 0.2;}#_ideogram .hidden {display: none;}#_ideogram .bandLabelStalk line {stroke: #AAA; stroke-width: 1;}#_ideogram .syntenyBorder {stroke:#AAA;stroke-width:1;}#_ideogram rect.cursor {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .brush .selection {  fill: #F00;  stroke: #F00;  fill-opacity: .3;  shape-rendering: crispEdges;}#_ideogram .noBands {fill: #AAA;}#_ideogram .gneg {fill: #FFF}#_ideogram .gpos25 {fill: #BBB}#_ideogram .gpos33 {fill: #AAA}#_ideogram .gpos50 {fill: #888}#_ideogram .gpos66 {fill: #666}#_ideogram .gpos75 {fill: #444}#_ideogram .gpos100 {fill: #000}#_ideogram .gpos {fill: #000}#_ideogram .acen {fill: #FDD}#_ideogram .stalk {fill: #CCE;}#_ideogram .gvar {fill: #DDF}#_ideogram.faint .gneg {fill: #FFF}#_ideogram.faint .gpos25 {fill: #EEE}#_ideogram.faint .gpos33 {fill: #EEE}#_ideogram.faint .gpos50 {fill: #EEE}#_ideogram.faint .gpos66 {fill: #EEE}#_ideogram.faint .gpos75 {fill: #EEE}#_ideogram.faint .gpos100 {fill: #DDD}#_ideogram.faint .gpos {fill: #DDD}#_ideogram.faint .acen {fill: #FEE}#_ideogram.faint .stalk {fill: #EEF;}#_ideogram.faint .gvar {fill: #EEF}#_ideogram .gneg {fill: url("#gneg")} #_ideogram .gpos25 {fill: url("#gpos25")} #_ideogram .gpos33 {fill: url("#gpos33")} #_ideogram .gpos50 {fill: url("#gpos50")} #_ideogram .gpos66 {fill: url("#gpos66")} #_ideogram .gpos75 {fill: url("#gpos75")} #_ideogram .gpos100 {fill: url("#gpos100")} #_ideogram .gpos {fill: url("#gpos100")} #_ideogram .acen {fill: url("#acen")} #_ideogram .stalk {fill: url("#stalk")} #_ideogram .gvar {fill: url("#gvar")} #_ideogram .noBands {fill: url("#noBands")} #_ideogram .chromosome {fill: url("#noBands")} ';function iR(e){var t,n,i,r,o;this.config=JSON.parse(JSON.stringify(e)),this.chromosomesArray=[],this.coordinateSystem="iscn",this.maxLength={bp:0,iscn:0},this.chromosomes={},this.numChromosomes=0,this.config.debug||(this.config.debug=!1),this.config.dataDir||(this.config.dataDir=this.getDataDir()),this.config.container||(this.config.container="body"),this.selector=this.config.container+" #_ideogram",this.config.resolution||(this.config.resolution=""),this.config.orientation||(this.config.orientation="vertical"),this.config.brush||(this.config.brush=null),this.config.rows||(this.config.rows=1),"showChromosomeLabels"in this.config==!1&&(this.config.showChromosomeLabels=!0),this.config.showNonNuclearChromosomes||(this.config.showNonNuclearChromosomes=!1),this.config.chromosomeScale||(this.config.chromosomeScale="absolute"),this.config.showTools||(this.config.showTools=!1),this.config.ploidy||(this.config.ploidy=1),this.config.ploidy>1&&(this.sexChromosomes={},this.config.sex||(this.config.sex="male"),2!==this.config.ploidy||this.config.ancestors||(this.config.ancestors={M:"#ffb6c1",P:"#add8e6"},this.config.ploidyDesc="MP")),this.config.showBandLabels||(this.config.showBandLabels=!1),"showFullyBanded"in this.config==!1&&(this.config.showFullyBanded=!0),this.bandsToShow=[],this.bandData={},this.config.chrHeight||(t=this.config.container,n=document.querySelector(t).getBoundingClientRect(),i="vertical"===this.config.orientation?n.height:n.width,("body"===t||0===i)&&(i=400),this.config.chrHeight=i),this.config.chrWidth||(r=10,(o=this.config.chrHeight)<900&&o>500?r=Math.round(o/40):o>=900&&(r=Math.round(o/45)),this.config.chrWidth=r),function(e){if(e.config.geometry&&"collinear"===e.config.geometry){"chrMargin"in e.config==!1&&(e.config.chrMargin=0);return}e.config.chrMargin||(1===e.config.ploidy?e.config.chrMargin=10:e.config.chrMargin=Math.round(e.config.chrWidth/4)),e.config.showBandLabels&&(e.config.chrMargin+=20)}(this),e.onLoad&&(this.onLoadCallback=e.onLoad),e.onLoadAnnots&&(this.onLoadAnnotsCallback=e.onLoadAnnots),e.onBeforeDrawAnnots&&(this.onBeforeDrawAnnotsCallback=e.onBeforeDrawAnnots),e.onDrawAnnots&&(this.onDrawAnnotsCallback=e.onDrawAnnots),e.onBrushMove&&(this.onBrushMoveCallback=e.onBrushMove),e.onBrushEnd&&(this.onBrushEndCallback=e.onBrushEnd),e.onCursorMove&&(this.onCursorMoveCallback=e.onCursorMove),e.onDidRotate&&(this.onDidRotateCallback=e.onDidRotate),e.onWillShowAnnotTooltip&&(this.onWillShowAnnotTooltipCallback=e.onWillShowAnnotTooltip),e.onDidShowAnnotTooltip&&(this.onDidShowAnnotTooltipCallback=e.onDidShowAnnotTooltip),e.onClickAnnot&&(this.onClickAnnotCallback=e.onClickAnnot),this.organisms=Object.assign({},ih),e.taxid&&e.organismMetadata&&(this.organisms[e.taxid]=e.organismMetadata),this.organismsWithBands=Object.assign({},this.organisms),this.bump=Math.round(this.config.chrHeight/125),this.adjustedBump=!1,this.config.chrHeight<200&&(this.adjustedBump=!0,this.bump=4),e.chromosome&&(this.config.chromosomes=[e.chromosome],"showBandLabels"in e==!1&&(this.config.showBandLabels=!0),"rotatable"in e==!1&&(this.config.rotatable=!1)),function(e){let t=e.config;t.chrLabelSize||(e.config.chrLabelSize=9),t.chrLabelColor||(e.config.chrLabelColor="#000"),t.fontFamily||(e.config.fontFamily="");let n=`font-size: ${t.chrLabelSize}px`,i=`fill: ${t.chrLabelColor}`,r=`font-family: ${t.fontFamily}`;iO+=`#_ideogram text {${r}; ${n}; ${i};}#_ideogramLabel text {${r};}`}(this),this.initAnnotSettings(),this.config.geometry&&"parallel"!==this.config.geometry||(this.config.chrMargin+=this.config.chrWidth,"heatmap"===this.config.annotationsLayout?this.config.chrMargin+=this.config.annotTracksHeight:this.config.chrMargin+=2*this.config.annotTracksHeight),this.init()}let iH=function(e){var t,n,i,r,o=e.config;if(e.config.annotLabelHeight=12,"demarcateCollinearChromosomes"in e.config==!1&&(e.config.demarcateCollinearChromosomes=!0),n=function(e,t){var n,i,r,o,a,s,l,c={};for(i=0,n=[];i<e.length;i++)l=t.chromosomesArray[i].id.split("-")[1],r=0===i?i:i-1,o=t.chromosomesArray[r],0===i||l in c==!1?(a=20,c[l]=1):(s=o.width,a=n[r]+s+2*!t.config.showChromosomeLabels+t.config.chrMargin),n.push(a);return n}(t=document.querySelectorAll(".chromosome-set"),e),!function(e,t,n,i){var r,o,a,s,l,c,u,d=i.config,h=d.chrLabelSize;for(r=0;r<e.length;r++){if(o=e[r],a=t[r]+23-h,c=i.chromosomesArray[r].id.split("-")[1],l=-40-200*(u=i.config.taxids.indexOf(c))-30-5,0===u?(s=-34,l+=2*i.config.chrWidth-16):s=2*i.config.chrWidth-24,d.showChromosomeLabels){let e=o.querySelector(".chrLabel > tspan");e.setAttribute("x",s),e.setAttribute("dy",h-8),o.querySelector(".chrLabel").setAttribute("text-anchor","start")}o.setAttribute("transform","rotate(90) translate("+a+","+l+")"),o.querySelector(".chromosome").setAttribute("transform","translate(-13, 10)")}i.config.taxids.forEach((e,t)=>{var n=i.organisms[e].scientificName;ip.select(i.selector).append("text").attr("class","genomeLabel italic").attr("x",55+200*t).attr("y",10).text(n).attr("text-anchor","middle")})}(t,n,0,e),r=Math.round(n.slice(-1)[0]+70),o.multiorganism){i*=8;var a=0;n.forEach(e=>{e>a&&(a=e)}),i=a+30}else i=xOffsets.slice(-1)[0]+30;ip.select(e.selector).attr("height",i).attr("width",r),ip.select("#_ideogramTrackLabelContainer").remove(),ip.select("#_ideogramInnerWrap").insert("div",":first-child").attr("id","_ideogramTrackLabelContainer").style("position","absolute")},iW=function(e){var t,n,i,r,o,a=e.config,s=a.annotationHeight||0;if("vertical"===a.orientation)return void iH(e);e.config.annotLabelHeight=12;var l=e.config.annotLabelHeight;if("demarcateCollinearChromosomes"in e.config==!1&&(e.config.demarcateCollinearChromosomes=!0),t=document.querySelectorAll(".chromosome-set"),i=a.numAnnotTracks*(s+l+4)-a.chrWidth+1,n=function(e,t){var n,i,r,o,a,s,l,c={};for(i=0,n=[];i<e.length;i++)l=t.chromosomesArray[i].id.split("-")[1],r=0===i?i:i-1,o=t.chromosomesArray[r],0===i||l in c==!1?(a=20,c[l]=1):(s=o.width,a=n[r]+s+2*!t.config.showChromosomeLabels+t.config.chrMargin),n.push(a);return n}(t,e),!function(e,t,n,i){var r,o,a,s,l,c,u,d=i.config,h=d.chrWidth,f=d.chrLabelSize;for(r=0;r<e.length;r++)o=e[r],s=t[r],a=i.chromosomesArray[r].id.split("-")[1],l=n+200*(c=d.taxids.indexOf(a)),0===c&&i.config.multiorganism?(u=f-4,l+=2*h+f):u=2*h+f+2,i.config.showChromosomeLabels&&(o.querySelector(".chrLabel").setAttribute("y",u),o.querySelector(".chrLabel").setAttribute("text-anchor","middle")),o.setAttribute("transform","translate("+s+","+l+")"),o.querySelector(".chromosome").setAttribute("transform","translate(-13, 10)");d.multiorganism&&i.config.taxids.forEach((e,t)=>{var n=i.organisms[e],r=i.config,o=n.scientificName;ip.select(i.selector).append("text").attr("class","genomeLabel italic").attr("x",5).attr("y",r.chrLabelSize+(200+3*r.chrWidth)*t).text(o)})}(t,n,i,e),r=i+2*a.chrWidth+20,a.multiorganism){r*=8;var c=0;n.forEach(e=>{e>c&&(c=e)}),o=c+20}else o=n.slice(-1)[0]+20;ip.select(e.selector).attr("width",o).attr("height",r),ip.select("#_ideogramTrackLabelContainer").remove(),ip.select("#_ideogramInnerWrap").insert("div",":first-child").attr("id","_ideogramTrackLabelContainer").style("position","absolute")};var iG={},ij=function(e,t,n,i,r){var o=new Worker(iG[t]||(iG[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},o.postMessage(n,i),o},iq=Uint8Array,iz=Uint16Array,iV=Uint32Array,iU=new iq([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iY=new iq([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iX=new iq([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iK=function(e,t){for(var n=new iz(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var r=new iV(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return[n,r]},iJ=iK(iU,2),iQ=iJ[0],iZ=iJ[1];iQ[28]=258,iZ[258]=28;for(var i0=iK(iY,0),i1=i0[0],i2=i0[1],i5=new iz(32768),i3=0;i3<32768;++i3){var i8=(43690&i3)>>>1|(21845&i3)<<1;i8=(61680&(i8=(52428&i8)>>>2|(13107&i8)<<2))>>>4|(3855&i8)<<4,i5[i3]=((65280&i8)>>>8|(255&i8)<<8)>>>1}for(var i4=function(e,t,n){for(var i,r=e.length,o=0,a=new iz(t);o<r;++o)e[o]&&++a[e[o]-1];var s=new iz(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new iz(1<<t);var l=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],u=t-e[o],d=s[e[o]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)i[i5[d]>>>l]=c}else for(o=0,i=new iz(r);o<r;++o)e[o]&&(i[o]=i5[s[e[o]-1]++]>>>15-e[o]);return i},i6=new iq(288),i3=0;i3<144;++i3)i6[i3]=8;for(var i3=144;i3<256;++i3)i6[i3]=9;for(var i3=256;i3<280;++i3)i6[i3]=7;for(var i3=280;i3<288;++i3)i6[i3]=8;for(var i9=new iq(32),i3=0;i3<32;++i3)i9[i3]=5;var i7=i4(i6,9,1),re=i4(i9,5,1),rt=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},rn=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},ri=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},rr=function(e){return(e+7)/8|0},ro=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(2==e.BYTES_PER_ELEMENT?iz:4==e.BYTES_PER_ELEMENT?iV:iq)(n-t);return i.set(e.subarray(t,n)),i},ra=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rs=function(e,t,n){var i=Error(t||ra[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,rs),!n)throw i;return i},rl=function(e,t,n){var i=e.length;if(!i||n&&n.f&&!n.l)return t||new iq(0);var r=!t||n,o=!n||n.i;n||(n={}),t||(t=new iq(3*i));var a=function(e){var n=t.length;if(e>n){var i=new iq(Math.max(2*n,e));i.set(t),t=i}},s=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,f=n.n,p=8*i;do{if(!u){s=rn(e,l,1);var m=rn(e,l+1,3);if(l+=3,m)if(1==m)u=i7,d=re,h=9,f=5;else if(2==m){var g=rn(e,l,31)+257,y=rn(e,l+10,15)+4,v=g+rn(e,l+5,31)+1;l+=14;for(var b=new iq(v),w=new iq(19),x=0;x<y;++x)w[iX[x]]=rn(e,l+3*x,7);l+=3*y;for(var A=rt(w),C=(1<<A)-1,S=i4(w,A,1),x=0;x<v;){var k=S[rn(e,l,C)];l+=15&k;var L=k>>>4;if(L<16)b[x++]=L;else{var T=0,M=0;for(16==L?(M=3+rn(e,l,3),l+=2,T=b[x-1]):17==L?(M=3+rn(e,l,7),l+=3):18==L&&(M=11+rn(e,l,127),l+=7);M--;)b[x++]=T}}var E=b.subarray(0,g),$=b.subarray(g);h=rt(E),f=rt($),u=i4(E,h,1),d=i4($,f,1)}else rs(1);else{var L=rr(l)+4,P=e[L-4]|e[L-3]<<8,I=L+P;if(I>i){o&&rs(0);break}r&&a(c+P),t.set(e.subarray(L,I),c),n.b=c+=P,n.p=l=8*I,n.f=s;continue}if(l>p){o&&rs(0);break}}r&&a(c+131072);for(var D=(1<<h)-1,N=(1<<f)-1,F=l;;F=l){var T=u[ri(e,l)&D],B=T>>>4;if((l+=15&T)>p){o&&rs(0);break}if(T||rs(2),B<256)t[c++]=B;else if(256==B){F=l,u=null;break}else{var O=B-254;if(B>264){var x=B-257,R=iU[x];O=rn(e,l,(1<<R)-1)+iQ[x],l+=R}var H=d[ri(e,l)&N],W=H>>>4;H||rs(3),l+=15&H;var $=i1[W];if(W>3){var R=iY[W];$+=ri(e,l)&(1<<R)-1,l+=R}if(l>p){o&&rs(0);break}r&&a(c+131072);for(var G=c+O;c<G;c+=4)t[c]=t[c-$],t[c+1]=t[c+1-$],t[c+2]=t[c+2-$],t[c+3]=t[c+3-$];c=G}}n.l=u,n.p=F,n.b=c,n.f=s,u&&(s=1,n.m=h,n.d=d,n.n=f)}while(!s);return c==t.length?t:ro(t,0,c)},rc=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>>8},ru=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},rd=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,o=n.slice();if(!r)return[rv,0];if(1==r){var a=new iq(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=r-1;)s=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=o[0].s,i=1;i<r;++i)o[i].s>h&&(h=o[i].s);var f=new iz(h+1),p=rh(n[u-1],f,0);if(p>t){var i=0,m=0,g=p-t,y=1<<g;for(o.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});i<r;++i){var v=o[i].s;if(f[v]>t)m+=y-(1<<p-f[v]),f[v]=t;else break}for(m>>>=g;m>0;){var b=o[i].s;f[b]<t?m-=1<<t-f[b]++-1:++i}for(;i>=0&&m;--i){var w=o[i].s;f[w]==t&&(--f[w],++m)}p=t}return[new iq(f),p]},rh=function(e,t,n){return -1==e.s?Math.max(rh(e.l,t,n+1),rh(e.r,t,n+1)):t[e.s]=n},rf=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new iz(++t),i=0,r=e[0],o=1,a=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++o;else{if(!r&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(r),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(r);o=1,r=e[s]}return[n.subarray(0,i),t]},rp=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},rm=function(e,t,n){var i=n.length,r=rr(t+2);e[r]=255&i,e[r+1]=i>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var o=0;o<i;++o)e[r+o+4]=n[o];return(r+4+i)*8},rg=function(e,t,n,i,r,o,a,s,l,c,u){rc(t,u++,n),++r[256];for(var d,h,f,p,m=rd(r,15),g=m[0],y=m[1],v=rd(o,15),b=v[0],w=v[1],x=rf(g),A=x[0],C=x[1],S=rf(b),k=S[0],L=S[1],T=new iz(19),M=0;M<A.length;++M)T[31&A[M]]++;for(var M=0;M<k.length;++M)T[31&k[M]]++;for(var E=rd(T,7),$=E[0],P=E[1],I=19;I>4&&!$[iX[I-1]];--I);var D=c+5<<3,N=rp(r,i6)+rp(o,i9)+a,F=rp(r,g)+rp(o,b)+a+14+3*I+rp(T,$)+(2*T[16]+3*T[17]+7*T[18]);if(D<=N&&D<=F)return rm(t,u,e.subarray(l,l+c));if(rc(t,u,1+(F<N)),u+=2,F<N){d=i4(g,y,0),h=g,f=i4(b,w,0),p=b;var B=i4($,P,0);rc(t,u,C-257),rc(t,u+5,L-1),rc(t,u+10,I-4),u+=14;for(var M=0;M<I;++M)rc(t,u+3*M,$[iX[M]]);u+=3*I;for(var O=[A,k],R=0;R<2;++R)for(var H=O[R],M=0;M<H.length;++M){var W=31&H[M];rc(t,u,B[W]),u+=$[W],W>15&&(rc(t,u,H[M]>>>5&127),u+=H[M]>>>12)}}else d=null,h=i6,f=null,p=i9;for(var M=0;M<s;++M)if(i[M]>255){var W=i[M]>>>18&31;ru(t,u,d[W+257]),u+=h[W+257],W>7&&(rc(t,u,i[M]>>>23&31),u+=iU[W]);var G=31&i[M];ru(t,u,f[G]),u+=p[G],G>3&&(ru(t,u,i[M]>>>5&8191),u+=iY[G])}else ru(t,u,d[i[M]]),u+=h[i[M]];return ru(t,u,d[256]),u+h[256]},ry=new iV([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rv=new iq(0),rb=function(e,t,n,i,r,o){var a=e.length,s=new iq(i+a+5*(1+Math.ceil(a/7e3))+r),l=s.subarray(i,s.length-r),c=0;if(!t||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d>=a&&(l[c>>3]=o),c=rm(l,c+1,e.subarray(u,d))}else{for(var h=ry[t-1],f=h>>>13,p=8191&h,m=(1<<n)-1,g=new iz(32768),y=new iz(m+1),v=Math.ceil(n/3),b=2*v,w=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&m},x=new iV(25e3),A=new iz(288),C=new iz(32),S=0,k=0,u=0,L=0,T=0,M=0;u<a;++u){var E=w(u),$=32767&u,P=y[E];if(g[$]=P,y[E]=$,T<=u){var I=a-u;if((S>7e3||L>24576)&&I>423){c=rg(e,l,0,x,A,C,k,L,M,u-M,c),L=S=k=0,M=u;for(var D=0;D<286;++D)A[D]=0;for(var D=0;D<30;++D)C[D]=0}var N=2,F=0,B=p,O=$-P&32767;if(I>2&&E==w(u-O))for(var R=Math.min(f,I)-1,H=Math.min(32767,u),W=Math.min(258,I);O<=H&&--B&&$!=P;){if(e[u+N]==e[u+N-O]){for(var G=0;G<W&&e[u+G]==e[u+G-O];++G);if(G>N){if(N=G,F=O,G>R)break;for(var j=Math.min(O,G-2),q=0,D=0;D<j;++D){var z=u-O+D+32768&32767,V=g[z],U=z-V+32768&32767;U>q&&(q=U,P=z)}}}P=g[$=P],O+=$-P+32768&32767}if(F){x[L++]=0x10000000|iZ[N]<<18|i2[F];var Y=31&iZ[N],X=31&i2[F];k+=iU[Y]+iY[X],++A[257+Y],++C[X],T=u+N,++S}else x[L++]=e[u],++A[e[u]]}}c=rg(e,l,o,x,A,C,k,L,M,u-M,c),!o&&7&c&&(c=rm(l,c+1,rv))}return ro(s,0,i+rr(c)+r)},rw=function(){var e=-1;return{p:function(t){for(var n=e,i=0;i<t.length;++i)n=null[255&n^t[i]]^n>>>8;e=n},d:function(){return~e}}},rx=function(){var e=1,t=0;return{p:function(n){for(var i=e,r=t,o=0|n.length,a=0;a!=o;){for(var s=Math.min(a+2655,o);a<s;++a)r+=i+=n[a];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}e=i,t=r},d:function(){return e%=65521,t%=65521,(255&e)<<24|e>>>8<<16|(255&t)<<8|t>>>8}}},rA=function(e,t,n,i,r){return rb(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,i,!r)},rC=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},r_=function(e,t,n){for(var i=e(),r=e.toString(),o=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<i.length;++a){var s=i[a],l=o[a];if("function"==typeof s){t+=";"+l+"=";var c=s.toString();if(s.prototype)if(-1!=c.indexOf("[native code]")){var u=c.indexOf(" ",8)+1;t+=c.slice(u,c.indexOf("(",u))}else for(var d in t+=c,s.prototype)t+=";"+l+".prototype."+d+"="+s.prototype[d].toString();else t+=c}else n[l]=s}return[t,n]},rS=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},rk=function(e,t,n,i){if(!null[n]){for(var r,o="",a={},s=e.length-1,l=0;l<s;++l)o=(r=r_(e[l],o,a))[0],a=r[1];null[n]=r_(e[s],o,a)}var c=rC({},null[n][1]);return ij(null[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,rS(c),i)},rL=function(){return[iq,iz,iV,iU,iY,iX,iQ,i1,i7,re,i5,ra,i4,rt,rn,ri,rr,ro,rs,rl,rG,rT,rM]},rT=function(e){return postMessage(e,[e.buffer])},rM=function(e){return e&&e.size&&new iq(e.size)},rE=function(e,t,n,i,r,o){var a=rk(n,i,r,function(e,t){a.terminate(),o(e,t)});return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},r$=function(e,t){return e[t]|e[t+1]<<8},rP=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},rI=function(e,t){return rP(e,t)+0x100000000*rP(e,t+4)},rD=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},rN=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&rD(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var i=0;i<=n.length;++i)e[i+10]=n.charCodeAt(i)}},rF=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&rs(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|(e[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},rB=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},rO=function(e){return 10+(e.filename&&e.filename.length+1||0)},rR=function(e,t){var n=t.level,i=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=i<<6|(i?32-2*i:1)},rH=function(e){((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&rs(6,"invalid zlib data"),32&e[1]&&rs(6,"invalid zlib data: preset dictionaries not supported")};function rW(e,t){return rA(e,t||{},0,0)}function rG(e,t){return rl(e,t)}function rj(e,t){var n,i,r,o;return 31==e[0]&&139==e[1]&&8==e[2]?(n=e,i=t,rl(n.subarray(rF(n),-8),i||new iq(rB(n)))):(15&e[0])!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?rl(e,t):(r=e,o=t,rl((rH(r),r.subarray(2,-4)),o))}var rq="undefined"!=typeof TextEncoder&&new TextEncoder,rz="undefined"!=typeof TextDecoder&&new TextDecoder;try{rz.decode(rv,{stream:!0})}catch(e){}var rV=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return[t,ro(e,n-1)];r?3==r?t+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?t+=String.fromCharCode((31&i)<<6|63&e[n++]):t+=String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(i)}};function rU(e,t){if(t){for(var n="",i=0;i<e.length;i+=16384)n+=String.fromCharCode.apply(null,e.subarray(i,i+16384));return n}if(rz)return rz.decode(e);var r=rV(e),o=r[0];return r[1].length&&rs(8),o}var rY=function(e,t){for(;1!=r$(e,t);t+=4+r$(e,t+2));return[rI(e,t+12),rI(e,t+4),rI(e,t+20)]},rX=function(e){var t=0;if(e)for(var n in e){var i=e[n].length;i>65535&&rs(9),t+=i+4}return t};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout,n(2441);let rK=(e,...t)=>{let n=e;return t.length>0&&(n+=` :: ${JSON.stringify(t)}`),n};class rJ extends Error{constructor(e,t){super(rK(e,t)),this.name=e,this.details=t}}async function rQ(e,t){try{if(206===t.status)return t;let n=e.headers.get("range");if(!n)throw new rJ("no-range-header");let i=function(e){let t=e.trim().toLowerCase();if(!t.startsWith("bytes="))throw new rJ("unit-must-be-bytes",{normalizedRangeHeader:t});if(t.includes(","))throw new rJ("single-range-only",{normalizedRangeHeader:t});let n=/(\d*)-(\d*)/.exec(t);if(!n||!(n[1]||n[2]))throw new rJ("invalid-range-values",{normalizedRangeHeader:t});return{start:""===n[1]?void 0:Number(n[1]),end:""===n[2]?void 0:Number(n[2])}}(n),r=await t.blob(),o=function(e,t,n){let i,r,o=e.size;if(n&&n>o||t&&t<0)throw new rJ("range-not-satisfiable",{size:o,end:n,start:t});return void 0!==t&&void 0!==n?(i=t,r=n+1):void 0!==t&&void 0===n?(i=t,r=o):void 0!==n&&void 0===t&&(i=o-n,r=o),{start:i,end:r}}(r,i.start,i.end),a=r.slice(o.start,o.end),s=a.size,l=new Response(a,{status:206,statusText:"Partial Content",headers:t.headers});return l.headers.set("Content-Length",String(s)),l.headers.set("Content-Range",`bytes ${o.start}-${o.end-1}/${r.size}`),l}catch(e){return new Response("",{status:416,statusText:"Range Not Satisfiable"})}}async function rZ(e){let t={},n=`${e.replace(".tsv.gz","")}.tsv.li.gz`,i=await r3(n),r=(await i.text()).split("\n");for(let e=0;e<r.length-1;e++){let[n,i]=r[e].split("	");if("#"===n[0])continue;let o=parseInt(i),a=parseInt(r[e+1].split("	")[1]);t[n]=[o,a]}return t}async function r0(e){let t={},n=e.split("\n");for(let e=0;e<n.length-1;e++){let[i,r,o]=n[e].split("	");if("#"===i[0])continue;let a=parseInt(r),s=a+parseInt(o);t[i]=[a,s]}return t}function r1(e,t,n,i="tsv"){let r=iL(e);return t?t+=n+"/":t=ig("cache/"+n+"/"),t+r+"-"+n+"."+i+".gz"}function r2(e,t,n=11){return"WBGene"===e&&(n=8),e+t.padStart(n,"0")}async function r5(){let e=`ideogram-${v}`;return(await caches.keys()).forEach(t=>{t.startsWith("ideogram-")&&t!==e&&caches.delete(t)}),await caches.open(e)}async function r3(e){let t=await r5();window.ideoCache=t,window.createPartialResponse=rQ;let n=e.replace(".gz","");if(void 0===await t.match(n)){let i=await fetch(e),r=await i.blob(),o=rU(rj(new Uint8Array(await r.arrayBuffer()))),a=o.length,s=new Response(new Blob([o],{type:"text/tab-separated-values"}),{headers:new Headers({"Content-Length":a})});await t.put(n,s)}return await t.match(n)}async function r8(e,t){e=e.replace(".gz","");let n=t[0]+1,i=t[1]-1,r=new Request(e,{headers:new Headers({"content-type":"multipart/byteranges",range:`bytes=${n}-${i}`})}),o=await r5(),a=await o.match(r),s=await rQ(r,a);return await s.text()}async function r4(e,t,n,i=null){let r,o,a=performance.now(),s=await r3(e);r=e.includes(".json")?await s.json():await s.text();let l=performance.now();if(t.fetch=Math.round(l-a),e.includes("tissue"))o=n(r,t,await rZ(e));else if(e.includes("variant")){let i=e.replace(".li","");await r3(i);let a=await r0(r);o=n(r,t,a)}else o=n(r,t,i);return t.parseCache=Math.round(performance.now()-l),[o,t]}async function r6(e,t){let n=Ideogram.tissueCache,i=n.byteRangesByName[e];if(Ideogram.cacheRangeFetch||(Ideogram.cacheRangeFetch=r8),!i)return null;let r=null;t.cacheDir&&(r=t.cacheDir);let o=r1("homo-sapiens",r,"tissues","tsv"),a=await r8(o,i),s=[],l=a.split("	").slice(1);for(let e=0;e<l.length;e++){let t=l[e].split(";").map(e=>""===e?0:e),i=t.length;15===i?t.splice(1,0,0):14===i?(t.splice(1,0,0),t.splice(1,0,0)):13===i&&(t.splice(1,0,0),t.splice(1,0,0),t.splice(1,0,0));let r=t[0],o=t.slice(1,6),a=parseFloat(o[0]),c=parseFloat(o[1]),u=parseFloat(o[2]),d=parseFloat(o[3]),h={min:a,q1:c,median:u,q3:d,max:parseFloat(o[4]),quantiles:t.slice(6).map(e=>parseInt(e))},f=n.tissueNames[r],p=n.tissueColors[r],m=parseInt(n.tissueSamples[r]);s.push({tissue:f,expression:h,color:p,samples:m})}return s}n(4754),window.cacheRangeFetch=r8;let r9={0:"unknown",1:"germline",2:"somatic",4:"inherited",8:"paternal",16:"maternal",32:"de-novo",64:"biparental",128:"uniparental",256:"not-tested",512:"tested-inconclusive",0x40000000:"other"};function r7(e,t){let[n,i]=e[t].split("|");return["MONDO:"+n,i.replaceAll("_"," ")]}function oe(e,t){return t[e].replaceAll("_"," ")}async function ot(e,t){let n=[],i=Ideogram.variantCache,r=i.byteRangesByName[e];if(Ideogram.cacheRangeFetch||(Ideogram.cacheRangeFetch=r8),!r)return[];let o=t.config,a=null;o.cacheDir&&(a=o.cacheDir);let s=r1("homo-sapiens",a,"variants","tsv"),l=Ideogram.geneCache.lociByName[e],c=(await r8(s,r)).split("\n");for(let e=0;e<c.length;e++){let t=function(e,t){let[n,i,r,o,a,s,l,c,u,d,h,f,p]=e.split("	"),m=parseInt(i),g=""===l?null:parseFloat(l),y=t.keys,v=function(e,t){let n=[];if(""===e)return[{id:"",disease:"Not provided"}];let i=e.split(",");for(let e=0;e<i.length;e++){let[r,o]=r7(t,parseInt(i[e])),a={id:r,name:o};n.push(a)}return n}(s,y.diseaseArray),b=oe(c,y.reviewStatuses),w=oe(u,y.clinicalSignificances),x=oe(d,y.variantTypes),A=null;""!==h&&(A=function(e,t){let n=[],i=e.split(",");for(let e=0;e<i.length;e++){let[r,o]=t[parseInt(i[e])].split("|"),a={id:r,name:o};n.push(a)}return n}(h,y.molecularConsequenceArray));let C=r9[f];return{chromosome:n,position:m,afExac:g,clinvarVariantId:r,refAllele:o,altAllele:a,diseases:v,reviewStatus:b,rawReviewStatus:parseInt(c),clinicalSignificance:w,rawClinicalSignificance:parseInt(u),variantType:x,molecularConsequences:A,dbSnpId:p?"rs"+p:null,origin:C,rawOrigin:parseInt(f)}}(c[e],i);t.positionRelative=t.position-l[1],n.push(t)}return n}function on(e){return JSON.parse(e.split("= ")[1])}async function oi(e){if(!e.useCache)return;let t=e.organism,n=null;if(e.cacheDir&&(n=e.cacheDir),e.awaitCache){let i=Promise.all([oo("gene",t,e,n),oo("paralog",t,e,n),oo("interaction",t,e,n),oo("synonym",t,e,n)]);return e.showGeneStructureInTooltip&&(oo("geneStructure",t,e,n),oo("protein",t,e,n),oo("tissue",t,e,n),e.showVariantInTooltip&&oo("variant",t,e,n)),i}oo("gene",t,e,n),oo("paralog",t,e,n),oo("interaction",t,e,n),e.showGeneStructureInTooltip&&(oo("geneStructure",t,e,n),oo("protein",t,e,n),oo("synonym",t,e,n),oo("tissue",t,e,n),e.showVariantInTooltip&&oo("variant",t,e,n))}let or={gene:{metadata:"Gene",dir:"genes",fn:function(e){let[t,n,i,r,o,a,s]=e;Ideogram.geneCache={interestingNames:t,nameCaseMap:n,namesById:i,fullNamesById:r,idsByName:o,lociByName:a,lociById:s}},parseFn:function(e,t){let n,i=[],r={},o={},a={},s={},l={},c={},u=[],d={},h=performance.now(),f=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-h),h=performance.now();for(let e=0;e<f.length;e++){let t=f[e];if(""===t)continue;if("#"===t[0]){"## prefix"===t.slice(0,9)&&(n=t.split("prefix: ")[1]);continue}let[h,p,m,g,y,v,b]=t.trim().split(/\t/),w=decodeURIComponent(v),x=parseInt(p),A=x+parseInt(m),C=r2(n,g);u.push([h,x,A,C,y,w]);let S=[h,x,A];if(i.push(y),r[y.toLowerCase()]=y,o[C]=y,a[C]=w,s[y]=C,l[y]=S,c[C]=S,void 0!==b){let e=[],t=b.split(",");for(let n=0;n<t.length;n++)e.push(parseInt(t[n],10));d[y]=e}}let p=performance.now();return t.parseCacheLoop=Math.round(p-h),t.parseAnnots=Math.round(performance.now()-p),[i,r,o,a,s,l,c]}},paralog:{metadata:"Paralog",dir:"paralogs",fn:function(e){Ideogram.paralogCache={paralogsByName:e}},parseFn:function(e,t){let n,i={},r=performance.now(),o=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-r),r=performance.now();for(let e=0;e<o.length;e++){let t=o[e];if(""===t)continue;if("#"===t[0]){"## prefix"===t.slice(0,9)&&(n=t.split("prefix: ")[1]);continue}let r=t.trim().split(/\t/),a=r[0],s=r[1],l=[];if("_"===r[2][0]){let e=i[r[2].slice(1).toUpperCase()],t=r2(n,s);for(let n=0;n<e.length;n++){let i=e[n];i!==t&&l.push(i)}l.unshift(r2(n,r[3]))}else{let e=r.slice(2);for(let t=0;t<e.length;t++){let i=e[t];i!==s&&l.push(r2(n,i))}}i[a.toUpperCase()]=l}return t.parseCacheLoop=Math.round(performance.now()-r),i}},interaction:{metadata:"Interaction",dir:"interactions",fn:function(e){Ideogram.interactionCache=e},extension:"json",parseFn:function(e,t,n){let i=performance.now(),r={},o=n.replace("-"," "),a=o[0].toUpperCase()+o.slice(1);for(let t in i=performance.now(),e.interactions){let n=e.interactions[t];r[t]={result:[]};for(let i=0;i<n.length;i++){let o=n[i],s=o[0];r[t].result.push({fields:{left:{values:o[1]},right:{values:o[2]}},id:"WP"+s,name:e.pathwayNamesById[s],species:a})}}return t.parseCacheLoop=Math.round(performance.now()-i),r}},geneStructure:{metadata:"GeneStructure",dir:"gene-structures",fn:function(e){Ideogram.geneStructureCache=e},parseFn:function(e,t){let n,i,r={},o=performance.now(),a=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-o),o=performance.now();for(let e=0;e<a.length;e++){let t=a[e];if(""===t)continue;if("#"===t[0]){if("#"===t[1]){let[e,r]=function(e){let t=e.split(" keys: ");if(t.length<2)return[null];let n=t[0].split("## ")[1],i={};return t[1].split(", ").forEach(e=>{let t=e.split(" = ");i[t[0]]=t[1]}),[n,i]}(t);"biotype"===e?n=r:"subpart"===e&&(i=r)}continue}let o=t.trim().split(/\t/),[s,l,c,u]=o.slice(0,4),d=parseInt(l),h=s.split("-").slice(0,-1).join("-"),f=function(e,t){let n=[];for(let i=0;i<e.length;i++){let r=e[i].split(";"),o=t[parseInt(r[0])],a=[o,parseInt(r[1]),parseInt(r[2])];n.push(a)}return n}(o.slice(4),i),p={name:s,startOffset:d,biotype:n[c],strand:u,subparts:f};h in r?r[h].push(p):r[h]=[p]}return t.parseCacheLoop=Math.round(performance.now()-o),r}},protein:{metadata:"Protein",dir:"proteins",fn:function(e){Ideogram.proteinCache=e},parseFn:function(e,t){let n,i,r={},o=performance.now(),a=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-o),o=performance.now();let s=null;for(let e=0;e<a.length;e++){let t=a[e];if(""===t)continue;if("#"===t[0]){if("#"===t[1]){let[e,i]=function(e){let t=e.split(" keys: ");if(t.length<2)return[null];let n=t[0].split("## ")[1],i={};return t[1].split("; ").forEach(e=>{let t=e.split(" = ");i[t[0]]=t[1]}),[n,i]}(t);"domain"===e&&(n=i)}continue}let o=t.trim().split(/\t/),l=o[0];if(isNaN(l)){let e=l.split("-"),t=e.slice(-1)[0],n=parseInt(t[0]),r=t.length;i=n*10**(r-1),s=e.slice(0,-1).join("-")}else l=s+"-"+(l=i+parseInt(l));let c={transcriptName:l,protein:function(e,t){let n=[];for(let i=0;i<e.length;i++){let r=e[i].split(";"),o=t[r[0]],a=[o,parseInt(r[1]),parseInt(r[2])];n.push(a)}return n}(o.slice(1),n)};s in r?r[s].push(c):r[s]=[c]}return t.parseCacheLoop=Math.round(performance.now()-o),r}},synonym:{metadata:"Synonym",dir:"synonyms",fn:function(e){Ideogram.synonymCache=e},parseFn:function(e,t){let n={},i=performance.now(),r=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-i),i=performance.now();for(let e=0;e<r.length;e++){let t=r[e];if(""===t||"#"===t[0])continue;let i=t.trim().split(/\t/),o=i[0],a=i.slice(1);n[o]=a}return t.parseCacheLoop=Math.round(performance.now()-i),{byGene:n}}},tissue:{metadata:"Tissue",dir:"tissues",fn:function(e){Ideogram.tissueCache=e},parseFn:function(e,t,n){let i,r,o,a=performance.now(),s=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-a),a=performance.now();for(let e=0;e<s.length;e++){let t=s[e];if(""!==t&&"#"===t[0]){if("## tissues"===t.slice(0,10)){let e=function(e){let t=[],n=[],i=[];return e.split(";").forEach(e=>{let r=e.split(",");t.push(r[0]),n.push(r[1]),i.push(r[2])}),[t,n,i]}(t.split("tissues: ")[1]);[i,r,o]=e}continue}}return t.parseCacheLoop=Math.round(performance.now()-a),{getTissueExpressions:r6,byteRangesByName:n,tissueNames:i,tissueColors:r,tissueSamples:o}}},variant:{metadata:"Variant",dir:"variants",fn:function(e){Ideogram.variantCache=e},extension:"tsv.li",parseFn:function(e,t,n){let i,r,o,a,s,l,c,u=performance.now(),d=e.split(/\r\n|\n/);t.rawTsvSplit=Math.round(performance.now()-u),u=performance.now();for(let e=0;e<d.length;e++){let t=d[e];if(""!==t){if("#"===t[0]){let e=t.slice(0,50);e.includes("disease_mondo_ids_and_names")?[i,r]=function(e){let t={},n=on(e);for(let e=0;e<n.length;e++){let[i,r]=r7(n,e);t[i]=r}return[n,t]}(t):e.includes("variant_types")?o=on(t):e.includes("clinical_significances")?a=on(t):e.includes("clinical_review_statuses")?s=on(t):e.includes("molecular_consequences")&&([l,c]=function(e){let t={},n=on(e);for(let e=0;e<n.length;e++){let[i,r]=n[e].split("|"),o=r.replaceAll("_"," ");t[i]=o}return[n,t]}(t));continue}break}}return t.parseCacheLoop=Math.round(performance.now()-u),{getVariants:ot,byteRangesByName:n,keys:{diseaseArray:i,diseaseNamesById:r,variantTypes:o,clinicalSignificances:a,reviewStatuses:s,molecularConsequenceArray:l,molecularConsequenceById:c}}}}};async function oo(e,t,n,i=null){let r,o=or[e],a=n.debug,s=performance.now(),l={};if(!function(e,t){let n=ih[function(e){for(let t in e=iL(e),ih){let n=ih[t],i=iL(n.commonName),r=iL(n.scientificName);if(i===e||r===e)return t}return null}(e)]||{},i="has"+t+"Cache";return n[i]&&!0===n[i]}(t,o.metadata))return;let c=e+"Cache";if(Ideogram[c]&&Ideogram[c][t])return;Ideogram[c]||(Ideogram[c]={});let u=o?.extension??"tsv",d=r1(t,i,o.dir,u);return[r,l]=await r4(d,l,o.parseFn,t),a&&console.time(`${e}Cache total`),new Promise(n=>{o.fn(r,t),Ideogram[c][t]=Ideogram[c],a&&(console.timeEnd(`${e}Cache total`),l.total=Math.round(performance.now()-s),console.log("perfTimes in init"+o.metadata+"Cache:",l)),n()})}function oa(e){void 0!==e.timeout&&window.clearTimeout(e.timeout),e.rawAnnots=e.setOriginalTrackIndexes(e.rawAnnots),e.config.annotationsDisplayedTracks?e.annots=e.updateDisplayedTracks(e.config.annotationsDisplayedTracks):(e.annots=e.processAnnotData(e.rawAnnots),e.config.filterable&&e.initCrossFilter(),e.drawProcessedAnnots(e.annots))}function os(e){var t,n,i,r,o,a,s=new Date().getTime(),l=this,c=l.config,u=c.annotations;l.initDrawChromosomes(),c.annotationsPath&&(l.rawAnnots?oa(l):function e(){l.timeout=setTimeout(function(){!l.rawAnnots||l.rawAnnots&&void 0!==l.rawAnnots.then?e():oa(l)},50)}());if(!0===c.showBandLabels&&(i=new Date().getTime(),l.hideUnshownBandLabels(),r=new Date().getTime(),c.debug&&console.log("Time in showing bands: "+(r-i)+" ms"),"vertical"===c.orientation))for(t=0;t<l.chromosomesArray.length;t++)n="#"+l.chromosomesArray[t].id,l.rotateChromosomeLabels(ip.select(n),t);!0===c.showChromosomeLabels&&l.drawChromosomeLabels(l.chromosomes),c.brush?l.createBrush(c.brush):c.cursorPosition&&l.createClickCursor(c.cursorPosition),u&&(Array.isArray(u)?l.drawAnnots(u):(l.rawAnnots=u,l.afterRawAnnots(),oa(l))),o=new Date().getTime(),c.debug&&console.log("Time in drawChromosome: "+(o-s)+" ms"),a=new Date().getTime(),c.debug&&console.log("Time constructing ideogram: "+(a-e)+" ms"),l.setOverflowScroll(),"collinear"===c.geometry&&iW(l),l.config.debug&&console.time("initCache: Ideogram"),oi(l.config).then(()=>{l.config.debug&&console.timeEnd("initCache: Ideogram"),l.onLoadCallback&&l.onLoadCallback()})}class ol{constructor(e){this._config=e,this._description=this._normalize(this._config.ploidyDesc)}getChromosomesNumber(e){if(!this._config.ploidyDesc)return this._config.ploidy||1;var t=this._config.ploidyDesc[e];return t instanceof Object?Object.keys(t)[0].length:t.length}_normalize(e){var t,n,i=[];if(!e)return e;for(t in e)"string"==typeof(n=e[t])?("vertical"===this._config.orientation&&(n=n.split("").reverse()),i.push({ancestors:n,existence:this._getexistenceArray(n.length)})):i.push({ancestors:Object.keys(n)[0],existence:n[Object.keys(n)[0]]});return i}_getexistenceArray(e){for(var t=[],n=0;n<e;n++)t.push("11");return t}getSetSize(e){return this._description?this._description[e].ancestors.length:1}getAncestor(e,t){return this._description?this._description[e].ancestors[t]:""}exists(e,t,n){return!this._description||Number(this._description[e].existence[t][n])>0}}class oc{constructor(e){this._node=e}getLabel(){return ip.select(this._node.parentNode).select("text.chrLabel").text()}getSetLabel(){return ip.select(this._node.parentNode).select("text.chrSetLabel").text()}}class ou{constructor(e,t){if(this._config=e,this._ideo=t,this._ploidy=this._ideo._ploidy,this._translate=void 0,"chrSetMargin"in e)this.chrSetMargin=e.chrSetMargin;else{var n=this._config.chrMargin;this.chrSetMargin=this._config.ploidy>1?n:0}this._tickSize=8,this._isRotated=!1}_getLeftMargin(){return this.margin.left}_getYScale(){return 20/this._config.chrWidth}getChromosomeLabels(e){var t=new oc(e),n=[];return this._ideo.config.ploidy>1&&n.push(t.getSetLabel()),n.push(t.getLabel()),n.filter(function(e){return e.length>0})}getChromosomeBandLabelTranslate(e){var t,n,i,r=this._ideo,o=this._tickSize,a=r.config.orientation;return"vertical"===a?i="rotate(-90)translate("+(t=o)+","+(n=r.round(2+e.px.start+e.px.width/2))+")":"horizontal"===a&&(i="translate("+(t=r.round(-o+e.px.start+e.px.width/2))+","+(n=-10)+")"),{x:t,y:n,translate:i}}didRotate(e,t){var n,i,r,o,a,s,l,c,u;i=(n=this._ideo).config.taxid,r=t.id.split("-")[0].replace("chr",""),o=(a=n.chromosomes[i][r]).bands,c=(l=ip.select(t.parentNode)).attr("transform"),u=/scale\(.*\)/.exec(c),c=c.replace(u,""),l.attr("transform",c),s=a.width,(a=n.getChromosomeModel(o,r,i,e)).oldWidth=s,n.chromosomes[i][r]=a,n.drawChromosome(a),n.handleRotateOnClick(),n.rawAnnots&&(n.displayedTrackIndexes?n.updateDisplayedTracks(n.displayedTrackIndexes):(n.annots=n.processAnnotData(n.rawAnnots),n.drawProcessedAnnots(n.annots),n.config.filterable&&n.initCrossFilter())),!0===n.config.showBandLabels&&(n.drawBandLabels(n.chromosomes),n.hideUnshownBandLabels()),n.onDidRotateCallback&&n.onDidRotateCallback(a)}rotate(e,t,n){var i,r,o,a;a=(i=this._ideo).selector+" .chrSetLabel, "+i.selector+" .chrLabel",o=document.querySelector(i.selector).getBoundingClientRect(),r=ip.selectAll(i.selector+" g.chromosome").filter(function(){return this!==n}),this._isRotated?(this._isRotated=!1,i.config.chrHeight=i.config.chrHeightOriginal,i.config.chrWidth=i.config.chrWidthOriginal,i.config.annotationHeight=i.config.annotationHeightOriginal,this.rotateBack(e,t,n,function(){r.style("display",null),ip.selectAll(a).style("display",null),i._layout.didRotate(t,n)})):(this._isRotated=!0,r.style("display","none"),ip.selectAll(a).style("display","none"),this.rotateForward(e,t,n,function(){var e,r,a;i.config.chrHeightOriginal=i.config.chrHeight,i.config.chrWidthOriginal=i.config.chrWidth,i.config.annotationHeightOriginal=i.config.annotationHeight,"VerticalLayout"===i._layout._class?(r=o.width-20,a=window.innerWidth-20):(r=o.height-10,a=window.innerHeight-10),e=(a<r?a:r)-2*i.config.chrMargin,i.config.chrHeight=e,i.config.chrWidth*=2.3,i.config.annotationHeight*=1.7,i._layout.didRotate(t,n)}))}getChromosomeLabelClass(){return 1===this._config.ploidy?"chrLabel":"chrSetLabel"}_getAdditionalOffset(){var e=this._config,t=e.annotationsNumTracks||e.numAnnotTracks||1;return(e.annotationHeight||0)*t}_getChromosomeSetSize(e){return this._ploidy.getSetSize(e)*this._config.chrWidth*2+this.chrSetMargin}getChromosomeSetLabelAnchor(){return"middle"}getChromosomeLabelYPosition(){return -5.5}getChromosomeSetLabelYPosition(e){return 1===this._config.ploidy?this.getChromosomeLabelYPosition(e):-2*this._config.chrWidth}}let od=ou;class oh extends od{constructor(e,t){super(e,t),this._class="VerticalLayout",this.margin={top:30,left:15}}rotateForward(e,t,n,i){var r=this.getChromosomeScale(n);ip.select(n.parentNode).transition().attr("transform","translate(20, 25) "+r).on("end",i);var o=this.getChromosomeLabels(n),a=(20+this._config.chrWidth)*1.3;ip.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(o).enter().append("text").attr("class",function(e,t){return 0===t&&2===o.length?"chrSetLabel":null}).attr("x",0).attr("y",a).style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="horizontal"}rotateBack(e,t,n,i){var r=this.getChromosomeScaleBack(n),o=this.getChromosomeSetTranslate(e);ip.select(n.parentNode).transition().attr("transform",o+" "+r).on("end",i),ip.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="vertical"}getHeight(){return this._config.chrHeight+1.5*this.margin.top}getWidth(){return"97%"}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeBandLabelAnchor(){return null}getChromosomeScale(e){var t,n;return t=ip.select(this._ideo.selector).node().getBoundingClientRect(),n=e.getBoundingClientRect(),"scale("+t.width/n.height*.97+", "+this._getYScale()+")"}getChromosomeScaleBack(e){var t,n,i,r;return i=(r=this._ideo.config).taxid,n=e.id.split("-")[0].replace("chr",""),t=this._ideo.chromosomes[i][n].oldWidth/(3*r.chrHeight)*.97,"scale("+t+", "+1/this._getYScale()+")"}getChromosomeSetTranslate(e){return"rotate(90) translate("+this.margin.top+", -"+this.getChromosomeSetYTranslate(e)+")"}getChromosomeSetYTranslate(e){var t,n=this._getAdditionalOffset(),i=this._config,r=i.chrMargin,o=i.chrWidth;if(!i.ploidyDesc)if("histogram"===i.annotationsLayout)return r+e*(r+o+3)+2*i.barWidth;else return(t=o+e*(r+o)+2*n+("legendPad"in i?i.legendPad:0),n>0)?t:t+4+2*e;if(!this._translate){this._translate=[this._ploidy.getSetSize(0)*o*2];for(var a,s=1;s<this._config.ploidyDesc.length;s++)a=this._translate[s-1],this._translate[s]=a+this._getChromosomeSetSize(s-1)}return this._translate[e]}getChromosomeSetLabelXPosition(){return-(this._config.chrWidth*this._config.ploidy/2)}getChromosomeLabelXPosition(){return-(this._config.chrWidth/2)}}class of extends od{constructor(e,t){super(e,t),this._class="HorizontalLayout",this.margin={left:20,top:30}}_getLeftMargin(){var e=od.prototype._getLeftMargin.call(this);return this._config.ploidy>1&&(e*=1.8),e}rotateForward(e,t,n,i){var r;ip.select(n.parentNode).transition().attr("transform","rotate(90) translate(30, -37.5) ").on("end",i),r=this.getChromosomeLabels(n),ip.select(this._ideo.getSvg()).append("g").attr("class","tmp").selectAll("text").data(r).enter().append("text").attr("class",function(e,t){return 0===t&&2===r.length?"chrSetLabel":null}).attr("x",26).attr("y",function(e,t){return(t+1+r.length%2)*12}).style("text-anchor","middle").style("opacity",0).text(String).transition().style("opacity",1),this._ideo.config.orientation="vertical"}rotateBack(e,t,n,i){var r=this.getChromosomeSetTranslate(e);ip.select(n.parentNode).transition().attr("transform",r).on("end",i),ip.selectAll(this._ideo.selector+" g.tmp").style("opacity",0).remove(),this._ideo.config.orientation="horizontal"}getHeight(e){void 0===e&&(e=this._config.taxids[0]);var t=this._config.chromosomes[e].length,n=this.getChromosomeSetYTranslate(t-1);return(n+=this._getChromosomeSetSize(t-1))+2*this._getAdditionalOffset()}getWidth(){return this._config.chrHeight+1.5*this.margin.top}getChromosomeSetLabelAnchor(){return"end"}getChromosomeBandLabelAnchor(){return null}getChromosomeBandTickY1(){return 2}getChromosomeBandTickY2(){return 10}getChromosomeSetLabelTranslate(){return null}getChromosomeSetTranslate(e){return"translate("+this._getLeftMargin()+", "+this.getChromosomeSetYTranslate(e)+")"}getChromosomeSetYTranslate(e){if(!this._config.ploidyDesc)return this._config.chrMargin*(e+1);if(!this._translate){this._translate=[1];for(var t=1;t<this._config.ploidyDesc.length;t++)this._translate[t]=this._translate[t-1]+this._getChromosomeSetSize(t-1)}return this._translate[e]}getChromosomeSetLabelXPosition(e){return 1===this._config.ploidy?this.getChromosomeLabelXPosition(e):-20}getChromosomeSetLabelYPosition(e){var t,n=this._ploidy.getSetSize(e),i=this._config,r=i.chrMargin,o=i.chrWidth;return 1===i.ploidy?o/2+3:n*r/2}getChromosomeLabelXPosition(){return -8}getChromosomeLabelYPosition(){return this._config.chrWidth}}class op extends od{constructor(e,t){super(e,t),this._class="PairedLayout",this.margin={left:30}}getHeight(){return this._config.chrHeight+1.5*this.margin.left}getWidth(){return"97%"}getChromosomeBandTickY1(e){return e%2?this._config.chrWidth:2*this._config.chrWidth}getChromosomeBandTickY2(e){var t=this._config.chrWidth;return e%2?t-this._tickSize:2*t+this._tickSize}getChromosomeBandLabelAnchor(e){return e%2?null:"end"}getChromosomeBandLabelTranslate(e,t){var n=t%2?10:-this._config.chrWidth-10,i=this._ideo.round(e.px.start+e.px.width/2)+3;return{x:i,y:i,translate:"rotate(-90) translate("+n+", "+i+")"}}getChromosomeLabelXPosition(){return-this._tickSize}getChromosomeSetLabelXPosition(){return-(this._config.chrWidth/2)}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(e){var t=this.getChromosomeSetYTranslate(e);return"rotate(90) translate("+this.margin.left+", -"+t+")"}getChromosomeSetYTranslate(e){return 200*(e+1)}}class om extends od{constructor(e,t){super(e,t),this._class="SmallLayout",this.margin={left:36.5,top:10};var n=this._ideo.getTaxid(this._ideo.config.organism);this.chrs=e.chromosomes[n];var i=this.chrs.length;this.chrsPerRow=Math.ceil(i/e.rows)}getHeight(){var e=1.25*this._config.chrHeight;return this._config.rows*(e+this.margin.top)}getWidth(){return"97%"}getChromosomeBandLabelTranslate(){}getChromosomeSetLabelTranslate(){return"rotate(-90)"}getChromosomeSetTranslate(e){var t,n;return e>this.chrsPerRow-1?(t=this.margin.left+1.3*this._config.chrHeight,n=this.getChromosomeSetYTranslate(e-this.chrsPerRow)):(t=this.margin.left,n=this.getChromosomeSetYTranslate(e)),"rotate(90) translate("+t+", -"+n+")"}getChromosomeSetYTranslate(e){var t=.3*this._getAdditionalOffset();return this.margin.left*e+this._config.chrWidth+2*t+t*e}getChromosomeSetLabelXPosition(e){return-((this._ploidy.getSetSize(e)*this._config.chrWidth+20)/2)+(this._config.ploidy>1?0:this._config.chrWidth)}getChromosomeLabelXPosition(){return-(this._config.chrWidth/2)}}function og(e){if(27===e.keyCode){let e=document.querySelector("._ideogramTooltip");e&&(e.style.opacity=0);let t=document.querySelector("#ideo-pathway-container");t&&t.remove()}}function oy(e){if(this.config.annotationsPath&&this.fetchAnnots(this.config.annotationsPath),"ploidyDesc"in this.config&&"string"==typeof this.config.ploidyDesc){for(var t,n,i,r=[],o=0;o<this.numChromosomes;o++)r.push(this.config.ploidyDesc);this.config.ploidyDesc=r}this._ploidy=new ol(this.config),this._layout=(n=this,"perspective"in(i=n.config)&&"comparative"===i.perspective?new op(i,n):"rows"in i&&i.rows>1?new om(i,n):"vertical"===i.orientation?new oh(i,n):"horizontal"===i.orientation?new of(i,n):new oh(i,n)),ip.selectAll(this.config.container+" #_ideogramOuterWrap").remove(),ip.select(this.config.container).append("div").attr("id","_ideogramOuterWrap").append("div").attr("id","_ideogramTrackLabelContainer").style("position","absolute"),ip.select(this.config.container+" #_ideogramOuterWrap").append("div").attr("id","_ideogramMiddleWrap").style("position","relative").style("overflow-x","auto").style("transform","translateZ(0)").append("div").attr("id","_ideogramInnerWrap").append("svg").attr("id","_ideogram").attr("class",(t="",this.config.showChromosomeLabels&&("horizontal"===this.config.orientation?t+="labeledLeft ":t+="labeled "),!1===this.config.rotatable&&(t+="no-rotate "),this.config.annotationsLayout&&"overlay"===this.config.annotationsLayout&&(t+="faint"),t)).attr("width",this._layout.getWidth()).attr("height",this._layout.getHeight()).html(this.getBandColorGradients()),this.isOnlyIdeogram=1===document.querySelectorAll("#_ideogram").length,ip.select(this.config.container+" #_ideogramOuterWrap").append("div").attr("class","_ideogramTooltip").attr("id",`${this.config.container.replace("#","")}_ideogramTooltip`).style("opacity",0).style("position","fixed").style("text-align","center").style("padding","4px").style("font","12px sans-serif").style("background","white").style("border","1px solid black").style("border-radius","5px").style("z-index","1000").style("margin-left","-2px"),document.removeEventListener("keydown",og),document.addEventListener("keydown",og),this.finishInit(e)}var ov="";function ob(e,t,n){return n.config.dataDir+e[t]}function ow(){var e,t,n,i,r,o=this.config.taxids;for(n=0;n<o.length;n++)t=o[n],i=this.config.chromosomes[t],r=this.bandsArray[t],this.config.showNonNuclearChromosomes||(i=i.filter(e=>"MT"!==e),void 0!==r&&(r=r.filter(e=>"MT"!==e[0].chr))),e=i,"undefined"!=typeof chrBands&&e.length>=chrBands.length/2&&(this.coordinateSystem="bp"),this.chromosomes[t]={},this.setSexChromosomes(i),function(e,t,n,i){var r,o,a,s,l;for(r=0;r<t.length;r++)a=t[r],void 0!==e&&(o=e[r]),l=r+i.config.taxids.indexOf(n),s=i.getChromosomeModel(o,a,n,l),"string"!=typeof a&&(a=a.name.split(" ").slice(-1)[0].replace("chr","")),i.chromosomes[n][a]=s,i.chromosomesArray.push(s),!function(e,t,n){var i=n.config.ploidy;return"sex"in n.config&&(2===i&&n.sexChromosomes.index+1===t||"female"===n.config.sex&&"Y"===e.name)}(s,r,i)&&i.drawChromosome(s)}(r,i,t,this),this.config.showBandLabels&&this.drawBandLabels(this.chromosomes),this.handleRotateOnClick(),this._gotChrModels=!0}function ox(){var e=this;"rotatable"in e.config&&!1===e.config.rotatable?ip.selectAll(e.selector).style("cursor","default"):ip.selectAll(e.selector+" .chromosome-set").on("click",function(){let t=this.children[1];e.rotateAndToggleDisplay(t)})}function oA(){call(this.onLoadCallback)}var oC={},o_={},oS={};class ok{constructor(e,t){this.rawAnnots=this.parseBed(e,t)}static componentToHex(e){var t=parseInt(e,10).toString(16);return 1===t.length?"0"+t:t}static rgbToHex(e,t,n){return"#"+ok.componentToHex(e)+ok.componentToHex(t)+ok.componentToHex(n)}parseGenomicCoordinates(e,t){var n,i,r;return n=e[0],i=parseInt(e[1],10),r=parseInt(e[2],10),t&&(n=n.slice(3)),[n,i,r,r-i]}parseAnnotFromTsvLine(e,t,n){var i,r,o,a,s,l,c,u=e.split(/\s/g);return([o,a,stop,length]=this.parseGenomicCoordinates(u,n),-1===(r=t.indexOf(o)))?[null,null]:(i=["",a,length,0],u.length>=4&&(c=u[3],i[0]=c),u.length>=8&&(s=u[8].split(","),l=ok.rgbToHex(s[0],s[1],s[2]),i.push(l)),[r,i])}parseRawAnnots(e,t,n,i){var r,o,a,s,l,c;for(c=!0,!1===isNaN(parseInt(n[t],10))&&(c=!1),r=t;r<n.length;r++)o=n[r],[a,s]=this.parseAnnotFromTsvLine(o,i,c),null!==a&&e[a].annots.push(s);return l=["name","start","length","trackIndex"],n[t].length>=8&&l.push("color"),{keys:l,annots:e}}parseBed(e,t){var n,i,r,o,a=[],s=e.split(/\r\n|\n/);for(n=0,i=Object.keys(t.chromosomes[t.config.taxid]);n<i.length;n++)r=i[n],a.push({chr:r,annots:[]});return o=0,("chr"===s[0].slice(0,3)||isNaN(parseInt(s[0],10)))&&(o=1),this.parseRawAnnots(a,o,s,i)}}class oL{constructor(e,t){this.rawAnnots=this.parseTsv(e,t)}parseGenomicCoordinates(e){let t=e[1];return[t,parseInt(e[2],10),parseInt(e[3],10)]}parseTsv(e,t){let n,i=e.split(/\r\n|\n/),r=Object.keys(t.chromosomes[t.config.taxid]),o=[];for(let e=0;e<r.length;e++){let t=r[e];o.push({chr:t,annots:[]})}let a={},s=[];for(let e=0;e<i.length;e++){let t=i[e];if(""===t)continue;if("#"===t[0]){if("#"===t[1]){let e=t.split(" keys: ");if(e.length>1){let t=e[0].slice(3),n=e[1].split(";");a[ik(t)]=n}}else(n=t.slice(1).trim().split(/\t/).map(e=>ik(e))).slice(4).forEach((e,t)=>s.push(ik(e)));continue}let l=t.trim().split(/\t/),c=l[0],[u,d,h]=this.parseGenomicCoordinates(l),f=r.indexOf(u);if(-1===f)continue;let p=l.slice(4);for(let e=0;e<4;e++){let t=s[e];if(t in a){let n=a[t],i=l[4+e].split(";"),r=[];if(""!==i[0])for(let e=0;e<i.length;e++){let t={},o=i[e].split("!");for(let e=0;e<o.length;e++){let i=n[e],r=o[e];t[ik(i)]=r}r.push(t)}p[e]=r}}let m=[c,u,d,h].concat(p);m.push(e),o[f].annots.push(m)}return n.push("initRank"),{keys:n,annots:o,innerKeysByField:a}}}var oT=["name","start","length","trackIndex","trackIndexOriginal","color"],oM={3:["00B","DDD","F00"],5:["00D","66D","DDD","F88","F00"],17:["00D","00D","00D","00D","00D","44D","44D","DDD","DDD","DDD","DDD","F88","F66","F22","F22","F00","F00","F00"]};function oE(e){var t,n,i;if(e.rawAnnots.metadata&&e.rawAnnots.metadata.trackLabels)t=e.rawAnnots.metadata.trackLabels;else if(e.config.heatmaps)for(i=0,t=[],n=e.config.heatmaps;i<n.length;i++)t.push(n[i].key);else t=e.rawAnnots.keys.slice(0).filter(e=>!oT.includes(e));return e.displayedTrackIndexes&&(t=t.filter(function(t,n){return e.displayedTrackIndexes.includes(n+1)})),t}function o$(e){var t,n,i=e.rawAnnots;if(!i.metadata||i.metadata.heatmapThresholds||e.config.heatmapThresholds)return n=oM[(t=e.config.heatmapThresholds?e.config.heatmapThresholds:e.rawAnnots.metadata.heatmapThresholds).length+1],(t=t.map((e,t)=>[e,"#"+n[t]])).push(["+","#"+n.slice(-1)[0]]),t}function oP(e,t,n,i,r){return e===t&&"+"===r&&n>i||n===r||0!==e&&e!==t&&n<=r&&n>i||0===e&&n<=r}function oI(e,t){var n,i,r,o,a,s,l,c;for(n=0;n<e.length;n++)i=e.length-1,!1===isNaN(a=parseFloat(o=(r=e[n])[0]))&&(o=a),0!==n&&(l=parseFloat(e[n-1][0])),s=r[1],oP(n,i,t,l,o)&&(c=s);return c}function oD(e){!1!==e.config.showTrackLabel&&(e.hideTrackLabelTimeout=window.setTimeout(function(){ip.select(e.config.container+" #_ideogramTrackLabel").transition().duration(500).style("opacity",0)},250))}function oN(e){var t,n,i,r,o=this,a=o.config,s=o._layout.margin.top,l=a.chrHeight+s;if("collinear"===a.geometry)return function(e,t){var n,i,r,o,a=0,s=t.config.showChromosomesLabels?2:-.1;for(ip.select(t.selector).classed("labeledLeft",!1),ip.selectAll(t.config.container+" canvas").remove(),r=0;r<e.length;r++)n=e[r].annots,o=t.chromosomesArray[r],0===r?i=12:(i=a+t.chromosomesArray[r-1].width+14,a+=t.chromosomesArray[r-1].width+s),function(e,t,n){var i,r,o,a,s=n.config.annotLabelHeight,l=n.config.annotationHeight,c=n.config.demarcateCollinearChromosomes,u=l+s+4;for(i=0;i<e.length;i++)if(o=t[(r=e[i]).trackIndex][0],a=t[r.trackIndex][1],o.fillStyle=r.color,c){if(r.startPx<1||r.startPx>a.width-1)continue;o.fillRect(r.startPx,1,.5,u)}else o.fillRect(r.startPx,s+1,.5,l);if(c)for(i=0;i<t.length;i++)o=t[i][0],a=t[i][1],o.fillStyle="#555",0===a.chrIndex&&o.fillRect(0,0,1,u),o.fillRect(a.width-1,0,1.1,u),o.fillRect(0,0,a.width+1,1),n.config.chrMargin&&o.fillRect(0,0,1.1,u)}(n,function(e,t,n){var i,r,o,a,s=e.width,l=[],c=n.config.annotLabelHeight,u=n.config.numAnnotTracks;for(i=0;i<u;i++)o=n.config.annotationHeight+c+4,a=e.id+"-canvas-"+i,r=t,e.chrIndex>0&&(r+=n.config.chrMargin*e.chrIndex-1),l.push([ip.select(n.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",a).attr("width",s+1).attr("height",o).style("position","absolute").style("left",r+"px").style("top",o*i+1+"px").nodes()[0].getContext("2d"),e]);return l}(o,i,t),t);!function(e,t){var n,i,r,o,a=t.config.annotLabelHeight;for(o=2*!!t.config.demarcateCollinearChromosomes,(r=ip.select(t.config.container+" #_ideogramTrackLabelContainer")).html(""),i=t.config.annotationHeight+a+4,n=0;n<e.length;n++)r.style("position","absolute").append("div").attr("class","_ideogramTrackLabel").style("opacity",1).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","5").style("left",11+o+"px").style("top",i*n+o+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").html(e[n])}(oE(t),t),t.onDrawAnnotsCallback&&t.onDrawAnnotsCallback()}(e,o);if("heatmap-2d"===a.annotationsLayout)return function(e,t){var n,i,r,o,a,s=t.config.container,l=t._layout.margin.top,c=t.config.chrHeight+l,u=t.config.annotationHeight*e[0].values.length;for(ip.selectAll(s+" canvas").remove(),ip.select(s+" #_ideogramInnerWrap").style("max-width",u+"px"),ip.select(s+" #_ideogram").attr("width",u),n=t.chromosomesArray[0],r=n.id+"-canvas",i=2*t.config.chrWidth+t.config.annotationHeight-.5,o=ip.select(t.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",r).attr("width",u).attr("height",c).style("position","absolute").style("left",i+"px").style("top","0px").nodes()[0].getContext("2d"),a=0;a<e.length;a++)!function(e,t,n){var i,r,o,a=n.config.annotationHeight,s=n._layout.margin.top;for(i=0,o=e.values;i<o.length;i++)t.fillStyle=o[i],r=(i-1)*a,t.fillRect(r,e.startPx+s,a,2)}(e[a],o,t);t.onDrawAnnotsCallback&&t.onDrawAnnotsCallback()}(e,o);for(ip.selectAll(o.config.container+" canvas").remove(),ip.select(o.config.container+" #_ideogramTrackLabelContainer").append("div").attr("id","_ideogramTrackLabel").style("opacity",0).style("position","absolute").style("text-align","center").style("padding","1px").style("font","11px sans-serif").style("background","white").style("line-height","10px").style("z-index","9000"),i=0;i<e.length;i++)t=e[i].annots,r=o.chromosomesArray[i],n=o.config.chrWidth,function(e,t,n,i){var r,o,a,s;for(r=0;r<e.length;r++)(a=t[(o=e[r]).trackIndex]).fillStyle=o.color,s=o.trackIndex-1,a.fillRect(s,o.startPx+i,n,.5)}(t,function(e,t,n,i){var r,o,a,s,l=[],c=i.config.numAnnotTracks;for(r=0;r<c;r++)a=i.config.annotationHeight,s=e.id+"-canvas-"+r,o=t-a*(c-r)-7,l.push(ip.select(i.config.container+" #_ideogramInnerWrap").append("canvas").attr("id",s).attr("width",a).attr("height",n).style("position","absolute").style("left",o+"px").nodes()[0].getContext("2d"));return l}(r,o._layout.getChromosomeSetYTranslate(i),l,o),n,s);ip.selectAll(o.config.container+" canvas").on("mouseover",function(){var e,t,n,i,r,a,s,l,c;clearTimeout(o.hideTrackLabelTimeout),e=(e=oE(o)).join("<br>"),ip.select(o.config.container+" #_ideogramTrackLabel").interrupt().style("top","").style("left","").style("transform",null).style("transform","rotate(-90deg)").html(e),[t,n]=(i=e,r=this.id.split("-").slice(0,-1).join("-")+"-0",a=ip.select(o.config.container+" #"+r).nodes()[0].getBoundingClientRect(),s=ip.select(o.config.container+" #_ideogramTrackLabel").nodes()[0].getBoundingClientRect(),l=ip.select(o.config.container).nodes()[0].getBoundingClientRect(),[Math.round(a.left+s.width)-a.width-1-(l.left-7),-(i.split("<br>").length-2)*a.width+2]),ip.select(o.config.container+" #_ideogramTrackLabel").style("opacity",1).style("left",t+"px").style("top",n+"px").style("width","max-content").style("transform-origin","bottom left").style("text-align","left").on("mouseover",function(){clearTimeout(o.hideTrackLabelTimeout)}).on("mouseout",function(){oD(o)})}).on("mouseout",function(){oD(o)}),o.onDrawAnnotsCallback&&o.onDrawAnnotsCallback()}function oF(e){var t,n,i,r,o,a=new Date().getTime(),s=e.keys,l=e.annots;for(o=0,r=[];o<this.config.heatmaps.length;o++)i=this.config.heatmaps[o].key,r.push(s.indexOf(i));n=function(e,t,n){var i,r,o,a=[];for(o=0;o<t.length;o++)r=(i=t[o]).chr,a.push({chr:r,annots:function(e,t,n){var i,r,o,a,s,l,c,u=[];for(i=0;i<t.length;i++)for(r=0,o=t[i];r<e.length;r++)a=o.slice(0,3),s=o[e[r]],l=oI(n.config.heatmaps[r].thresholds,s),c=r,a.push(c,l,s),u.push(a);return u}(e,i.annots,n)});return a}(r,l,this),s.splice(3,0,"trackIndex"),s.splice(4,0,"color"),this.rawAnnots.keys=s,this.rawAnnots.annots=n,t=new Date().getTime(),this.config.debug&&console.log("Time in deserializeAnnotsForHeatmap: "+(t-a)+" ms")}function oB(){call(this.onLoadAnnotsCallback)}function oO(){call(this.onDrawAnnotsCallback)}function oR(){ip.selectAll("._ideogramTooltip").transition().duration(500).style("opacity",0).style("pointer-events","none")}function oH(){let e=this;if(!1===e.config.showAnnotTooltip)return;let t=e.oneTimeDelayTooltipHideMs??250;delete e.oneTimeDelayTooltipHideMs,e.hideAnnotTooltipTimeout=window.setTimeout(function(){oR()},t),e.isTooltipCooling=!0,e.hideAnnotTooltipCounter=window.setTimeout(function(){e.isTooltipCooling=!1},500)}async function oW(e,t){await call(this.onWillShowAnnotTooltipCallback,e,t)}function oG(){call(this.onDidShowAnnotTooltipCallback)}function oj(e){this.prevClickedAnnot=e,this.hasShownAnnotSinceClick=!1,this.onClickAnnotCallback(e)}async function oq(e,t){if(!1===this.config.showAnnotTooltip)return;if(clearTimeout(this.hideAnnotTooltipTimeout),this.onWillShowAnnotTooltipCallback&&(e=await this.onWillShowAnnotTooltipCallback(e,t)),null===e)return void oR();this.prevTooltipAnnotName=e.name,(o=ip.select(`#${this.config.container.replace("#","")}_ideogramTooltip`)).interrupt(),[i,r]=function(e,t=!1){var n,i,r,o,a;return(r="chr"+e.chr+":"+e.start.toLocaleString(),e.displayCoordinates)?r=e.displayCoordinates:e.length>0&&(r+="-"+e.stop.toLocaleString(),t&&(r+=" ("+(o=Math.abs(e.stop-e.start),(a=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].reverse().find(function(e){return o>=e.value}))?(o/a.value).toFixed(void 0).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+" "+a.symbol:"0")+"bp)")),n=`<span class="_ideoTooltipFooter"><br />${r}</span>`,i=24,e.name&&(n=(e.displayName?e.displayName:e.name)+n,i+=8),[n,i]}(e,!0);let n=t.getBoundingClientRect();var i,r,o,a=this;let s="horizontal"===a.config.orientation?n.left+n.width/2:n.left+n.width;o.html(i).style("opacity",1).style("left",s+"px").style("top",n.top-r+"px").style("font-family",a.config.fontFamily).style("pointer-events",null).on("mouseover",function(){clearTimeout(a.hideAnnotTooltipTimeout)}).on("mouseout",function(){a.startHideAnnotTooltipTimeout()}),this.onDidShowAnnotTooltipCallback&&this.onDidShowAnnotTooltipCallback()}let oz=`
  <style>
    #_ideogram .annot path, ._ideogramLabel {
      cursor: pointer;
    }

    #_ideogram .annot path {
      stroke-width: 1px;
      stroke: white;
      stroke-linejoin: bevel;
    }

    #_ideogram .annot ._ideogramLabel._ideoActive {
      fill: #77F !important;
      stroke: #F0F0FF !important;
    }

    #_ideogram .annot > path._ideoActive {
      stroke: #D0D0DD !important;
      stroke-width: 1.5px;
    }

    #_ideogram .annot ._ideogramLabel {
      stroke: white;
      stroke-width: 5px;
      stroke-linejoin: round;
      paint-order: stroke fill;
      text-align: center;
    }
  </style>
  `;function oV(e){return"ideogramLabel_"+e.domId}function oU(e,t,n){ip.selectAll("._ideoActive").classed("_ideoActive",!1),ip.select("#"+t).attr("class","_ideogramLabel "+e),ip.select("#"+n+" > path").attr("class",e)}function oY(e,t){let n,i,r=e.target,o=e.type,a=Array.from(r.classList);if(a.includes("_ideogramLabel"))n=r.id,i=r.id.split("ideogramLabel_")[1],ip.select("#"+i+" path").dispatch(o);else{let e=r.parentElement;n="ideogramLabel_"+e.id,i=e.id,a.includes("_ideogramLabelRect")&&ip.select("#"+i+" path").dispatch(o)}"mouseout"===o&&(t.time.prevTooltipOff=performance.now(),t.time.prevTooltipAnnotDomId=i),"mouseover"===o?(clearTimeout(window._ideoActiveTimeout),oU("_ideoActive",n,i)):window._ideoActiveTimeout=window.setTimeout(function(){oU("",n,i)},250)}function oX(e,t){var n,i=!1;return t.annots.forEach(t=>{i||t.annots.forEach(t=>{i||t.name===e&&(n=t,i=!0)})}),n}function oK(e,t){var n,i,r,o,a,s,l=t.config;if(null===(n=document.querySelector("#"+e.domId)))return null;i=n.getBoundingClientRect(),r=document.querySelector("#_ideogram").getBoundingClientRect(),o=i$(e.name,t).width+(l.fontFamily?9:7);let c=l.annotLabelSize?l.annotLabelSize:13;return a=i.top-r.top+c-1,{top:a,bottom:a+c,right:(s=i.left-r.left-o)+o,left:s,width:o,height:c,name:name=e.name}}function oJ(e,t,n){var i;let r=oK(i=oX(e,this),this);null!==r&&!function(e,t,n){n.didSetLabelStyle||(document.querySelector("#_ideogramInnerWrap").insertAdjacentHTML("afterbegin",oz),n.didSetLabelStyle=!0);let i=oV(e),r=iE(n),o="pink"===e.color?"#CF406B":e.color;o=iD(o);let a=`translate(-${t.width+9},${t.height/2-1.5})`;ip.select("#"+e.domId).append("text").attr("id",i).attr("class","_ideogramLabel").attr("transform",`rotate(-90) ${a}`).style("font",r).style("fill",o).style("pointer-events",null).html(e.name);let s=t.width+10,l=`translate(-${s}, -${t.height/2})`;ip.select("#"+e.domId).append("rect").attr("class","_ideogramLabelRect").attr("transform",`rotate(-90) ${l}`).attr("width",t.width+10).attr("height",t.height).attr("style","opacity: 0")}(i,Object.assign(r,{backgroundColor:t,borderColor:n}),this)}function oQ(e=[],t=10){let n=this;e=JSON.parse(JSON.stringify(e)),n.clearAnnotLabels();let i=[],r=[];0===e.length&&(e=n.flattenAnnots()),e.forEach((e,t)=>{let o=oK(e,n);if(null===o)return void console.debug(e.name+" has null layout");r.length>0&&r.some((e,t)=>{let n=function(e,t,n){let i=e.left-0,r=t.left-0,o=e.right+n,a=t.right+n;return i<=r&&i<=a&&o<=a&&o>=r||i>=r&&i<=a&&o>=a&&o>=r||i<=r&&i<=a&&o>=a&&o>=r||i>=r&&i<=a&&o>=r&&o<=a}(e,o,0),i=function(e,t,n){let i=e.top-0,r=t.top-0,o=e.bottom+n,a=t.bottom+n;return i<=r&&i<=a&&o<=a&&o>=r||i>=r&&i<=a&&o>=a&&o>=r}(e,o,0);return n&&i})||(i.push(e),r.push(o))});let o=n.config;"relatedGenesMode"in o&&["hints"].includes(o.relatedGenesMode)&&(t=20),(i=i.sort(n.annotSortFunction).slice(0,t)).reverse(),i.forEach(e=>{n.addAnnotLabel(e.name)}),ip.selectAll(".annot").on("mouseover",e=>oY(e)).on("mouseout",e=>oY(e,n)).on("click",e=>oY(e))}function oZ(e){let t=oV(oX(e,this));document.querySelector("#"+t).remove()}function o0(){document.querySelectorAll("._ideogramLabel").forEach(e=>{e.remove()})}function o1(e){var t,n,i,r=!1,o=new Date().getTime();return n=this.chromosomes[this.config.taxid],"histogramScaling"in this.config==!1&&(this.config.histogramScaling="absolute"),void 0===this.maxAnnotsPerBar&&(this.maxAnnotsPerBar={},r=!0),!function(e,t,n){var i,r,o,a,s,l,c;if(t||"relative"===n.config.histogramScaling){for(r=0,i=0;r<e.length;r++){for(l=0,o=0,a=e[r].annots,s=e[r].chr;l<a.length;l++)(c=a[l].count)>o&&(o=c),c>i&&(i=c);n.maxAnnotsPerBar[s]=o}n.maxAnnotsPerBarAllChrs=i}}(i=function(e,t,n,i){var r,o,a,s,l,c,u,d,h,f,p=i.config.barWidth;for(s=0;s<e.length;s++)for(l=0,r=e[s].annots,a=t[(o=n[e[s].chr]).chrIndex].annots;l<r.length;l++)for(d=0,u=(c=r[l]).px-i.bump;d<a.length;d++)if(f=(h=a[d].px)+p,d===a.length-1&&(f+=p),u>=h&&u<f){t[o.chrIndex].annots[d].count+=1,t[o.chrIndex].annots[d].annots.push(c);break}return t}(e,i=function(e,t){var n,i,r,o,a,s,l,c=t.config.barWidth,u=[];for(a=0;a<t.chromosomesArray.length;a++){for(s=0,r=Math.round((i=e[n=t.chromosomesArray[a].name]).bands[i.bands.length-1].px.stop/c),o={chr:n,annots:[]};s<r;s++)l=s*c-t.bump,o.annots.push({bp:t.convertPxToBp(i,l+t.bump),px:l,count:0,chrIndex:i.chrIndex,chrName:n,color:t.config.annotationsColor,annots:[]});u.push(o)}return u}(n,this),n,this),r,this),i=function(e,t){var n,i,r,o,a,s,l,c=t._layout._isRotated;for(n=0;n<e.length;n++)for(o=0,i=e[n].annots,r=e[n].chr;o<i.length;o++)a=i[o].count,s="relative"===t.config.histogramScaling?a/t.maxAnnotsPerBar[r]:a/t.maxAnnotsPerBarAllChrs,isNaN(l=!1===c?s*t.config.chrMargin:s*t.config.chrHeightOriginal*3)&&(l=0),e[n].annots[o].height=l;return e}(i,this),t=new Date().getTime(),this.config.debug&&console.log("Time spent in getHistogramBars: "+(t-o)+" ms"),this.bars=i,i}var o2="#_ideogramLegend {font: 12px Arial; overflow: auto; cursor: default;} #_ideogramLegend svg {float: left;} #_ideogramLegend ul {position: relative; left: -14px; list-style: none; float: left; padding-left: 10px; margin: 0 0 1em 0; width: auto; border: none;} #_ideogramLegend li {float: none; margin: 0;}#_ideogramLegend ul span {position: relative; left: -15px;} ";function o5(e,t){var n,i='fill="'+e.color+'" style="stroke: #AAA;"',r=e.shape;if("shape"in e&&["circle","triangle"].includes(r)){if("circle"===r)n='<path d="m2,9a 4.5,4.5 0 1,0 9,0a 4.5,4.5 0 1,0 -9,0" '+i+"></path>";else if("triangle"===r){var o="";"vertical"===t.config.orientation&&(o=' transform="rotate(90, 7, 7)"'),"down"===t.config.orientation&&(o=' transform="rotate(180, 7, 7)"'),n='<path d="m7,3 l -5 9 l 9 0 z"'+o+" "+i+"></path>"}}else n='<rect height="10" width="10" y="3" '+i+"/>";return n}function o3(e){return 2*ib(i$("A",e).height)+.5}function o8(e){var t,n,i,r,o,a,s=e.config,l=o3(e);for(ip.select(s.container+" #_ideogramLegend").remove(),n=s.legend,a="",t=0;t<n.length;t++){o=n[t];let s=l;o.nameHeight&&(s=o.nameHeight);let c="";s&&(c=`style="height: ${s}px; position: relative; left: -${s-5}px;"`),"name"in o&&(r=`<li class="_ideoLegendName" ${c}>`+o.name+"</li>"),i='<svg id="_ideogramLegendSvg" width="'+l+'">',[r,i]=function(e,t,n,i,r){var o,a,s,l=o3(r);for(o=0;o<n.rows.length;o++)e+='<li class="_ideoLegendEntry">'+(s=n.rows[o]).name+"</li>",a=l*(o-1)+i+1,"name"in n&&(a+=l),t+='<g transform="translate(0, '+a+')">'+o5(s,r)+"</g>";return[e,t]}(r,i,o,s,e),i+="</svg>",a+=i+"<ul>"+r+"</ul>"}var c=`font-family: ${s.fontFamily};`,u=`line-height: ${o3(e)}px;`;o2+=`#_ideogramLegend {${c} ${u}}`;var d=ip.select(s.container+" #_ideogramOuterWrap");d.append("style").html(o2),d.append("div").attr("id","_ideogramLegend").html(a)}function o4(e,t,n=!1,i=!1){var r,o,a=[],s=this.chromosomes[this.config.taxid];if(0===e.length){this.annots=[];return}if("annots"in e[0]||"values"in e[0])return this.drawProcessedAnnots(e,t);for(o in s)a.push({chr:o,annots:[]});a=function(e,t){var n,i,r,o;for(n=0;n<e.length;n++)for(i=0,r=e[n];i<t.length;i++)if(r.chr===t[i].chr){o=[r.name,r.start,r.stop-r.start],"color"in r&&o.push(r.color),"shape"in r&&o.push(r.shape),"placement"in r&&o.push(r.placement),t[i].annots.push(o);break}return t}(e,a),r=["name","start","length"],"color"in e[0]&&r.push("color"),"shape"in e[0]&&r.push("shape"),"placement"in e[0]&&r.push("placement"),this.rawAnnots={keys:r,annots:a};let l=this.processAnnotData(this.rawAnnots);i?this.annotsOther=l:this.annots=l,this.drawProcessedAnnots(l,t,n)}function o6(e,t,n=!1){if(this.onBeforeDrawAnnotsCallback&&this.onBeforeDrawAnnotsCallback(),n||ip.selectAll(this.selector+" .annot").remove(),void 0===t&&(t="tracks"),this.config.annotationsLayout&&(t=this.config.annotationsLayout),"legend"in this.config&&o8(this),/heatmap/.test(t))return void this.drawHeatmaps(e);!function(e,t,n){var i=t;if(!/heatmap/.test(e)&&"histogram"!==e){for(o=0,a=0;o<i.length;o++)a+=i[o].annots.length;a>2e3&&console.warn('Rendering more than 2000 annotations in Ideogram?\nTry setting "annotationsLayout" to "heatmap" or "histogram" in your Ideogram configuration object for better layout and performance.')}if("histogram"===e&&(t=n.getHistogramBars(t)),s=n.fillAnnots(t),r=ip.selectAll(n.selector+" .chromosome").data(s).selectAll("path.annot").data(function(e){return e.annots}).enter(),"tracks"===e)l={reverseTriangle:"m0,0 l -"+(u=c=n.config.annotationHeight)+" "+-2*u+" l "+2*u+" 0 z",triangle:"m0,0 l -"+u+" "+2*u+" l "+2*u+" 0 z",circle:"m -"+u+", "+u+"a "+u+","+u+" 0 1,0 "+2*u+",0a "+u+","+u+" 0 1,0 -"+2*u+",0",rectangle:"m0,0 l 0 "+2*u+"l "+u+" 0l 0 -"+2*u+"z",span:" ",histo:" "},(d=r.append("g").attr("id",function(e){return e.domId}).attr("class","annot").attr("transform",function(e){if("span"!==e.shape&&"histo"!==e.shape){var t=n.config.chrWidth+e.placement*c*2;if(e.placement<0)var t=(e.placement+1)*c*2;return"translate("+e.px+","+t+")"}}).attr("fill",function(e){return e.color})).filter(function(e){return"span"===e.shape||"histo"==e.shape}).on("mouseover",function(e,t){n.showAnnotTooltip(t,this)}).on("mouseout",function(){n.startHideAnnotTooltipTimeout()}).on("click",function(e,t){n.onClickAnnot(t)}).append("polygon").attr("points",function(e){var t=e.startPx,i=e.stopPx,r=2*n.config.annotationHeight,o=n.config.chrWidth+e.placement*r;if("span"===e.shape){if(e.placement<0)var o=r+(e.placement-1)*r;var a=[`${t},${o+r}`,`${i},${o+r}`,`${i},${o}`,`${t},${o}`];return a.join(" ")}if("histo"===e.shape){if(e.placement>=0)var a=[`${t},${o}`,`${i},${o}`,`${i},${o+e.height}`,`${t},${o+e.height}`];else if(e.placement<0)var o=(e.placement+1)*r,a=[`${t},${o-e.height}`,`${i},${o-e.height}`,`${i},${o}`,`${t},${o}`];return a.join(" ")}}),d.filter(function(e){return"span"!==e.shape&&"histo"!==e.shape}).append("path").attr("d",function(e){if(e.shape&&"triangle"!==e.shape)if("circle"===e.shape)return l.circle;else if("rectangle"===e.shape)return l.rectangle;else if("span"===e.shape)return l.span;else if("histo"===e.shape)return l.histo;else return e.shape;return e.placement<0?l.reverseTriangle:l.triangle}).on("mouseover",function(e,t){n.showAnnotTooltip(t,this)}).on("mouseout",function(){n.startHideAnnotTooltipTimeout()}).on("click",function(e,t){n.onClickAnnot(t)});else if("overlay"===e)r.append("polygon").attr("id",function(e){return e.id}).attr("class","annot").attr("points",function(e){var t,i,r=n.config.chrWidth;return e.stopPx-e.startPx>1?(t=e.startPx,i=e.stopPx):(t=e.px-.5,i=e.px+.5),t+","+r+" "+i+","+r+" "+i+",0 "+t+",0"}).attr("fill",function(e){return e.color}).on("mouseover",function(e,t){n.showAnnotTooltip(t,this)}).on("mouseout",function(){n.startHideAnnotTooltipTimeout()});else if("histogram"===e){var r,o,a,s,l,c,u,d,h,f,p={},m=n.config.chrWidth;for(f in h=n.chromosomes[n.config.taxid])p[f]=h[f];r.append("polygon").attr("class","annot").attr("points",function(e){var t,i,r,o;return t=e.px+n.bump,i=e.px+n.config.barWidth+n.bump,r=m+e.height,i>(o=p[e.chr])&&(i=o),t+","+m+" "+i+","+m+" "+i+","+r+" "+t+","+r}).attr("fill",function(e){return e.color})}else"span"===e&&r.append("g").attr("id",function(e){return e.domId}).attr("class","annot").append("polygon").attr("points",function(e){var t=2*n.config.annotationHeight,i=e.startPx,r=e.stopPx,o=n.config.chrWidth+e.placement*t;return`${i},${o+t} ${r},${o+t} ${r},${o} ${i},${o}`}).attr("fill",function(e){return e.color}).on("mouseover",function(e,t){n.showAnnotTooltip(t,this)}).on("mouseout",function(){n.startHideAnnotTooltipTimeout()}).on("click",function(e,t){n.onClickAnnot(t)})}(t,e,this),this.onDrawAnnotsCallback&&this.onDrawAnnotsCallback()}function o9(e,t,n){return e.append("g").attr("class","syntenicRegion").attr("id",t).on("click",function(){var e=this,t=ip.selectAll(n.selector+" .syntenicRegion").filter(function(){return this!==e});t.classed("hidden",!t.classed("hidden"))}).on("mouseover",function(){var e=this;ip.selectAll(n.selector+" .syntenicRegion").filter(function(){return this!==e}).classed("ghost",!0)}).on("mouseout",function(){ip.selectAll(n.selector+" .syntenicRegion").classed("ghost",!1)})}function o7(e,t,n,i,r,o){var a,s;a="color"in o?o.color:"#CFC",s="opacity"in o?o.opacity:1,e.append("polygon").attr("points",t+", "+i.startPx+" "+t+", "+i.stopPx+" "+n+", "+r.stopPx+" "+n+", "+r.startPx).style("fill",a).style("fill-opacity",s)}function ae(e,t,n=null){if(i=e.r1,r=e.r2,"string"==typeof i.chr){let e=t.config.taxids;t.config.multiorganism?(i.chr=t.chromosomes[e[0]][i.chr],r.chr=t.chromosomes[e[1]][r.chr]):(i.chr=t.chromosomes[e[0]][i.chr],r.chr=t.chromosomes[e[0]][r.chr])}var i,r,o,a,s=document.querySelector("#"+i.chr.id+"-chromosome-set"),l=s.getCTM().e,c=s.getCTM().f,u=document.querySelector("#"+r.chr.id+"-chromosome-set"),d=u.getCTM().e,h=u.getCTM().f;return null===n?"vertical"===t.config.orientation?(o=c-12,a=h-12):(o=l,a=d):(o=n,a=n),i.startPx=t.convertBpToPx(i.chr,i.start)+o,i.stopPx=t.convertBpToPx(i.chr,i.stop)+o,r.startPx=t.convertBpToPx(r.chr,r.start)+a,r.stopPx=t.convertBpToPx(r.chr,r.stop)+a,[i,r]}function at(e){var t,n,i,r,o,a=new Date().getTime(),s=this.config;if(this.syntenicRegions=e,s.multiorganism&&"collinear"===s.geometry)if("vertical"===s.orientation)return t=new Date().getTime(),void(!function(e,t,n){var i,r,o,a,s,l,c,u;for(i=0;i<e.length;i++)r=e[i],[o,a]=ae(r,n),s=o9(t,o.chr.id+"_"+o.start+"_"+o.stop+"___"+a.chr.id+"_"+a.start+"_"+a.stop,n),o7(s,c=(l=n.config.chrWidth)+51,u=l+245,o,a,r),s.append("line").attr("class","syntenyBorder").attr("x1",c).attr("x2",u).attr("y1",o.startPx).attr("y2",a.startPx),s.append("line").attr("class","syntenyBorder").attr("x1",c).attr("x2",u).attr("y1",o.stopPx).attr("y2",a.stopPx)}(e,ip.select(this.selector).insert("g",":first-child").attr("class","synteny"),this),n=new Date().getTime(),this.config.debug&&console.log("Time in drawSyntenicRegions: "+(n-t)+" ms"));else return i=new Date().getTime(),void(!function(e,t,n){var i,r,o,a,s,l,c,u;for(i=0;i<e.length;i++)r=e[i],[o,a]=ae(r,n),s=o9(t,o.chr.id+"_"+o.start+"_"+o.stop+"___"+a.chr.id+"_"+a.start+"_"+a.stop,n),function(e,t,n,i,r,o){var a,s;a="color"in o?o.color:"#CFC",s="opacity"in o?o.opacity:1,e.append("polygon").attr("points",i.startPx-15+", "+t+" "+(i.stopPx-15)+", "+t+" "+(r.stopPx-15)+", "+n+" "+(r.startPx-15)+", "+n).style("fill",a).style("fill-opacity",s)}(s,c=(l=n.config.chrWidth)+31,u=l+191,o,a,r),s.append("line").attr("class","syntenyBorder").attr("x1",o.startPx-15).attr("x2",a.startPx-15).attr("y1",c).attr("y2",u),s.append("line").attr("class","syntenyBorder").attr("x1",o.stopPx-15).attr("x2",a.stopPx-15).attr("y1",c).attr("y2",u)}(e,ip.select(this.selector).insert("g",":first-child").attr("class","synteny"),this),r=new Date().getTime(),this.config.debug&&console.log("Time in drawSyntenicRegions: "+(r-i)+" ms"));!function(e,t,n,i){var r,o,a,s,l,c,u,d,h;for(r=0;r<e.length;r++)o=e[r],[a,s]=ae(o,i,n),c=o9(t,l=a.chr.id+"_"+a.start+"_"+a.stop+"___"+s.chr.id+"_"+s.start+"_"+s.stop,i),u=i.config.chrWidth,o7(c,d=i._layout.getChromosomeSetYTranslate(0),h=i._layout.getChromosomeSetYTranslate(1)-u,a,s,o),function(e,t,n,i,r,o){var a,s;2>Math.abs(i.startPx-i.startPx)&&2>Math.abs(i.stopPx-i.stopPx)?(a=o.color,s=o.width):(a="",s=""),e.append("line").attr("class","syntenyBorder").attr("x1",t).attr("x2",n).attr("y1",i.startPx).attr("y2",r.startPx).style("stroke",a).style("stroke-width",s),e.append("line").attr("class","syntenyBorder").attr("x1",t).attr("x2",n).attr("y1",i.stopPx).attr("y2",r.stopPx).style("stroke",a).style("stroke-width",a)}(c,d,h,a,s,o),function(e,t,n,i,r,o){var a=o.split("__").map(e=>"label_"+e);if("name"in i){e.append("text").attr("id",a[0]).attr("y",i.startPx+3).text(i.name);var s=document.querySelector("#"+a[0]).getBoundingClientRect().width;ip.select("#"+a[0]).attr("x",t-15-s)}"name"in r&&e.append("text").attr("id",a[1]).text(r.name).attr("x",n+15).attr("y",r.startPx+3).text(r.name)}(c,d,h,a,s,l)}(e,ip.select(this.selector).insert("g",":first-child").attr("class","synteny"),this._layout.margin.left,this),o=new Date().getTime(),this.config.debug&&console.log("Time in drawSyntenicRegions: "+(o-a)+" ms")}function an(){this.config.numAnnotTracks=this.config.annotationsNumTracks,ip.selectAll(this.selector+" .annot").remove(),this.drawAnnots(this.processAnnotData(this.rawAnnots))}function ai(e){var t,n,i,r=this.rawAnnots.annots;return this.config.numAnnotTracks=e.length,t=function(e,t){var n,i,r,o,a,s,l;for(o=0,i=[];o<e.length;o++){for(s=0,r=e[o],a=[];s<r.annots.length;s++)l=(n=r.annots[s].slice())[3]+1,t.includes(l)&&(n[3]=t.indexOf(l),a.push(n));i.push({chr:r.chr,annots:a})}return i}(r,e),i={keys:this.rawAnnots.keys,annots:t},"collinear"===this.config.geometry&&iW(this),n=this.processAnnotData(i),ip.selectAll(this.selector+" .annot").remove(),this.displayedTrackIndexes=e,this.drawAnnots(n),n}function ar(e){var t,n;return(t=e.keys).length<4||"trackIndex"!==t[3]||"trackIndexOriginal"===t[4]||(n=function(e,t){var n,i,r,o,a,s,l,c=[];for(n=0,l=1;n<e.length;n++){for(i=0,r=e[n],a=[];i<r.annots.length;i++)(s=(o=r.annots[i].slice())[3])+1>l&&(l=s+1),o.splice(4,0,s),a.push(o);c.push({chr:r.chr,annots:a})}return t.numAvailTracks=l,c}(e.annots,this),t.splice(4,0,"trackIndexOriginal"),e={keys:t,annots:n},this.rawAnnots.metadata&&(e.metadata=this.rawAnnots.metadata)),e}var ao=[["F00"],["F00","88F"],["F00","CCC","88F"],["F00","FA0","0AF","88F"],["F00","FA0","CCC","0AF","88F"],["F00","FA0","875","578","0AF","88F"],["F00","FA0","875","CCC","578","0AF","88F"],["F00","FA0","7A0","875","0A7","578","0AF","88F"],["F00","FA0","7A0","875","CCC","0A7","578","0AF","88F"],["F00","FA0","7A0","875","552","255","0A7","578","0AF","88F"]];function aa(e,t){return"_c"+e+"_a"+t}function as(e){var t,n,i,r,o,a;return t=e.keys,e=e.annots,[n,i]=function(e,t,n){var i,r,o,a,s=[],l={};for(r=0,i=-1;r<e.length;r++){if(o=e[r],void 0===(a=n.chromosomes[n.config.taxid][o.chr])){console.warn('Chromosome "'+o.chr+'" undefined in ideogram; '+o.annots.length+" annotations not shown");continue}i++,s.push({chr:o.chr,annots:[]}),"heatmap-2d"!==n.config.annotationsLayout?[s,l]=function(e,t,n,i,r,o,a){var s,l,c,u;let d=!a.config.annotationsLayout||"tracks"===a.config.annotationsLayout;for(s=0;s<n.annots.length;s++){for(l=0,u=n.annots[s],c={};l<o.length;l++)c[o[l]]=u[l];if(a.config.heatmaps&&o.includes("trackIndex")){var h=u[o.indexOf("trackIndex")];c[a.config.heatmaps[h].key]=u[u.length-1]}c.stop=c.start+c.length,c.chr=n.chr,c.chrIndex=r,a.config.histogram&&(c.height=function(e,t){var n,i,r,o=e.rawAnnots.keys;i=[];for(var a=0;a<e.config.histogram.length;a++){var s=e.config.histogram[a].key;i.push(o.indexOf(s))}return n=t[o[i]],e.config.histogram&&(r=function(e,t,n){var i,r,o,a,s,l,c,e=n.config.histogram[0].thresholds;for(i=0;i<e.length;i++)r=e.length-1,!1===isNaN(s=parseFloat(a=(o=e[i])[0]))&&(a=s),0!==i&&(l=parseFloat(e[i-1][0])),oP(i,r,t,l,a)&&(c=parseFloat(o[1]));return c}(e.config.histogram.thresholds,n,e)),r}(a,c)),c.startPx=a.convertBpToPx(i,c.start),c.stopPx=a.convertBpToPx(i,c.stop),c.px=Math.round((c.startPx+c.stopPx)/2),d&&(c.domId=aa(r,s)),[e,t]=function(e,t,n,i,r,o,a){var s,l,c,u,d,h,f;return a.config.annotationTracks?(s=r,l=a.config.annotationTracks,e.trackIndex=n[3],(c=l[e.trackIndex]).color&&(e.color=c.color),c.shape&&(e.shape=c.shape),c.placement?e.placement=c.placement:e.placement=e.trackIndex,s[o].annots.push(e),r=s):"trackIndex"===t[3]&&1!==a.numAvailTracks?[r,i]=(u=i,d=r,h=ao[a.numAvailTracks-1],(e.trackIndex=n[3],e.trackIndexOriginal=n[4],e.color="#"+h[e.trackIndexOriginal],e.trackIndex>a.config.numTracks-1)?e.trackIndex in u?u[e.trackIndex].push(e):u[e.trackIndex]=[e]:d[o].annots.push(e),[d,u]):(f=r,e.trackIndex||(e.trackIndex=0),e.color||(e.color=a.config.annotationsColor),e.shape||(e.shape="triangle"),e.placement||(e.placement=e.trackIndex),f[o].annots.push(e),r=f),[r,i]}(c,o,u,t,e,r,a)}if(d)for(a.annotSortFunction?(e[r].annots=am(e[r].annots,a),e[r].annots.sort((e,t)=>-a.annotSortFunction(e,t))):e[r].annots.sort((e,t)=>e[1]-t[1]),s=0;s<e[r].annots.length;s++)e[r].annots[s].domId=aa(r,s);return[e,t]}(s,l,o,a,i,t,n):[s,l]=function(e,t,n,i,r,o,a){var s,l,c,u,d,h,f,p=a.config.heatmapThresholds;for(s=0;s<n.annots.length;s++){for(l=0,u=n.annots[s],(c={}).values=[];l<3;l++)c[o[l]]=u[l];for(l=3;l<o.length;l++)f=oI(p,u[l]),c.values.push(f);d=c.start+c.length,c.chr=n.chr,c.chrIndex=r,c.startPx=a.convertBpToPx(i,c.start),h=a.convertBpToPx(i,d),c.px=Math.round((c.startPx+h)/2),e.push(c)}return e.shift(),[e,t]}(s,l,o,a,i,t,n)}return[s,l]}(e,t,this),n=function(e,t){var n,i,r,o,a,s;for(i=0,n=e,e=[],s=t.chromosomesArray;i<s.length;i++)for(r=0,a=s[i].name;r<n.length;r++)(o=n[r]).chr===a&&e.push(o);return e}(n,this),o=this.config.annotationsLayout,a=this.config.numAnnotTracks,!/heatmap/.test(o)&&a>10&&console.error("Ideogram only displays up to 10 tracks at a time.  You specified "+a+" tracks.  Perhaps consider a different way to visualize your data."),(r=Object.keys(i).length)&&console.warn("Ideogram configuration specified "+a+" tracks, but loaded annotations contain "+r+" extra tracks."),n}class al{constructor(e,t){this.matrix=e,this.ideo=t}setRawAnnots(){var e,t,n;return e=this,t=this.ideo,n=this.matrix,new Promise(function(i){e.rawAnnots=e.fetchCoordinates(t).then(function(r){e.coordinates=r,i(e.parseExpressionMatrix(n,t))})})}fetchCoordinates(e){var t={};if("human"===e.config.organism){var n=e.config.dataDir+"../../annotations/Homo_sapiens,_Ensembl_80.tsv";return new Promise(function(i){e.fetch(n,"text").then(function(e){var n,r,o,a,s,l,c;for(r=0,n=e.split(/\r\n|\n/).slice(1);r<n.length;r++)[o,a,s,,l]=n[r].split(/\s/g),o=parseInt(o),c=(a=parseInt(a))-o,t[s]=[l,o,c];i(t)})})}throw Error("Expression matrix parsing is only supported for human")}parseAnnotFromTsvLine(e,t){var n,i,r,o,a,s,l=e.split(/\s/g);return(a=l[0])in this.coordinates==!1||(s=l.slice(1).map(e=>parseFloat(e)),[r,o,length]=this.coordinates[a],-1===(i=t.indexOf(r)))?[null,null]:[i,[a,o,length].concat(s)]}parseExpressionMatrix(e,t){var n,i,r,o,a,s=[],l=e.split(/\r\n|\n/);for(n=0,i=Object.keys(t.chromosomes[t.config.taxid]);n<i.length;n++)s.push({chr:i[n],annots:[]});for(n=1;n<l.length;n++)r=l[n],[o,a]=this.parseAnnotFromTsvLine(r,i),null!==o&&s[o].annots.push(a);return{keys:["name","start","length"].concat(l[0].split(/\s/g)),annots:s}}}function ac(){let e=this,t={};e.annots.forEach(n=>{n.annots.forEach(n=>{let i=e.annotDescriptions.annots[n.name];t[n.name]=[n.name,i.ensemblId,n.chr,n.start,n.stop,n.length,i.type]})});let n=[["# Gene name","Ensembl ID","Chromosome","Start","Stop","Length","Type"]].concat(Object.values(t)),i="data:text/plain;charset=utf-8,"+encodeURIComponent(e.annotDescriptions.headers+"\n#\n"+n.map(e=>e.join("	")).join("\n"));var r=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),o=document.createElement("a");o.setAttribute("download","ideogram.tsv"),o.setAttribute("href",i),o.setAttribute("target","_blank"),o.setAttribute("id","_ideo-undisplayed-dl-annots-link"),o.setAttribute("style","display: none;"),document.body.appendChild(o),o.dispatchEvent(r)}function au(){var e,t,n=this.config;((t=this.config).annotationHeight||("heatmap"===t.annotationsLayout?e=t.chrWidth-1:(e=Math.round(t.chrHeight/100))<3&&(e=3),this.config.annotationHeight=e),n.annotationsPath||n.localAnnotationsPath||this.annots||n.annotations)?(n.annotationTracks?this.config.numAnnotTracks=n.annotationTracks.length:n.annotationsNumTracks?this.config.numAnnotTracks=n.annotationsNumTracks:this.config.numAnnotTracks=1,this.config.annotTracksHeight=n.annotationHeight*n.numAnnotTracks,void 0===n.barWidth&&(this.config.barWidth=3)):(this.config.annotTracksHeight=0,this.config.numAnnotTracks=0),void 0===n.annotationsColor&&(this.config.annotationsColor="#F00"),n.onClickAnnot&&(this.onClickAnnotCallback=n.onClickAnnot),!1!==n.showAnnotTooltip&&(this.config.showAnnotTooltip=!0),n.onWillShowAnnotTooltip&&(this.onWillShowAnnotTooltipCallback=n.onWillShowAnnotTooltip),n.onDidShowAnnotTooltip&&(this.onDidShowAnnotTooltipCallback=n.onDidShowAnnotTooltip),!1!==n.addAnnotLabel&&(this.config.addAnnotLabel=!0),n.onWillAddAnnotLabel&&(this.onWillAddAnnotLabelCallback=n.onWillAddAnnotLabel)}function ad(){var e=this.config;this.rawAnnots.annots=this.rawAnnots.annots.sort(Ideogram.sortChromosomes),this.onLoadAnnotsCallback&&this.onLoadAnnotsCallback(),("heatmapThresholds"in e||"metadata"in this.rawAnnots&&"heatmapThresholds"in this.rawAnnots.metadata)&&("heatmap"===e.annotationsLayout?function(e){var t,n,i,r,o,a,s=e.config.heatmapThresholds;for(i=[],n=(o=e.rawAnnots).keys.slice(3),r=[],a=[],(o.metadata||!isNaN(s[0]))&&(s=o$(e)),t=0;t<n.length;t++)i.push({key:n[t],thresholds:s}),r.push({id:n[t]}),a.push(t+1);e.config.annotationsNumTracks=n.length,e.config.annotationsDisplayedTracks=a,e.config.heatmaps=i,e.config.annotationTracks=r}(this):"heatmap-2d"===e.annotationsLayout&&(this.config.heatmapThresholds=o$(this))),e.heatmaps&&this.deserializeAnnotsForHeatmap(this.rawAnnots),function(e){let t={},n=[],i=e.rawAnnots.annots.map(e=>e.chr);if(i.forEach(e=>{e in t&&n.push(e),t[e]=1}),n.length>0)throw Error(`Duplicate chromosomes detected.
Chromosome list: ${i}.  Duplicates: ${n}.
To fix this, edit your raw annotations JSON data to remove redundant chromosomes.`)}(this)}function ah(){return this.annots.reduce((e,t)=>[...e,...t.annots],[])}function af(e){var t,n,i,r,o=this;r="heatmap-2d"===o.config.annotationsLayout;var i=!1===["bed","json","tsv"].includes(n=(t=e.split("?")[0].split("."))[t.length-1])?void alert("Ideogram.js only supports BED and Ideogram JSON and TSV at the moment.  Sorry, check back soon for "+(n=n.toUpperCase())+" support!"):n;if("http"!==e.slice(0,4)&&!r&&"tsv"!==i)return void o.fetch(e).then(function(e){o.rawAnnotsResponse=e,o.rawAnnots=e,o.afterRawAnnots()});i=r?"":i,o.fetch(e,"text").then(function(e){o.rawAnnotsResponse=e,r?new al(e,o).setRawAnnots().then(function(e){o.rawAnnots=e,o.afterRawAnnots()}):("tsv"===i?o.rawAnnots=new oL(e,o).rawAnnots:"bed"===i?o.rawAnnots=new ok(e,o).rawAnnots:o.rawAnnots=JSON.parse(e),o.afterRawAnnots())})}function ap(e){var t,n,i,r,o,a,s;for(r=0,t=[],n=[],i=this.chromosomesArray;r<i.length;r++)o=i[r].name,n.push(o),t.push({chr:o,annots:[]});for(r=0;r<e.length;r++)a=e[r],-1!==(s=n.indexOf(a.chr))&&(t[s]=a);return t}function am(e,t){if(0===e.length)return e;if("initRank"in e[0]!=!1)return e.map(e=>(e.rank=e.initRank,e));{if("geneCache"in Ideogram==!1)return e;let t=Ideogram.geneCache.interestingNames;return e.map(e=>(t.includes(e.name)?e.rank=t.indexOf(e.name)+1:e.rank=1e10,e))}}function ag(e,t="red"){let n=this,i=n.config.taxid,r=e.map(e=>{let r=n.chromosomes[i][e].id,o=`${n.selector} #${r}-chromosome-set`,a=document.querySelector(o),s=a.getBoundingClientRect(),l=`style="
      stroke-width: 1px;
      stroke: ${t};
      fill: ${t};
      fill-opacity: 0.05;
      position: absolute;
      rx: 4;
      ry: 4;
      height: ${s.width+15}px;
      width: ${s.height+15}px"`,c=a.transform.baseVal[1].matrix.f-7.5,u=`transform="rotate(90) translate(10, ${c})"`,d=`id="ideo-highlight-${r}"`;return`<rect class="ideo-highlight" ${d} ${l} ${u}/>`}).join();document.querySelector(n.selector).insertAdjacentHTML("afterBegin",r)}function ay(e){let t=this,n=`${t.selector} .ideo-highlight`;if(void 0!==e){let i=t.config.taxid;n=e.map(e=>{let n=t.chromosomes[i][e].id;return`${t.selector} #ideo-highlight-${n}`})}document.querySelectorAll(n).forEach(e=>{e.remove()})}var av="&api_key=7e33ac6a08a6955ec3b83d214d22b21a2808",ab="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/",aw=ab+"esearch.fcgi?retmode=json"+av,ax=ab+"esummary.fcgi?retmode=json"+av,aA=ab+"elink.fcgi?retmode=json"+av;function aC(e,t){var n,i,r=this;e=r.config.organism,i=r.esummary+"&db=taxonomy&id="+e,ip.json(i).then(function(i){return n=i.result[String(e)].commonname,r.config.organism=n,t(n)})}function a_(e){var t,n,i,r,o,a,s,l,c;if(t="taxid"in this.config,this.config.multiorganism="organism"in this.config&&this.config.organism instanceof Array||t&&this.config.taxid instanceof Array,this.config.multiorganism&&(this.coordinateSystem="bp"),"organism"in this.config){let t=this.config.organism;"string"==typeof t&&(this.config.organism=iL(t.toLowerCase())),n=this,(l=n.config,i=[],r={},(function(e,t){var n,i,r=[],o={};for(i=0;i<e.length;i++)r.push(!1===function(e,t){var n,i;for(n in t.organisms)if(i=t.organisms[n],n===iL(e)||iL(i.commonName)===iL(e)||iL(i.scientificName)===iL(e))return!0;return!1}(n=e[i],t)?(function(e,t){var n;return n=t.esearch+"&db=taxonomy&term="+e,ip.json(n).then(function(t){if(0!==t.esearchresult.idlist.length)return[e,t.esearchresult.idlist[0]];throw'Organism "'+e+"\" is generally unknown; it was not found in the NCBI Taxonomy database.  If you did not intend to specify a novel or custom taxon, then try using the organism's scientific name, e.g. Homo sapiens or Arabidopsis thaliana."})})(n,t).then(function(e){var n,i,r=e[1];i=(n=e[0].replace("-"," "))[0].toUpperCase()+n.slice(1),o[r]={scientificName:i,commonName:"",assemblies:{default:""}},Object.assign(t.organisms,o)},function(e){console.warn(e);var i={scientificName:n,commonName:n,assemblies:{default:""}};t.organisms["-1"]=i,o["-1"]=i}):new Promise(function(e){var i=t.getTaxid(n);o[i]=t.organisms[i],e()}));return Promise.all(r).then(function(){return o})})(l.multiorganism?l.organism:[l.organism],n).then(function(e){var t=e[a];for(a in e)t=e[a],i.push(a),l.multiorganism&&(void 0!==l.chromosomes?((s=Object.keys(l.chromosomes).map(e=>iL(e))).includes(iL(t.scientificName))?o=t.scientificName:s.includes(iL(t.commonName))&&(o=t.commonName),iL(o)in l.chromosomes?r[a]=l.chromosomes[iL(o)]:r[a]=l.chromosomes[o.toLowerCase()]):r=null);return[r,i]})).then(function([t,i]){var r,o,a,s,l,c=n.config,u=[];for(r=0;r<i.length;r++)o=i[r],l=Object.values(s=n.organisms[o].assemblies),""===s.default||n.assemblyIsAccession()&&!l.includes(c.assembly)?a=new Promise(function(e){!function(e,t,n){var i,r,o,a,s,l=n.config;(function(e,t){if(t.assemblyIsAccession())return new Promise(function(n){t.coordinateSystem="bp",t.getAssemblyAndChromosomesFromEutils(e,n)});n=t.config.dataDir,i=iL(t.organisms[e].scientificName);var n,i,r=[e];["9606","10090","10116"].includes(e)&&!t.config.showFullyBanded&&(i+="-no-bands");var o=n+i+".json";return new Promise((e,t)=>iy(o).then(t=>t.json().then(function(t){e(t)})).catch(e=>{t(e)})).then(function(n){var i,o,a,s,l=n.chrBands,c=[""],u=[],d={};t.bandData[n.taxid]=l;for(var h=0;h<l.length;h++)i=(a=l[h].split(" "))[0],s=a.slice(-1)[0],i in d||(u.push({name:i,type:"nuclear",length:s}),d[i]=1);return u=u.sort(Ideogram.sortChromosomes),o={bp:0,iscn:0},u.forEach(e=>{e.length>o.bp&&(o.bp=e.length)}),t.maxLength[e]=o,c.push(u),c.push(r),c},function(){return new Promise(function(n){t.coordinateSystem="bp",t.getAssemblyAndChromosomesFromEutils(e,n)})})})(e,n).then(function(c){i=c[0],r=c[1],"chromosomes"in l==!1||null===l.chromosomes?(n.config.chromosomes={},n.config.chromosomes[e]=r):(l.multiorganism?e in l.chromosomes?o=l.chromosomes[e]:(a=iL(n.getScientificName(e)),n.config.chromosomes[e]=l.chromosomes[a].slice(),o=n.config.chromosomes[e]):o=l.chromosomes,s=r.filter(e=>o.includes(e.name)),n.config.chromosomes[e]=s),n.chromosomes[e]=n.config.chromosomes[e].slice(),n.organisms[e].assemblies={default:i},t()})}(o,e,n)}):(n.config.taxids=i,n.config.multiorganism&&(n.config.chromosomes=t),a=new Promise(function(e){e()})),u.push(a);Promise.all(u).then(function(){return i=function(e){var t,n,i;if(t=e.config.organism,n=[],Array.isArray(t))for(i=0;i<t.length;i++)n.push(e.getTaxid(t[i]));else n.push(e.getTaxid(t));return n}(n),n.config.taxids=i,e(i)})})}else this.config.multiorganism?t&&(c=this.config.taxid):(t&&(c=[this.config.taxid]),this.config.taxids=c),e(c)}function aS(e,t){var n,i,r=this,o=(n=r.assemblyIsAccession()?r.config.assembly+"%22[Assembly%20Accession]":e+"%22[taxid]AND%20(%22latest%20refseq%22[filter])%20",r.esearch+"&db=assembly&term=%22"+n+"AND%20(%22chromosome%20level%22[filter]%20OR%20%22complete%20genome%22[filter])");ip.json(o).then(function(e){var t,n;return t=e.esearchresult.idlist[0],n=r.esummary+"&db=assembly&id="+t,ip.json(n)}).then(function(e){var t,n=e.result.uids[0];return i=e.result[n],t="&db=nuccore&dbfrom=assembly&linkname=assembly_nuccore&cmd=neighbor_history&from_uid="+n,ip.json(r.elink+t).then(function(e){return t="&db=nuccore&term=%231+AND+%28sequence_from_chromosome[Properties]+OR+sequence_from_plastid[Properties]+OR+sequence_from_mitochondrion[Properties]%29&WebEnv="+e.linksets[0].webenv+"&usehistory=y&retmax=1000",r.esearch+t})}).then(function(e){return ip.json(e)}).then(function(e){var t,n;return t=e.esearchresult.idlist.join(","),n=r.esummary+"&db=nucleotide&id="+t,ip.json(n)}).then(function(n){var o=function(e,t,n){var i,r,o,a,s={},l=[];for(i in e)"uids"!==i&&(o=(r=function(e,t){var n,i;return[n,i]=function(e,t){var n,i,r,o,a=e.genome;return"mitochondrion"===a?t.config.showNonNuclearChromosomes?(n=e.genome,[-1===(i=e.subtype.split("|").indexOf("plasmid"))?"MT":e.subname.split("|")[i],n]):[null,null]:"chloroplast"===a||"plastid"===a?t.config.showNonNuclearChromosomes?["CP","chloroplast"]:[null,null]:"apicoplast"===a?t.config.showNonNuclearChromosomes?["AP","apicoplast"]:[null,null]:(r=e.subtype.split("|").indexOf("chromosome"),void 0!==(o=e.subname.split("|")[r])&&"chr"===o.substr(0,3)&&(o=o.substr(3)),[o,"nuclear"])}(e,t),{name:n,length:e.slen,type:i}}(e[i],n)).name+"_"+r.length,null!==r.type&&o in s==!1&&l.push(r),s[o]=1);return l=l.sort(Ideogram.sortChromosomes),a={bp:0,iscn:0},l.forEach(e=>{e.length>a.bp&&(a.bp=e.length)}),a.bp>n.maxLength.bp&&(n.maxLength.bp=a.bp),n.maxLength[t]=a,n.coordinateSystem="bp",l}(n.result,e,r);return t([i,o])},function(e){console.warn(e)})}function ak(){var e=this.bandsToShow.join(",");0!==this.bandsToShow.length&&(ip.selectAll(this.selector+" .bandLabel, .bandLabelStalk").style("display","none"),ip.selectAll(e).style("display",""))}function aL(e,t,n,i,r,o,a){var s,l;return n<i+(a?t:r)?(t=r,s=o,l=a):e.push(o),[e,t,s,l]}function aT(e,t){var n,i,r,o,a,s,l;for(i=0,this.bandsToShow=[];i<e.length;i++){for(r=0,o=function(e,t){var n,i,r,o,a,s=[],l=e[t.id].length,c=0;for(n=0;n<l;n++)r=e[t.id][n],[s,c,i,a]=aL(s,c,r,5,o,n,!0),a||(o=function(e,t,n,i,r){return t!==n&&(e=i[r.id][n]+36),e}(o,i,n,e,t),[s,c,i,a]=aL(s,c,r,5,o,n,!1));return s}(t,a=e[i]),s=[],l=o.length;r<l;r++)n=o[r],s.push("#"+a.id+" .bsbsl-"+n);this.bandsToShow=this.bandsToShow.concat(s)}}function aM(e,t,n,i){var r=this,o=r._layout,a=n.chrIndex;return e.selectAll("text").data(t).enter().append("g").attr("class",function(e,t){return"bandLabel bsbsl-"+t}).attr("transform",function(e){var t=o.getChromosomeBandLabelTranslate(e,a);return"horizontal"===r.config.orientation?i[n.id].push(t.x+13):i[n.id].push(t.y+6),t.translate}).append("text").attr("text-anchor",o.getChromosomeBandLabelAnchor(a)).text(function(e){return e.name}),i}function aE(e,t,n,i){var r=this;e.selectAll("line.bandLabelStalk").data(t).enter().append("g").attr("class",function(e,t){return"bandLabelStalk bsbsl-"+t}).attr("transform",function(e){var t;return t=r.round(e.px.start+e.px.width/2),i[n.id].push(t+13),"translate("+t+",-10)"}).append("line").attr("x1",0).attr("y1",r._layout.getChromosomeBandTickY1(n.chrIndex)).attr("x2",0).attr("y2",r._layout.getChromosomeBandTickY2(n.chrIndex))}function a$(e){var t,n,i,r,o,a={};for(t=0,r=function(e){var t,n,i=[];for(t in e)for(n in e[t])i.push(e[t][n]);return i}(e);t<r.length;t++)i=r[t],n=ip.select(this.selector+" #"+i.id),a[i.id]=[],o=i.bands.filter(e=>"pter"!==e.name),a=this.drawBandLabelText(n,o,i,a),this.drawBandLabelStalk(n,o,i,a);this.setBandsToShow(r,a)}function aP(){var e="";return e=function(e){var t,n,i,r,o,a="";for(t=0;t<e.length;t++)[n,i,r,o]=function(e,t){var n,i;return n=t[e][0],i=t[e][1],[n,i,t[e][2],t[e][3]]}(t,e),a+='<linearGradient id="'+n+'" x1="0%" y1="0%" x2="0%" y2="100%">',"gneg"===n?a+='<stop offset="70%" stop-color="'+r+'" /><stop offset="95%" stop-color="'+o+'" /><stop offset="100%" stop-color="'+i+'" />':a+='<stop offset="5%" stop-color="'+i+'" /><stop offset="15%" stop-color="'+r+'" /><stop offset="60%" stop-color="'+o+'" />',a+="</linearGradient>";return a}(h)+'<pattern id="stalk" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#CCE" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#88B; stroke-width:0.7;" /></pattern><pattern id="gvar" width="2" height="1" patternUnits="userSpaceOnUse" patternTransform="rotate(-30 0 0)"><rect x="0" y="0" width="10" height="2" fill="#DDF" /> <line x1="0" y1="0" x2="0" y2="100%" style="stroke:#99C; stroke-width:0.7;" /></pattern>',e=`<style>${iO}</style>`+(e="<defs>"+e+"</defs>")}function aI(e){var t,n,i,r=this.config,o=new Date().getTime();return n=[],"chromosomes"in r&&(i=r.multiorganism?r.chromosomes:e in r.chromosomes?r.chromosomes[e].slice():r.chromosomes.slice()),n=function(e,t,n,i){var r,o;if(e in i.bandData||e in ih&&!1===i.assemblyIsAccession())n=function(e,t,n,i){var r,o,a;for(t=Object.keys(r=function(e,t,n){var i,r,o,a,s,l,c,u,d,h,f,p={};Array.isArray(f=n.bandData[e])&&(h="native"),t=function(e){var t,n;if(e instanceof Array&&"object"==typeof e[0]){for(n=0,t=[];n<e.length;n++)t.push(e[n].name);e=t}return e}(t);var m=(i=h,"undefined"==typeof chrBands&&"native"!==i?(r=/\t/,o=f.split(/\r\n|\n/),a=1):(r=/ /,o=f,a=0),[r,o,a]);for(s=m[0],l=m[1],u=d=m[2];u<l.length;u++)!function(e,t,n,i){var r,o,a,s,l,c=i.config.multiorganism;return null!=e&&(o=(r=Array.isArray(e))&&-1===e.indexOf(t),a="object"==typeof e,!!r&&!a&&!!o||(n in e!=!1||!c)&&(c?"string"==typeof e[n][0]?!1===e[n].includes(t):0===e[n].filter(e=>e.name===t).length:0===e.filter(e=>e===t).length))}(t,(c=l[u].split(s))[0],e,n)&&(p=function(e,t,n){var i,r,o,a;return(i=t[0])in e==!1&&(e[i]=[]),a=t[7],t[8]&&(a+=t[8]),r=a,o={chr:i,bp:{start:parseInt(t[5],10),stop:parseInt(t[6],10)},iscn:{start:parseInt(t[3],10),stop:parseInt(t[4],10)},px:{start:-1,stop:-1,width:-1},name:t[1]+t[2],stain:r,taxid:n},e[i].push(o),e}(p,c,e));return p}(e,t,i)).sort(Ideogram.sortChromosomes),(("chromosomes"in i.config)==!1||null===i.config.chromosomes)&&(i.config.chromosomes={}),t.length>0&&(i.config.chromosomes[e]=t.slice()),i.numChromosomes+=i.config.chromosomes[e].length,o=0;o<t.length;o++)a=function(e,t,n,i){var r,o,a=[];return a.push(r=t[e]),o={iscn:r[r.length-1].iscn.stop,bp:r[r.length-1].bp.stop},n in i.maxLength==!1&&(i.maxLength[n]={bp:0,iscn:0}),o.iscn>i.maxLength[n].iscn&&(i.maxLength[n].iscn=o.iscn,o.iscn>i.maxLength.iscn&&(i.maxLength.iscn=o.iscn)),o.bp>i.maxLength[n].bp&&(i.maxLength[n].bp=o.bp,o.bp>i.maxLength.bp&&(i.maxLength.bp=o.bp)),a}(t[o],r,e,i),n=n.concat(a);return n}(e,t,n,i);else for(i.numChromosomes+=t.length,o=0;o<t.length;o++)(r=t[o]).length>i.maxLength.bp&&(i.maxLength.bp=r.length);return n}(e,i,n,this),t=new Date().getTime(),this.config.debug&&console.log("Time in processBandData: "+(t-o)+" ms"),[e,n]}function aD(){call(this.onBrushMoveCallback)}function aN(){call(this.onBrushEndCallback)}function aF(e,t,n){var i,r,o,a,s,l,c,u,d,h,f,p,m,g,y,v,b,w,x,A=this.config.chrWidth+6.5,C=this._layout.margin.left;[e,t,n]=(i=e,r=t,o=n,a=i.split(":"),s=i.split("-"),a.length>1&&s.length>1&&(i=a[0].replace("chr",""),r=parseInt((s=a[1].split("-"))[0]),o=parseInt(s[1]-1)),[i,r,o]),v=function(e,t){var n,i;for(n=0;n<t.chromosomesArray.length;n++)if((i=t.chromosomesArray[n]).name===e)return i}(e,this),[w,x]=function(e,t){var n,i,r=[1],o=[1],a=e.bands.slice(-1)[0];for(i=0;i<e.bands.length;i++)r.push((n=e.bands[i]).bp.start),o.push(n.px.start+t);return r.push(a.bp.stop-1),o.push(a.px.stop+t),[r,o]}(v,C),b=v.bands.slice(-1)[0].bp.stop,void 0===t&&(t=Math.floor(b/10)),void 0===n&&(n=Math.ceil(2*t)),l=this,u=l.config.chrHeight,c=ip.scaleLinear().domain(w).range(x),l.brush=ip.brushX().extent([[C,0],[u+C,A]]).on("brush",function({selection:e}){var t=e.map(c.invert),n=Math.floor(t[0]),i=Math.ceil(t[1]);l.selectedRegion={from:n,to:i,extent:i-n},l.onBrushMoveCallback&&l.onBrushMoveCallback()}).on("end",function({selection:e}){l.onBrushEndCallback&&l.onBrushEndCallback()}),d=t,h=n,this.selectedRegion={from:d,to:h,extent:h-d+1},f=t,p=n,m=this.convertBpToPx(v,f)+C,g=this.convertBpToPx(v,p)+C,y=this._layout.getChromosomeSetYTranslate(0)+(this.config.chrWidth-A)/2,ip.select(this.selector).append("g").attr("class","brush").attr("transform","translate(0, "+y+")").call(this.brush).call(this.brush.move,[m,g])}function aB(){call(this.onCursorMoveCallback)}function aO(e){var t,n,i,r,o,a,s,l=this.config.chrWidth+6.5,c=this._layout.margin.left;if(void 0===e)return!1;o=function(e,t){var n,i;for(n=0;n<t.chromosomesArray.length;n++)if((i=t.chromosomesArray[n]).name===e)return i}(this.config.chromosome,this),[a,s]=function(e,t){var n,i,r=[1],o=[1],a=e.bands.slice(-1)[0];for(i=0;i<e.bands.length;i++)r.push((n=e.bands[i]).bp.start),o.push(n.px.start+t);return r.push(a.bp.stop-1),o.push(a.px.stop+t),[r,o]}(o,c),t=this,n=ip.scaleLinear().domain(a).range(s),"rotatable"in t.config&&!1===t.config.rotatable||console.warn("Using the cursor with rotate is not supported."),i=t._layout.getChromosomeSetYTranslate(0)+(t.config.chrWidth-l)/2,r=ip.select(t.selector).append("g").attr("class","brush").attr("transform","translate(0, "+i+")").append("rect").attr("class","cursor").attr("x",n(e)).attr("y",0).attr("width",1).attr("height",30),t.onCursorMove&&t.onCursorMoveCallback(e),t.setCursorPosition||(t.setCursorPosition=function(e){r.attr("x",n(e)),t.onCursorMove&&t.onCursorMoveCallback(e)}),ip.selectAll(t.selector+" .chromosome").on("click",function(e){var i=e.offsetX;i-=6,r.attr("x",i);var o=Math.floor(n.invert(i));t.onCursorMove&&t.onCursorMoveCallback(o)})}function aR(e,t){var n,i,r,o,a,s,l,c,u,d;for(d=0,n=this.bandsArray,i=this.config.taxid,r=this.config.chromosomes[i],a=(o="male"===this.config.sex?[1,0]:[0,0]).length;d<a;d++)s=r[u=o[d]+t],l=n[i][u],c=this.getChromosomeModel(l,s,i,u),this.appendHomolog(c,t,d,e)}function aH(e){var t,n,i={X:1,Y:1};if(2===this.config.ploidy&&this.config.sex)for(n=0,this.sexChromosomes.list=[];n<e.length;n++)t=e[n],"male"===this.config.sex&&t in i?(this.sexChromosomes.list.push(t),this.sexChromosomes.index||(this.sexChromosomes.index=n)):"X"===t&&(this.sexChromosomes.list.push(t,t),this.sexChromosomes.index=n)}function aW(e,t){if(e.bands.length>1||"MT"===e.name){if([i,n]=function(e,t){var n,i,r,o,a,s,l,c,u;for(n=0;n<e.bands.length;n++)if(a=(i=e.bands[n]).bp.start,l=(s=i.bp.stop)-a,r=i.iscn.start,o=i.iscn.stop-r,c=i.px.start,u=i.px.width,t>=a&&t<=s)return[c+u*(r+o/l*(t-a)-r)/o,i];return[null,i]}(e,t),null!==i)return i}else if(t>=1&&t<=e.length)return e.scale.bp*t;var n,i,r=n;throw Error("Base pair out of range.  bp: "+t+"; length of chr"+e.name+": "+r.bp.stop)}function aG(e,t){for(0===t&&(t=e.bands[0].px.start),n=0;n<e.bands.length;n++)if(r=(i=e.bands[n]).px.start,o=i.px.stop,a=i.iscn.start,s=i.iscn.stop,t>=r&&t<=o)return function(e,t,n,i,r,o,a){var s,l;return a=e-t,s=o.bp.stop-o.bp.start,l=a/(i-r),Math.round(o.bp.start+s*(t+(n-r)*l-t)/a)}(s,a,t,o,r,i,l);var n,i,r,o,a,s,l,c=o;throw Error("Pixel out of range.  px: "+t+"; length of chr"+e.name+": "+c)}let aj=aY,aq=aY,az=aY,aV=aX,aU=aK;function aY(e){for(var t=Array(e),n=-1;++n<e;)t[n]=0;return t}function aX(e,t){for(var n=e.length;n<t;)e[n++]=0;return e}function aK(e,t){if(t>32)throw Error("invalid array width!");return e}function aJ(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=aj(e)}"undefined"!=typeof Uint8Array&&(aj=function(e){return new Uint8Array(e)},aq=function(e){return new Uint16Array(e)},az=function(e){return new Uint32Array(e)},aV=function(e,t){if(e.length>=t)return e;var n=new e.constructor(t);return n.set(e),n},aU=function(e,t){var n;switch(t){case 16:n=aq(e.length);break;case 32:n=az(e.length);break;default:throw Error("invalid array width!")}return n.set(e),n}),aJ.prototype.lengthen=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)this[t]=aV(this[t],e);this.length=e},aJ.prototype.add=function(){var e,t,n,i,r;for(i=0,r=this.subarrays;i<r;++i)if(e=this.masks[i],t=this.width-32*i,n=(~e&e+1)>>>0,!(t>=32)||n)return t<32&&n&1<<t&&(this[i]=aU(this[i],t<<=1),this.width=32*i+t),this.masks[i]|=n,{offset:i,one:n};return this[this.subarrays]=aj(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},aJ.prototype.copy=function(e,t){var n,i;for(n=0,i=this.subarrays;n<i;++n)this[n][e]=this[n][t]},aJ.prototype.truncate=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)for(var i=this.length-1;i>=e;i--)this[t][i]=0;this.length=e},aJ.prototype.zero=function(e){var t,n;for(t=0,n=this.subarrays;t<n;++t)if(this[t][e])return!1;return!0},aJ.prototype.zeroExcept=function(e,t,n){var i,r;for(i=0,r=this.subarrays;i<r;++i)if(i===t?this[i][e]&n:this[i][e])return!1;return!0},aJ.prototype.zeroExceptMask=function(e,t){var n,i;for(n=0,i=this.subarrays;n<i;++n)if(this[n][e]&t[n])return!1;return!0},aJ.prototype.only=function(e,t,n){var i,r;for(i=0,r=this.subarrays;i<r;++i)if(this[i][e]!=(i===t?n:0))return!1;return!0},aJ.prototype.onlyExcept=function(e,t,n,i,r){var o,a,s;for(a=0,s=this.subarrays;a<s;++a)if(o=this[a][e],a===t&&(o&=n),o!=(a===i?r:0))return!1;return!0};let aQ={array8:aY,array16:aY,array32:aY,arrayLengthen:aX,arrayWiden:aK,bitarray:aJ},aZ={filterExact:(e,t)=>function(n){var i=n.length;return[e.left(n,t,0,i),e.right(n,t,0,i)]},filterRange:(e,t)=>{var n=t[0],i=t[1];return function(t){var r=t.length;return[e.left(t,n,0,r),e.left(t,i,0,r)]}},filterAll:e=>[0,e.length]},a0=e=>e,a1=()=>null,a2=()=>0;function a5(e){function t(e,t,i){for(var r=i-t,o=(r>>>1)+1;--o>0;)n(e,o,r,t);return e}function n(t,n,i,r){for(var o,a=t[--r+n],s=e(a);(o=n<<1)<=i&&(o<i&&e(t[r+o])>e(t[r+o+1])&&o++,!(s<=e(t[r+o])));)t[r+n]=t[r+o],n=o;t[r+n]=a}return t.sort=function(e,t,i){for(var r,o=i-t;--o>0;)r=e[t],e[t]=e[t+o],e[t+o]=r,n(e,1,o,t);return e},t}let a3=a5(a0);function a8(e){var t=a3.by(e);return function(n,i,r,o){var a,s,l,c=Array(o=Math.min(r-i,o));for(s=0;s<o;++s)c[s]=n[i++];if(t(c,0,o),i<r){a=e(c[0]);do e(l=n[i])>a&&(c[0]=l,a=e(t(c,0,o)[0]));while(++i<r)}return c}}a3.by=a5;let a4=a8(a0);function a6(e){function t(t,n,i,r){for(;i<r;){var o=i+r>>>1;n<e(t[o])?r=o:i=o+1}return i}return t.right=t,t.left=function(t,n,i,r){for(;i<r;){var o=i+r>>>1;e(t[o])<n?i=o+1:r=o}return i},t}a4.by=a8;let a9=a6(a0);a9.by=a6;let a7=(e,t,n)=>{for(var i=0,r=t.length,o=n?JSON.parse(JSON.stringify(e)):Array(r);i<r;++i)o[i]=e[t[i]];return o},se={reduceIncrement:e=>e+1,reduceDecrement:e=>e-1,reduceAdd:e=>function(t,n){return t+ +e(n)},reduceSubtract:e=>function(t,n){return t-e(n)}},st=(e,t)=>{let n=e[t];return"function"==typeof n?n.call(e):n},sn=/\[([\w\d]+)\]/g,si=(e,t)=>(function(e,t,n,i,r){for(r in i=(n=n.split(".")).splice(-1,1),n)t=t[n[r]]=t[n[r]]||{};return e(t,i)})(st,e,t.replace(sn,".$1"));function sr(){var e,t={add:l,remove:function(t){for(var o,s=Array(i),l=[],c="function"==typeof t,d=0,h=0;d<i;++d)(o=d,c?t(n[o],o):e.zero(o))?(l.push(d),s[d]=-1):s[d]=h++;r.forEach(function(e){e(-1,-1,[],l,!0)}),a.forEach(function(e){e(s)});for(var f=0,p=0;f<i;++f)-1!==s[f]&&(f!==p&&(e.copy(p,f),n[p]=n[f]),++p);n.length=i=p,e.truncate(p),u("dataRemoved")},dimension:function(t,s){if("string"==typeof t){var l=t;t=function(e){return si(e,l)}}var c,d,h,f,p,m,g,y,v,b,w,x,A,C,S={filter:function(e){return null==e?W():Array.isArray(e)?H(e):"function"==typeof e?G(e):R(e)},filterExact:R,filterRange:H,filterFunction:G,filterAll:W,currentFilter:function(){return x},hasCurrentFilter:function(){return A},top:function(t,i){var r,o=[],a=P,l=0;for(i&&i>0&&(l=i);--a>=$&&t>0;)e.zero(r=m[a])&&(l>0?--l:(o.push(n[r]),--t));if(s)for(a=0;a<k.length&&t>0;a++)e.zero(r=k[a])&&(l>0?--l:(o.push(n[r]),--t));return o},bottom:function(t,i){var r,o,a=[],l=0;if(i&&i>0&&(l=i),s)for(r=0;r<k.length&&t>0;r++)e.zero(o=k[r])&&(l>0?--l:(a.push(n[o]),--t));for(r=$;r<P&&t>0;)e.zero(o=m[r])&&(l>0?--l:(a.push(n[o]),--t)),r++;return a},group:q,groupAll:function(){var e=q(a1),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e},dispose:z,remove:z,accessor:t,id:function(){return f}},k=[],L=function(e){return sa(e).sort(function(e,t){var n=g[e],i=g[t];return n<i?-1:n>i?1:e-t})},T=aZ.filterAll,M=[],E=[],$=0,P=0,I=0;o.unshift(N),o.push(F),a.push(B);var D=e.add();function N(n,r,o){if(s){I=0,j=0,C=[];for(var a=0;a<n.length;a++)for(j=0,C=t(n[a]);j<C.length;j++)I++;g=[],M=sa(n.length),E=so(I,1);for(var l=sa(I),u=0,d=0;d<n.length;d++){if(!(C=t(n[d])).length){M[d]=0,k.push(d+r);continue}for(j=0,M[d]=C.length;j<C.length;j++)g.push(C[j]),l[u]=d,u++}var f=L(I);g=a7(g,f),y=a7(l,f)}else g=n.map(t),y=L(o),g=a7(g,y);var x=T(g),A=x[0],S=x[1];if(s)if(o=I,w)for(D=0;D<o;++D)w(g[D],D)||(0==--M[y[D]]&&(e[h][y[D]+r]|=c),E[D]=1);else{for(N=0;N<A;++N)0==--M[y[N]]&&(e[h][y[N]+r]|=c),E[N]=1;for(F=S;F<o;++F)0==--M[y[F]]&&(e[h][y[F]+r]|=c),E[F]=1}else if(w)for(D=0;D<o;++D)w(g[D],D)||(e[h][y[D]+r]|=c);else{for(N=0;N<A;++N)e[h][y[N]+r]|=c;for(F=S;F<o;++F)e[h][y[F]+r]|=c}if(!r){p=g,m=y,v=M,b=E,$=A,P=S;return}var M,E,D,N,F,B,O=p,R=m,H=b,W=0;if(a=0,s&&(B=r,r=O.length,o=I),p=s?Array(r+o):Array(i),m=s?Array(r+o):so(i,i),s&&(b=so(r+o,1)),s){var G=v.length;v=aQ.arrayLengthen(v,i);for(var j=0;j+G<i;j++)v[j+G]=M[j]}for(var q=0;a<r&&W<o;++q)O[a]<g[W]?(p[q]=O[a],s&&(b[q]=H[a]),m[q]=R[a++]):(p[q]=g[W],s&&(b[q]=E[W]),m[q]=y[W++]+(s?B:r));for(;a<r;++a,++q)p[q]=O[a],s&&(b[q]=H[a]),m[q]=R[a];for(;W<o;++W,++q)p[q]=g[W],s&&(b[q]=E[W]),m[q]=y[W]+(s?B:r);$=(x=T(p))[0],P=x[1]}function F(e,t,n){M.forEach(function(e){e(g,y,t,n)}),g=y=null}function B(e){if(s){for(var t=0,n=0;t<k.length;t++)-1!==e[k[t]]&&(k[n]=e[k[t]],n++);for(t=0,k.length=n,n=0;t<i;t++)-1!==e[t]&&(n!==t&&(v[n]=v[t]),n++);v=v.slice(0,n)}for(var r,o=p.length,a=0,l=0;a<o;++a)-1!==e[r=m[a]]&&(a!==l&&(p[l]=p[a]),m[l]=e[r],s&&(b[l]=b[a]),++l);for(p.length=l,s&&(b=b.slice(0,l));l<o;)m[l++]=0;var c=T(p);$=c[0],P=c[1]}function O(t){var n=t[0],i=t[1];if(w)return w=null,j(function(e,t){return n<=t&&t<i},0===t[0]&&t[1]===p.length),$=n,P=i,S;var o,a,l,d=[],f=[],g=[],y=[];if(n<$)for(o=n,a=Math.min($,i);o<a;++o)d.push(m[o]),g.push(o);else if(n>$)for(o=$,a=Math.min(n,P);o<a;++o)f.push(m[o]),y.push(o);if(i>P)for(o=Math.max(n,P),a=i;o<a;++o)d.push(m[o]),g.push(o);else if(i<P)for(o=Math.max($,i),a=P;o<a;++o)f.push(m[o]),y.push(o);if(s){var x=[],A=[];for(o=0;o<d.length;o++)v[d[o]]++,b[g[o]]=0,1===v[d[o]]&&(e[h][d[o]]^=c,x.push(d[o]));for(o=0;o<f.length;o++)v[f[o]]--,b[y[o]]=1,0===v[f[o]]&&(e[h][f[o]]^=c,A.push(f[o]));if(d=x,f=A,T===aZ.filterAll)for(o=0;o<k.length;o++)e[h][l=k[o]]&c&&(e[h][l]^=c,d.push(l));else for(o=0;o<k.length;o++)e[h][l=k[o]]&c||(e[h][l]^=c,f.push(l))}else{for(o=0;o<d.length;o++)e[h][d[o]]^=c;for(o=0;o<f.length;o++)e[h][f[o]]^=c}return $=n,P=i,r.forEach(function(e){e(c,h,d,f)}),u("filtered"),S}function R(e){return x=e,A=!0,O((T=aZ.filterExact(a9,e))(p))}function H(e){return x=e,A=!0,O((T=aZ.filterRange(a9,e))(p))}function W(){return x=void 0,A=!1,O((T=aZ.filterAll)(p))}function G(e){x=e,A=!0,w=e,T=aZ.filterAll,j(e,!1);var t=T(p);return $=t[0],P=t[1],S}function j(t,n){var i,o,a,l=[],f=[],g=[],y=[],w=p.length;if(!s)for(i=0;i<w;++i)!(e[h][o=m[i]]&c)^!!(a=t(p[i],i))&&(a?l.push(o):f.push(o));if(s)for(i=0;i<w;++i)t(p[i],i)?(l.push(m[i]),g.push(i)):(f.push(m[i]),y.push(i));if(s){var x=[],A=[];for(i=0;i<l.length;i++)1===b[g[i]]&&(v[l[i]]++,b[g[i]]=0,1===v[l[i]]&&(e[h][l[i]]^=c,x.push(l[i])));for(i=0;i<f.length;i++)0===b[y[i]]&&(v[f[i]]--,b[y[i]]=1,0===v[f[i]]&&(e[h][f[i]]^=c,A.push(f[i])));if(l=x,f=A,n)for(i=0;i<k.length;i++)e[h][o=k[i]]&c&&(e[h][o]^=c,l.push(o));else for(i=0;i<k.length;i++)e[h][o=k[i]]&c||(e[h][o]^=c,f.push(o))}else{for(i=0;i<l.length;i++)e[h][l[i]]&c&&(e[h][l[i]]&=d);for(i=0;i<f.length;i++)e[h][f[i]]&c||(e[h][f[i]]|=c)}r.forEach(function(e){e(c,h,l,f)}),u("filtered")}function q(t){var o={top:function(e){var t=f(B(),0,l.length,e);return g.sort(t,0,t.length)},all:B,reduce:O,reduceCount:R,reduceSum:function(e){return O(se.reduceAdd(e),se.reduceSubtract(e),a2)},order:H,orderNatural:function(){return H(a0)},size:function(){return C},dispose:W,remove:W};E.push(o);var l,u,f,g,y,v,b,w,x=8,A=ss(8),C=0,S=a1,k=a1,L=!0,T=t===a1;function $(o,a,c,f){s&&(w=c,c=p.length-o.length,f=o.length);var m,g,M,E,$,P,B=l,O=s?[]:so(C,A),R=y,H=v,W=b,G=C,j=0,q=0;for(L&&(R=W=a1),L&&(H=W=a1),l=Array(C),C=0,u=s?G?u:[]:G>1?aQ.arrayLengthen(u,i):so(i,A),G&&(M=(g=B[0]).key);q<f&&!((E=t(o[q]))>=E);)++q;for(;q<f;){for(g&&M<=E?($=g,P=M,O[j]=C,(g=B[++j])&&(M=g.key)):($={key:E,value:W()},P=E),l[C]=$;E<=P&&(m=a[q]+(s?w:c),s?u[m]?u[m].push(C):u[m]=[C]:u[m]=C,$.value=R($.value,n[m],!0),e.zeroExcept(m,h,d)||($.value=H($.value,n[m],!1)),!(++q>=f));)E=t(o[q]);V()}for(;j<G;)l[O[j]=C]=B[j++],V();if(s)for(var z=0;z<i;z++)u[z]||(u[z]=[]);if(C>j)if(s)for(j=0;j<w;++j)for(z=0;z<u[j].length;z++)u[j][z]=O[u[j][z]];else for(j=0;j<c;++j)u[j]=O[u[j]];function V(){if(s)return void C++;++C===A&&(O=aQ.arrayWiden(O,x<<=1),u=aQ.arrayWiden(u,x),A=ss(x))}m=r.indexOf(S),C>1||s?(S=I,k=N):(!C&&T&&(C=1,l=[{key:null,value:W()}]),1===C?(S=D,k=F):(S=a1,k=a1),u=null),r[m]=S}function P(e){if(C>1||s){var t,n,o,a=C,c=l,d=so(a,a);if(s){for(t=0,o=0;t<i;++t)if(-1!==e[t]){for(n=0,u[o]=u[t];n<u[o].length;n++)d[u[o][n]]=1;++o}}else for(t=0,o=0;t<i;++t)-1!==e[t]&&(d[u[o]=u[t]]=1,++o);for(l=[],C=0,t=0;t<a;++t)d[t]&&(d[t]=C++,l.push(c[t]));if(C>1||s)if(s)for(t=0;t<o;++t)for(n=0;n<u[t].length;++n)u[t][n]=d[u[t][n]];else for(t=0;t<o;++t)u[t]=d[u[t]];else u=null;r[r.indexOf(S)]=C>1||s?(k=N,S=I):1===C?(k=F,S=D):k=S=a1}else if(1===C){if(T)return;for(var h=0;h<i;++h)if(-1!==e[h])return;l=[],C=0,r[r.indexOf(S)]=S=k=a1}}function I(t,i,r,o,a){var f,p,m,g,b;if((t!==c||i!==h)&&!L){if(s){for(f=0,g=r.length;f<g;++f)if(e.zeroExcept(m=r[f],h,d))for(p=0;p<u[m].length;p++)(b=l[u[m][p]]).value=y(b.value,n[m],!1,p);for(f=0,g=o.length;f<g;++f)if(e.onlyExcept(m=o[f],h,d,i,t))for(p=0;p<u[m].length;p++)(b=l[u[m][p]]).value=v(b.value,n[m],a,p);return}for(f=0,g=r.length;f<g;++f)e.zeroExcept(m=r[f],h,d)&&((b=l[u[m]]).value=y(b.value,n[m],!1));for(f=0,g=o.length;f<g;++f)e.onlyExcept(m=o[f],h,d,i,t)&&((b=l[u[m]]).value=v(b.value,n[m],a))}}function D(t,i,r,o,a){if((t!==c||i!==h)&&!L){var s,u,f,p=l[0];for(s=0,f=r.length;s<f;++s)e.zeroExcept(u=r[s],h,d)&&(p.value=y(p.value,n[u],!1));for(s=0,f=o.length;s<f;++s)e.onlyExcept(u=o[s],h,d,i,t)&&(p.value=v(p.value,n[u],a))}}function N(){var t,r,o;for(t=0;t<C;++t)l[t].value=b();if(s){for(t=0;t<i;++t)for(r=0;r<u[t].length;r++)(o=l[u[t][r]]).value=y(o.value,n[t],!0,r);for(t=0;t<i;++t)if(!e.zeroExcept(t,h,d))for(r=0;r<u[t].length;r++)(o=l[u[t][r]]).value=v(o.value,n[t],!1,r);return}for(t=0;t<i;++t)(o=l[u[t]]).value=y(o.value,n[t],!0);for(t=0;t<i;++t)e.zeroExcept(t,h,d)||((o=l[u[t]]).value=v(o.value,n[t],!1))}function F(){var t,r=l[0];for(t=0,r.value=b();t<i;++t)r.value=y(r.value,n[t],!0);for(t=0;t<i;++t)e.zeroExcept(t,h,d)||(r.value=v(r.value,n[t],!1))}function B(){return L&&(k(),L=!1),l}function O(e,t,n){return y=e,v=t,b=n,L=!0,o}function R(){return O(se.reduceIncrement,se.reduceDecrement,a2)}function H(e){function t(t){return e(t.value)}return f=a4.by(t),g=a3.by(t),o}function W(){var e=r.indexOf(S);return e>=0&&r.splice(e,1),(e=M.indexOf($))>=0&&M.splice(e,1),(e=a.indexOf(P))>=0&&a.splice(e,1),(e=E.indexOf(o))>=0&&E.splice(e,1),o}return arguments.length<1&&(t=a0),r.push(S),M.push($),a.push(P),$(p,m,0,i),R().orderNatural()}function z(){E.forEach(function(e){e.dispose()});var t=o.indexOf(N);return t>=0&&o.splice(t,1),(t=o.indexOf(F))>=0&&o.splice(t,1),(t=a.indexOf(B))>=0&&a.splice(t,1),e.masks[h]&=d,W()}return h=D.offset,d=~(c=D.one),f=h<<7|Math.log(c)/Math.log(2),N(n,0,i),F(n,0,i),S},groupAll:function(){var t,a,s,l,c={reduce:f,reduceCount:p,reduceSum:function(e){return f(se.reduceAdd(e),se.reduceSubtract(e),a2)},value:function(){return u&&(function(){var r;for(r=0,t=l();r<i;++r)t=a(t,n[r],!0),e.zero(r)||(t=s(t,n[r],!1))}(),u=!1),t},dispose:m,remove:m},u=!0;function d(r,o){var l;if(!u)for(l=o;l<i;++l)t=a(t,n[l],!0),e.zero(l)||(t=s(t,n[l],!1))}function h(i,r,o,l,c){var d,h,f;if(!u){for(d=0,f=o.length;d<f;++d)e.zero(h=o[d])&&(t=a(t,n[h],c));for(d=0,f=l.length;d<f;++d)e.only(h=l[d],r,i)&&(t=s(t,n[h],c))}}function f(e,t,n){return a=e,s=t,l=n,u=!0,c}function p(){return f(se.reduceIncrement,se.reduceDecrement,a2)}function m(){var e=r.indexOf(h);return e>=0&&r.splice(e,1),(e=o.indexOf(d))>=0&&o.splice(e,1),c}return r.push(h),o.push(d),d(n,0,i),p()},size:function(){return i},all:function(){return n},allFiltered:function(t){var r=[],o=0,a=c(t||[]);for(o=0;o<i;o++)e.zeroExceptMask(o,a)&&r.push(n[o]);return r},onChange:function(e){return"function"!=typeof e?void console.warn("onChange callback parameter must be a function!"):(s.push(e),function(){s.splice(s.indexOf(e),1)})},isElementFiltered:function(t,n){var i=c(n||[]);return e.zeroExceptMask(t,i)}},n=[],i=0,r=[],o=[],a=[],s=[];function l(r){var a=i,s=r.length;return s&&(n=n.concat(r),e.lengthen(i+=s),o.forEach(function(e){e(r,a,s)}),u("dataAdded")),t}function c(t){var n,i,r,o,a=Array(e.subarrays);for(n=0;n<e.subarrays;n++)a[n]=-1;for(i=0,r=t.length;i<r;i++)o=t[i].id(),a[o>>7]&=~(1<<(63&o));return a}function u(e){for(var t=0;t<s.length;t++)s[t](e)}return e=new aQ.bitarray(0),arguments.length?l(arguments[0]):t}function so(e,t){return(t<257?aQ.array8:t<65537?aQ.array16:aQ.array32)(e)}function sa(e){for(var t=so(e,e),n=-1;++n<e;)t[n]=n;return t}function ss(e){return 8===e?256:16===e?65536:0x100000000}function sl(){var e,t,n=[],i=this.annots;for(t=0;t<i.length;t++)e=i[t].annots,n=n.concat(e);return n}function sc(e){var t,n,i,r=[],o=this.annots;for(t in o)r.push({chr:o[t].chr,annots:[]});for(i=0;i<e.length;i++)r[(n=e[i]).chrIndex].annots.push(n);return r}function su(){var e,t,n=this.rawAnnots.keys;for(e=0,this.unpackedAnnots=this.unpackAnnots(),this.crossfilter=sr(this.unpackedAnnots),this.annotsByFacet={},this.facets=n.slice(3,n.length);e<this.facets.length;e++)t=this.facets[e],this.annotsByFacet[t]=this.crossfilter.dimension(function(e){return e[t]});"filterSelections"in this&&this.filterAnnots(this.filterSelections),this.filteredAnnots=this.annots}function sd(e){var t,n,i,r,o=Date.now();for(this.filterSelections=e,[i,r]=function(e,t){var n,i,r,o,a,s={};if(0===Object.keys(e).length)o=t.unpackedAnnots;else{for(i=0;i<t.facets.length;i++)n=(r=t.facets[i])in e?Array.isArray(a=e[r])?function(e){return 2===a.length?a[0]<=e&&e<a[1]:4===a.length?a[0]<=e&&e<a[1]||a[2]<=e&&e<a[3]:void 0}:function(e){return e in a}:null,t.annotsByFacet[r].filter(n),s[r]=t.annotsByFacet[r].group().top(1/0);o=t.annotsByFacet[r].top(1/0)}return[o,s]}(e,this);t<this.facets.length;t++)this.annotsByFacet[n].filterAll();return i=this.packAnnots(i),delete this.maxAnnotsPerBar,delete this.maxAnnotsPerBarAllChrs,this.filteredAnnots=i,ip.selectAll(this.selector+" polygon.annot").remove(),this.drawAnnots(i),console.log("Time in filterAnnots: "+(Date.now()-o)+" ms"),r}function sh(e){var t,n,i,r,o,a,s,l,c,u,d,h=e.id.split("-")[1];return s=e.bands,l=this.config.chrHeight,c=0,(u=void 0!==s)?[s,e,c]=function(e,t,n,i){var r,o,a,s,l,c=0,u=t.id.split("-")[1],d=i.coordinateSystem,h=i.config.chrHeight;for(r=0;r<e.length;r++)a=(o=e[r])[d].stop-o[d].start,i._layout._isRotated?s=h*a/t.length:(l="relative"===i.config.chromosomeScale?i.maxLength[u][d]:i.maxLength[d],s=h*t.length/l*a/t.length),e[r].px={start:c,stop:c+s,width:s},c=e[r].px.stop,n&&"acen"===o.stain&&"p"===o.name[0]&&(t.pcenIndex=r);return[e,t,c]}(s,e,u,this):(d="relative"===this.config.chromosomeScale?this.maxLength[h][this.coordinateSystem]:this.maxLength[this.coordinateSystem],c=l*e.length/d),e.width=c,e.scale=(t=e,n=this.config.chrHeight,i=t.length,r=this.maxLength,o=t.id.split("-")[1],(a={}).bp=n/r.bp,!0===this.config.multiorganism?"relative"===this.config.chromosomeScale?(a.iscn=n*i/r[o].bp,a.bp=n/r[o].bp):a.iscn=n*i/r.bp:u&&(a.iscn=n/r.iscn),a),e.bands=s,e}function sf(e,t,n,i){var r,o,a,s={};return o=void 0!==e,(s=function(e,t,n,i){if(void 0!==t){let r=t.slice(-1)[0];e.name=n,e.length=r[i.coordinateSystem].stop,e.bpLength=r.bp.stop,e.type="nuclear"}else e=n;return e}(s,e,t,this)).chrIndex=i,s.id="chr"+s.name+"-"+n,!0===this.config.fullChromosomeLabels&&(a=this.organisms[n],s.name=a.scientificName+" chr"+s.name),s.bands=e,(s=this.getChromosomePixels(s)).centromerePosition=function(e,t){if(!1===e)return"";let n=t[0],i=t.slice(-1)[0],r=(i.bp.stop-n.bp.start)/20;return"p"===n.name[0]&&"q"===t[1].name[0]&&n.bp.stop-n.bp.start<r?"telocentric-p":"p"===t.slice(-2)[0].name[0]&&"q"===i.name[0]&&i.bp.stop-i.bp.start<r?"telocentric-q":""}(o,e),r=s,o&&1===r.bands.length&&delete r.bands,s=r}sr.heap=a3,sr.heapselect=a4,sr.bisect=a9,sr.permute=a7;let sp=`
  <style>

    #gear {
      position: absolute;
      right: 3px;
      top: 24px;
      z-index: 8001;
      cursor: pointer;
      height: 18px;
      width: 18px;
    }

    #tools {
      position: absolute;
      width: 120px;
      right: 27px;
      top: 16px;
      z-index: 8000;
      background: white;
      margin: 0;
      border: 1px solid #CCC;
      border-radius: 4px;
      box-shadow: -2px 4px 6px #CCC;
    }

    #tools ul {
      margin-block-start: 0;
      margin-block-end: 0;
      padding-inline-start: 0;
    }

    #tools li, #download li {
      padding: 2px 12px 2px 12px;
      cursor: pointer;
    }

    #tools li:hover,
    #tools li.active,
    #download li:hover {
      background: #DDD;
    }

    #tools li.ideo-disabled,
    #tools li.active.ideo-disabled,
    #download li.ideo-disabled {
      background: #FFF;
      color: #CCC;
      cursor: default;
    }

    #download {
      position: absolute;
      right: 3px;
      top: 16px;
      z-index: 8000;
      background: white;
      margin: 0;
      padding-inline-start: 0;
    }

    #settings {
      position: absolute;
      right: 3px;
      top: 16px;
      z-index: 8000;
      background: white;
      margin: 0;
      padding-inline-start: 0;
    }

    #about {
      position: absolute;
      right: 24px;
      top: -8px;
      z-index: 8000;
      background: white;
      width: 300px;
      border: 1px solid #CCC;
      padding: 10px;
      border-radius: 4px;
      box-shadow: -2px 4px 6px #CCC;
      cursor: default;
    }

    #close {
      float: right;
      border: 1px solid #DDD;
      border-radius: 4px;
      padding: 0 6px;
      background: #EEE;
      font-weight: bold;
      cursor: pointer;
    }

    #settings label {
      display: inline;
      text-decoration: underline;
      text-decoration-style: dotted;
      cursor: pointer;
    }

    #download {
      position: absolute;
      width: 120px;
      top: -2px;
      right: 120px;
      z-index: 8000;
      background: white;
      margin: 0;
      border: 1px solid #CCC;
      border-radius: 4px;
      box-shadow: -2px 4px 6px #CCC;
    }

    li {
      list-style-type: none;
    }

    #settings .no-underline {
      text-decoration: none;
    }

    #settings .setting {
      margin-right: 8px;
    }

    #settings input[type="checkbox"], #settings input[type="radio"] {
      position: relative;
      top: 2px;
    }

    .area-header {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 10px;
      clear: both;
    }

    .area-content {
      display: flex;
      flex-wrap: wrap;
    }

    .area-content > div {
      margin-right: 30px;
      margin-bottom: 15px;
    }

    .tab-panel input[type="number"] {
      width: 50px;
    }

    .tab-panel ul {
      width: 600px;
      list-style: none;
      border-bottom: 1px solid #CCC;
      box-sizing: border-box;
      margin-bottom: 0;
      padding-left: 0;
    }

    .tab-panel .nav:before, .tab-panel .nav:after {
      content: " ";
      display: table;
      clear: both;
    }

    .tab-panel li {
      float: left;
      margin-right: 2px;
      display: block;
      margin-bottom: -1px;
    }

    .tab-panel li > a {
      padding: 10px 15px;
      text-decoration: none;
      border-radius: 4px 4px 0 0;
      display: block;
      position: relative;
    }

    .tab-panel li.active > a {
      border: 1px solid #CCC;
      border-bottom: none;
      background-color: white;
    }

    .tab-panel .tab-content {
      width: 600px;
    }

    .tab-panel .tab-content > div {
      display: none;
      padding-top: 20px;
      clear: both;
    }

    .tab-panel .tab-content > div {
      padding: 20px 10px 5px 10px;
    }

    .tab-panel .tab-content > div.active {
      display: block;
      border: 1px solid #CCC;
      border-top: none;
    }

  </style>`;function sm(e){e.forEach(e=>{e.classList.remove("active")})}function sg(){sm(document.querySelectorAll("#tools > ul > li")),document.querySelectorAll(".ideo-modal, .ideo-tool-panel").forEach(e=>{e.remove()}),document.querySelector("#tools").style.display="none"}class sy{constructor(e){this._model=e,this._class="ModelAdapter"}static getInstance(e){return e.bands?new sy(e):new sv(e)}getModel(){return this._model}getCssClass(){return""}}class sv extends sy{constructor(e){super(e),this._class="ModelNoBandsAdapter"}getModel(){this._model.bands=[];let e="MT"===this._model.name,t=this._model.width;return(t>1||e)&&this._model.bands.push({name:"q",px:{start:0,stop:t,width:t},bp:{start:1,stop:this._model.bpLength??this._model.length},iscn:{start:1,stop:this._model.length}}),this._model}getCssClass(){return"noBands"}}class sb{constructor(e){this._config=e,this._ploidy=new ol(this._config)}getArmColor(e,t,n){return this._config.armColors?this._config.armColors[n]:this._config.ancestors?this._getPolyploidArmColor(e,t,n):null}getBorderColor(e,t,n){let i=this._config,r=i.chrBorderColor?i.chrBorderColor:"#000";return t<i.ploidy||this._ploidy.exists(e,t,n)?r:"#fff"}getFillColor(){let e=this._config;if(!e.chrFillColor)return"#AAA";let t=e.chrFillColor;return"string"==typeof t?{arm:t,centromere:""}:t}_getPolyploidArmColor(e,t,n){if(!this._ploidy.exists(e,t,n))return"transparent";var i=this._ploidy.getAncestor(e,t,n);return this._config.ancestors[i]}}class sw{constructor(e){this._data=e,this.start=e.start,this.stop=e.stop,this.length=this.stop-this.start}getColor(e){return"ploidy"in this._data?"ploidy"in this._data&&this._data.ploidy[e]?this._getColor(e):"transparent":this._getColor(e)}_getColor(e){return Array.isArray(this._data.color)?this._data.color[e]:this._data.color}}class sx{constructor(e,t,n){this._adapter=e,this._model=this._adapter.getModel(),this._config=t,this._ideo=n,this._color=new sb(this._config),this._bumpCoefficient=5}static getInstance(e,t,n){let i=e.getModel().centromerePosition;return"telocentric-p"===i?new sC(e,t,n):"telocentric-q"===i?new s_(e,t,n):new sA(e,t,n)}_addPArmShape(e,t){return t?e.concat(this._getPArmShape()):e}_addQArmShape(e,t){return t?e.concat(this._getQArmShape()):e}render(e,t,n){var i,r,o,a,s,l,c;let u;if(i=this,e=e.append("g").attr("class","bands").attr("clip-path","url(#"+this._model.id+"-chromosome-set-clippath)"),r=this._renderArm(e,t,n,"p"),o=this._renderArm(e,t,n,"q"),this._renderRangeSet(e,t,n),a=[],a=this._addPArmShape(a,r),a=this._addQArmShape(a,o),s="0",l="",c=this.isFullyBanded(),"ancestors"in this._ideo.config&&!("rangeSet"in this._ideo.config)?(l=i._color.getArmColor(t,n,0),c&&(s="0.5")):c?(s=null,l="transparent"):"ancestors"in this._ideo.config||(s="1"),this._ideo.config.chrFillColor){let e=i._color.getFillColor();l=e.arm,u=e.centromere}return e.append("g").attr("class","chromosome-border").selectAll("path").data(a).enter().append("path").attr("fill",l).style("fill-opacity",s).style("fill",function(e){if("acen"===e.class&&u)return u}).attr("stroke",function(e,r){return i._color.getBorderColor(t,n,r)}).attr("stroke-width",function(e){return"strokeWidth"in e?e.strokeWidth:1}).attr("d",function(e){return e.path}).attr("class",function(e){return e.class}),a}_renderRangeSet(e,t,n){var i,r,o,a;"rangeSet"in this._config&&(r=this._config.rangeSet.filter(function(e){return e.chr-1===t}).map(function(e){return new sw(e)}),o=e.append("g").attr("class","range-set"),i=this,a=i._ideo,o.selectAll("rect.range").data(r).enter().append("rect").attr("class","range").attr("x",function(e){return a.convertBpToPx(i._model,e.start)}).attr("y",0).attr("width",function(e){return a.convertBpToPx(i._model,e.length)}).attr("height",this._config.chrWidth).style("fill",function(e){return e.getColor(n)}))}_getShapeData(){var e,t,n,i;for(t=0;t<this._model.bands.length;t++)if("q"===this._model.bands[t].name[0]){e=this._model.bands[t];break}return n=this._model.bands.length-1,i=this._model.bands[n].px.stop,{x1:0,x2:e?e.px.start:i,x3:i,w:this._config.chrWidth,b:this._config.chrWidth/this._bumpCoefficient}}_getPArmShape(){var e=this._getShapeData(),t=e.x2-e.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+e.b+",0 L"+t+",0 Q"+(e.x2+e.b)+","+e.w/2+","+t+","+e.w+" L"+e.b+","+e.w+" Q-"+e.b+","+e.w/2+","+e.b+",0"}:[{class:"",path:"M"+e.b+",0 L"+(t-2)+",0 L"+(t-2)+","+e.w+" L"+e.b+","+e.w+" Q-"+e.b+","+e.w/2+","+e.b+",0"},{class:"acen",path:"M"+t+",0 Q"+(e.x2+e.b)+","+e.w/2+","+t+","+e.w+" L"+t+","+e.w+" L"+(t-2)+","+e.w+" L"+(t-2)+",0"}]}_getQArmShape(){var e=this._getShapeData(),t=e.x3-e.b,n=e.x2+e.b;return this.isFullyBanded()||"ancestors"in this._ideo.config?{class:"",path:"M"+n+",0 L"+t+",0 Q"+(e.x3+e.b)+","+e.w/2+","+t+","+e.w+" L"+n+","+e.w+" Q"+(e.x2-e.b)+","+e.w/2+","+n+",0"}:[{path:"M"+n+",0 L"+t+",0 Q"+(e.x3+e.b)+","+e.w/2+","+t+","+e.w+" L"+n+","+e.w+" L"+n+",0"},{class:"acen",path:"M"+n+",0Q"+(e.x2-e.b)+","+e.w/2+","+n+","+e.w+" L"+n+","+e.w+"L"+(n+2)+","+e.w+"L"+(n+2)+",0"}]}isFullyBanded(){return this._model.bands&&(2!==this._model.bands.length||"q"===this._model.bands[0].name[0])}_renderBands(e,t,n,i,r){var o,a;o=this,a="","ancestors"in o._ideo.config&&!o.isFullyBanded()&&(a=o._color.getArmColor(t,n,+("p"!==r))),e.selectAll("path.band."+r).data(i).enter().append("path").attr("id",function(e){return o._model.id+"-"+e.name.replace(".","-")}).attr("class",function(e){return"band "+r+"-band "+e.stain}).attr("d",function(e){var t;return"M "+o._ideo.round(e.px.start)+", 0l "+(t=o._ideo.round(e.px.width))+" 0 l 0 "+o._config.chrWidth+" l -"+t+" 0 z"}).style("fill",a)}_renderArm(e,t,n,i){var r=this._model.bands.filter(function(e){return e.name[0]===i});return this._renderBands(e,t,n,r,i),!!r.length}}class sA extends sx{constructor(e,t,n){super(e,t,n),this._class="MetacentricChromosome"}}class sC extends sx{constructor(e,t,n){super(e,t,n),this._class="TelocentricPChromosome",this._pArmOffset=3}_addPArmShape(e){return e.concat(this._getPArmShape())}_getPArmShape(){var e=this._getShapeData();return e.o=this._pArmOffset,[{class:"acen",path:"M"+(e.x2+2)+",1L"+(e.x2+e.o+3.25)+",1 L"+(e.x2+e.o+3.25)+","+(e.w-1)+" L"+(e.x2+2)+","+(e.w-1)},{class:"gpos66",path:"M"+(e.x2-e.o+5)+",0L"+(e.x2-e.o+3)+",0 L"+(e.x2-e.o+3)+","+e.w+" L"+(e.x2-e.o+5)+","+e.w,strokeWidth:.5}]}_getQArmShape(){var e=this._getShapeData(),t=e.x3-e.b,n=this._pArmOffset+3;return{class:"",path:"M"+(e.x2+n)+",0 L"+t+",0 Q"+(e.x3+e.b)+","+e.w/2+","+t+","+e.w+" L"+(e.x2+n)+","+e.w}}}class s_ extends sx{constructor(e,t,n){super(e,t,n),this._class="TelocentricQChromosome",this._qArmOffset=3}_getPArmShape(){var e=this._getShapeData(),t=e.x3-e.b,n=this._qArmOffset;return{class:"",path:"M"+(e.x2+n)+",0 L"+(t+n)+",0 L"+(t+n)+","+e.w+" L"+e.b+","+e.w+" Q-"+e.b+","+e.w/2+","+e.b+",0"}}_addQArmShape(e){return e.concat(this._getQArmShape())}_getQArmShape(){var e=this._getShapeData();return e.o=this._qArmOffset,[{class:"acen",path:"M"+(e.x2+2)+",1 L"+(e.x2+e.o+3.25)+",1 L"+(e.x2+e.o+3.25)+","+(e.w-1)+" L"+(e.x2+2)+","+(e.w-1)},{class:"gpos66",path:"M"+(e.x2+e.o+5)+",0 L"+(e.x2+e.o+3)+",0 L"+(e.x2+e.o+3)+","+e.w+" L"+(e.x2+e.o+5)+","+e.w,strokeWidth:.5}]}}function sS(e,t,n,i){var r,o,a,s,l;s=ip.select(this.selector+" defs"),l=sy.getInstance(e),r=n*this.config.chrMargin,o=i.append("g").attr("id",e.id).attr("class","chromosome "+l.getCssClass()).attr("transform","translate(0, "+r+")"),a=sx.getInstance(l,this.config,this).render(o,t,n),ip.select("#"+e.id+"-chromosome-set-clippath").remove(),s.append("clipPath").attr("id",e.id+"-chromosome-set-clippath").selectAll("path").data(a).enter().append("path").attr("d",function(e){return e.path}).attr("class",function(e){return e.class}),e.width<1&&ip.select("#"+e.id+" .bands").style("opacity",0)}function sk(e){var t,n,i,r,o,a;if(t=e.chrIndex,r=this._layout.getChromosomeSetTranslate(t),a=this.selector+" #"+e.id+"-chromosome-set",ip.selectAll(a+" g").remove(),0===(n=ip.select(a)).nodes().length&&(n=ip.select(this.selector).append("g").attr("class","chromosome-set").attr("transform",r).attr("id",e.id+"-chromosome-set")),"sex"in this.config&&2===this.config.ploidy&&this.sexChromosomes.index===t)return void this.drawSexChromosomes(n,t);for(i=1,this.config.ploidy>1&&(i=this._ploidy.getChromosomesNumber(t)),o=0;o<i;o++)this.appendHomolog(e,t,o,n)}function sL(e){var t,n;this.unhighlight(),this.config.taxid&&(t=e.id.split("-")[0].replace("chr",""),n=this.chromosomes[this.config.taxid][t].chrIndex,this._layout.rotate(n,n,e))}function sT(){var e,t,n,i,r,o,a;e=this.config,r=ip.select(e.container+" svg#_ideogram"),n=ip.select(e.container+" #_ideogramInnerWrap"),i=ip.select(e.container+" #_ideogramMiddleWrap"),a=1===(o=e.ploidy)?o:1.12*o;let s=0;"annotationsLayout"in e&&(s=e.annotationHeight*e.numAnnotTracks),"vertical"===e.orientation&&"comparative"!==e.perspective&&"collinear"!==e.geometry&&(t=this.numChromosomes*(e.chrWidth+e.chrMargin+s),"heatmap-2d"!==e.annotationsLayout&&(t=Math.ceil(t*a/e.rows),"SmallLayout"===this._layout._class&&(t+=100),t+=35,i.style("height",this._layout.getHeight()+"px"),n.style("max-width",t+"px").style("overflow-x","scroll").style("position","absolute"),r.style("min-width",t-5+"px"),this.config.showTools&&function(e){let t=`
    ${sp}
    <div id="gear" style="display: none"><svg viewBox="0 0 512 512"><path fill="#AAA" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"/></svg></div>
    <div id="tools" style="display: none">
      <ul>
        <li id="download-tool" class="ideo-tool-hover">Download <span style="float: right">&blacktriangleright;</span></li>
        <li id="about-tool">About</li>
      </ul>
    </div>`;document.querySelector(e.selector).insertAdjacentHTML("beforebegin",t);document.querySelector("#gear").addEventListener("click",e=>{var t=document.querySelector("#tools");"none"===t.style.display?(t.style.display="",function(){let e=document.querySelectorAll("#gear, #tools"),t=t=>{let i=0;e.forEach(e=>{e.contains(t.target)||(i+=1)}),i===e.length&&(sg(),n())},n=()=>{document.removeEventListener("click",t)};document.addEventListener("click",t)}()):(t.style.display="none",sg())});let n=document.querySelectorAll("#tools > ul > li");n.forEach(t=>{let i=Array.from(t.classList).includes("ideo-tool-hover")?"mouseenter":"click";t.addEventListener(i,r=>{var o,a,s;sm(n),t.classList+=" active";let l=t.id.split("-")[0],c=(o=l,a=e,"download"===o&&(s=function(e){let t=document.querySelectorAll(".annot").length;return`
    <div id="download" class="ideo-tool-panel">
      <li id="download-image">Image</li>
      <li id="download-annots" class="${t>0?"":"ideo-disabled"}">Annotations</li>
    </div>
  `}(0)),"about"===o&&(s=function(){let e=`
    <a href="https://github.com/eweitz/ideogram" target="_blank" rel="noopener">
      Ideogram.js</a>`;return`
    <div id="about" class="ideo-modal">
      ${e}, version ${v} <span id="close">x</span><br/>
      <i>Chromosome visualization for the web</i>
    </div>`}()),s.trim());if("mouseenter"===i)t.insertAdjacentHTML("beforeend",c),"mouseenter"===i&&t.addEventListener("mouseleave",e=>{let t=e.toElement,i=t.id,r=document.querySelector(".ideo-tool-panel");document.querySelector("#tools").contains(t)&&r&&!r.contains(t)&&i!==l&&(sm(n),r.remove())}),"download"===l&&(document.querySelector("#download-image").addEventListener("click",t=>{var n,i,r,o,a,s,l,c,u,d,h;sg(),n=document.querySelector(e.selector),a=document.createElement("canvas"),i="_ideo-undisplayed-dl-canvas",a.setAttribute("style","display: none"),a.setAttribute("id",i),r=n.width.baseVal.value+30,(o=n.cloneNode(!0)).style.left="",a.setAttribute("width",r),document.body.appendChild(a),a=document.getElementById(i),a.width*=2,a.height*=2,(s=a.getContext("2d")).setTransform(2,0,0,2,0,0),s.imageSmoothingEnabled=!1,l=new XMLSerializer().serializeToString(o),c=window.URL||window.webkitURL||window,u=new Image,d=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),h=c.createObjectURL(d),u.onload=function(){var e,t,n;s.drawImage(u,0,0),c.revokeObjectURL(h),e=a.toDataURL("image/png").replace("image/png","image/octet-stream"),t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),(n=document.createElement("a")).setAttribute("download","ideogram.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.setAttribute("id","_ideo-undisplayed-dl-image-link"),n.setAttribute("style","display: none;"),document.body.appendChild(n),n.dispatchEvent(t),a.remove()},u.src=h}),document.querySelector("#download-annots").addEventListener("click",t=>{!1===Array.from(document.querySelector("#download-annots").classList).includes("ideo-disabled")&&(sg(),e.downloadAnnotations())}));else document.querySelector("#gear").insertAdjacentHTML("beforeend",c)})}),document.querySelectorAll("#close").forEach(e=>{e.addEventListener("click",()=>{sg()})});let i=document.querySelector(e.selector),r=document.querySelector("#gear"),o=document.querySelector("#tools");i.addEventListener("mouseover",()=>r.style.display=""),i.addEventListener("mouseout",()=>{"none"===o.style.display&&(r.style.display="none")}),r.addEventListener("mouseover",()=>r.style.display="")}(this)))}function sM(){var e,t,n,i;e=this,t=e._layout,ip.selectAll(e.selector+" .chromosome-set").insert("text",":first-child").data(e.chromosomesArray).attr("class",t.getChromosomeLabelClass()).attr("transform",t.getChromosomeSetLabelTranslate()).attr("x",t.getChromosomeSetLabelXPosition()).attr("y",function(e,n){return t.getChromosomeSetLabelYPosition(n)}).attr("text-anchor",t.getChromosomeSetLabelAnchor()).each(function(t,n){var i,r;i=-1===t.name.indexOf(" ")?[t.name]:t.name.match(/^(.*)\s+([^\s]+)$/).slice(1).reverse(),"sex"in e.config&&2===e.config.ploidy&&n===e.sexChromosomes.index&&(i="male"===e.config.sex?["XY"]:["XX"]),r=i,ip.select(this).selectAll("tspan").data(r).enter().append("tspan").attr("dy",function(e,t){return -1.2*t+"em"}).attr("x",e._layout.getChromosomeSetLabelXPosition()).attr("class",function(t,n){var i=e.config.fullChromosomeLabels;return 1===n&&i?"italic":null}).text(String)}),n=this,i=n._layout,ip.selectAll(n.selector+" .chromosome-set").each(function(e,t){ip.select(this).selectAll(".chromosome").append("text").attr("class","chrLabel").attr("transform",i.getChromosomeSetLabelTranslate()).attr("x",function(e,t){return i.getChromosomeLabelXPosition(t)}).attr("y",function(e,t){return i.getChromosomeLabelYPosition(t)}).text(function(e,i){return n._ploidy.getAncestor(t,i)}).attr("text-anchor","middle")})}function sE(e,t,n,i){var r,o,a,s,l,c,u,d,h,f,p,m,g,y,v,b;(t-=1,void 0!==(o=i)&&o.hasOwnProperty("x")&&(1!==o.x||1!==o.y)?(l="scale("+o.x+","+o.y+")",a=-6,s=""===o?-16:-14):(a=-8,s=-16,o={x:1,y:1},l=""),r={x:a,y:s,scaleSvg:l,scale:o},"vertical"===n||""===n)?(c=t,f=this.config,p=c,(f.numAnnotTracks>1||""===f.orientation)&&(p-=1),c=p,u=-4,!0===f.showBandLabels&&(u=f.chrMargin+f.chrWidth+26),d=f.chrMargin*c,f.numAnnotTracks>1==!1&&(d+=1),h=d+u,e.selectAll("text.chrLabel").attr("transform",r.scaleSvg).selectAll("tspan").attr("x",r.x).attr("y",h)):(m=t,g=-(b=this.config).chrWidth-2,!0===b.showBandLabels&&(g=b.chrMargin+8),y=b.annotTracksHeight,"overlay"!==b.annotationsLayout&&(y*=2),v=(-(b.chrMargin*m+g)+3+y)/r.scale.x,e.selectAll("text.chrLabel").attr("transform","rotate(-90)"+r.scaleSvg).selectAll("tspan").attr("x",v).attr("y",r.y))}function s$(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function sP(e){var t=s$(e).Element;return e instanceof t||e instanceof Element}function sI(e){var t=s$(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function sD(e){if("undefined"==typeof ShadowRoot)return!1;var t=s$(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var sN=Math.max,sF=Math.min,sB=Math.round;function sO(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function sR(){return!/^((?!chrome|android).)*safari/i.test(sO())}function sH(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&sI(e)&&(r=e.offsetWidth>0&&sB(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&sB(i.height)/e.offsetHeight||1);var a=(sP(e)?s$(e):window).visualViewport,s=!sR()&&n,l=(i.left+(s&&a?a.offsetLeft:0))/r,c=(i.top+(s&&a?a.offsetTop:0))/o,u=i.width/r,d=i.height/o;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function sW(e){var t=s$(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function sG(e){return e?(e.nodeName||"").toLowerCase():null}function sj(e){return((sP(e)?e.ownerDocument:e.document)||window.document).documentElement}function sq(e){return sH(sj(e)).left+sW(e).scrollLeft}function sz(e){return s$(e).getComputedStyle(e)}function sV(e){var t=sz(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function sU(e){var t=sH(e),n=e.offsetWidth,i=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-i)&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function sY(e){return"html"===sG(e)?e:e.assignedSlot||e.parentNode||(sD(e)?e.host:null)||sj(e)}function sX(e,t){void 0===t&&(t=[]);var n,i=function e(t){return["html","body","#document"].indexOf(sG(t))>=0?t.ownerDocument.body:sI(t)&&sV(t)?t:e(sY(t))}(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=s$(i),a=r?[o].concat(o.visualViewport||[],sV(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(sX(sY(a)))}function sK(e){return sI(e)&&"fixed"!==sz(e).position?e.offsetParent:null}function sJ(e){for(var t=s$(e),n=sK(e);n&&["table","td","th"].indexOf(sG(n))>=0&&"static"===sz(n).position;)n=sK(n);return n&&("html"===sG(n)||"body"===sG(n)&&"static"===sz(n).position)?t:n||function(e){var t=/firefox/i.test(sO());if(/Trident/i.test(sO())&&sI(e)&&"fixed"===sz(e).position)return null;var n=sY(e);for(sD(n)&&(n=n.host);sI(n)&&0>["html","body"].indexOf(sG(n));){var i=sz(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var sQ="bottom",sZ="right",s0="left",s1="auto",s2=["top",sQ,sZ,s0],s5="start",s3="viewport",s8="popper",s4=s2.reduce(function(e,t){return e.concat([t+"-"+s5,t+"-end"])},[]),s6=[].concat(s2,[s1]).reduce(function(e,t){return e.concat([t,t+"-"+s5,t+"-end"])},[]),s9=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],s7={placement:"bottom",modifiers:[],strategy:"absolute"};function le(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var lt={passive:!0};function ln(e){return e.split("-")[0]}function li(e){return e.split("-")[1]}function lr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function lo(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?ln(r):null,a=r?li(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case"top":t={x:s,y:n.y-i.height};break;case sQ:t={x:s,y:n.y+n.height};break;case sZ:t={x:n.x+n.width,y:l};break;case s0:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?lr(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case s5:t[c]=t[c]-(n[u]/2-i[u]/2);break;case"end":t[c]=t[c]+(n[u]/2-i[u]/2)}}return t}var la={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ls(e){var t,n,i,r,o,a,s,l=e.popper,c=e.popperRect,u=e.placement,d=e.variation,h=e.offsets,f=e.position,p=e.gpuAcceleration,m=e.adaptive,g=e.roundOffsets,y=e.isFixed,v=h.x,b=void 0===v?0:v,w=h.y,x=void 0===w?0:w,A="function"==typeof g?g({x:b,y:x}):{x:b,y:x};b=A.x,x=A.y;var C=h.hasOwnProperty("x"),S=h.hasOwnProperty("y"),k=s0,L="top",T=window;if(m){var M=sJ(l),E="clientHeight",$="clientWidth";M===s$(l)&&"static"!==sz(M=sj(l)).position&&"absolute"===f&&(E="scrollHeight",$="scrollWidth"),("top"===u||(u===s0||u===sZ)&&"end"===d)&&(L=sQ,x-=(y&&M===T&&T.visualViewport?T.visualViewport.height:M[E])-c.height,x*=p?1:-1),(u===s0||("top"===u||u===sQ)&&"end"===d)&&(k=sZ,b-=(y&&M===T&&T.visualViewport?T.visualViewport.width:M[$])-c.width,b*=p?1:-1)}var P=Object.assign({position:f},m&&la),I=!0===g?(t={x:b,y:x},n=s$(l),i=t.x,r=t.y,{x:sB(i*(o=n.devicePixelRatio||1))/o||0,y:sB(r*o)/o||0}):{x:b,y:x};return(b=I.x,x=I.y,p)?Object.assign({},P,((s={})[L]=S?"0":"",s[k]=C?"0":"",s.transform=1>=(T.devicePixelRatio||1)?"translate("+b+"px, "+x+"px)":"translate3d("+b+"px, "+x+"px, 0)",s)):Object.assign({},P,((a={})[L]=S?x+"px":"",a[k]=C?b+"px":"",a.transform="",a))}let ll={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];sI(r)&&sG(r)&&(Object.assign(r.style,n),Object.keys(i).forEach(function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});sI(i)&&sG(i)&&(Object.assign(i.style,o),Object.keys(r).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]};var lc={left:"right",right:"left",bottom:"top",top:"bottom"};function lu(e){return e.replace(/left|right|bottom|top/g,function(e){return lc[e]})}var ld={start:"end",end:"start"};function lh(e){return e.replace(/start|end/g,function(e){return ld[e]})}function lf(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&sD(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function lp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lm(e,t,n){var i,r,o,a,s,l,c,u,d,h;return t===s3?lp(function(e,t){var n=s$(e),i=sj(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var c=sR();(c||!c&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+sq(e),y:l}}(e,n)):sP(t)?((i=sH(t,!1,"fixed"===n)).top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i):lp((r=sj(e),a=sj(r),s=sW(r),l=null==(o=r.ownerDocument)?void 0:o.body,c=sN(a.scrollWidth,a.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),u=sN(a.scrollHeight,a.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),d=-s.scrollLeft+sq(r),h=-s.scrollTop,"rtl"===sz(l||a).direction&&(d+=sN(a.clientWidth,l?l.clientWidth:0)-c),{width:c,height:u,x:d,y:h}))}function lg(){return{top:0,right:0,bottom:0,left:0}}function ly(e){return Object.assign({},lg(),e)}function lv(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function lb(e,t){void 0===t&&(t={});var n,i,r,o,a,s,l,c,u=t,d=u.placement,h=void 0===d?e.placement:d,f=u.strategy,p=void 0===f?e.strategy:f,m=u.boundary,g=u.rootBoundary,y=u.elementContext,v=void 0===y?s8:y,b=u.altBoundary,w=u.padding,x=void 0===w?0:w,A=ly("number"!=typeof x?x:lv(x,s2)),C=e.rects.popper,S=e.elements[void 0!==b&&b?v===s8?"reference":s8:v],k=(n=sP(S)?S:S.contextElement||sj(e.elements.popper),i=void 0===m?"clippingParents":m,r=void 0===g?s3:g,l=(s=[].concat("clippingParents"===i?(o=sX(sY(n)),!sP(a=["absolute","fixed"].indexOf(sz(n).position)>=0&&sI(n)?sJ(n):n)?[]:o.filter(function(e){return sP(e)&&lf(e,a)&&"body"!==sG(e)})):[].concat(i),[r]))[0],(c=s.reduce(function(e,t){var i=lm(n,t,p);return e.top=sN(i.top,e.top),e.right=sF(i.right,e.right),e.bottom=sF(i.bottom,e.bottom),e.left=sN(i.left,e.left),e},lm(n,l,p))).width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c),L=sH(e.elements.reference),T=lo({reference:L,element:C,strategy:"absolute",placement:h}),M=lp(Object.assign({},C,T)),E=v===s8?M:L,$={top:k.top-E.top+A.top,bottom:E.bottom-k.bottom+A.bottom,left:k.left-E.left+A.left,right:E.right-k.right+A.right},P=e.modifiersData.offset;if(v===s8&&P){var I=P[h];Object.keys($).forEach(function(e){var t=[sZ,sQ].indexOf(e)>=0?1:-1,n=["top",sQ].indexOf(e)>=0?"y":"x";$[e]+=I[n]*t})}return $}function lw(e,t,n){return sN(e,sF(t,n))}function lx(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function lA(e){return["top",sZ,sQ,s0].some(function(t){return e[t]>=0})}var lC=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?s7:r;return function(e,t,n){void 0===n&&(n=o);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},s7,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var r,a,c,h,f,p,m="function"==typeof n?n(s.options):n;d(),s.options=Object.assign({},o,s.options,m),s.scrollParents={reference:sP(e)?sX(e):e.contextElement?sX(e.contextElement):[],popper:sX(t)};var g=(a=Object.keys(r=[].concat(i,s.options.modifiers).reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{})).map(function(e){return r[e]}),c=new Map,h=new Set,f=[],a.forEach(function(e){c.set(e.name,e)}),a.forEach(function(e){h.has(e.name)||function e(t){h.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!h.has(t)){var n=c.get(t);n&&e(n)}}),f.push(t)}(e)}),p=f,s9.reduce(function(e,t){return e.concat(p.filter(function(e){return e.phase===t}))},[]));return s.orderedModifiers=g.filter(function(e){return e.enabled}),s.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,i=e.effect;if("function"==typeof i){var r=i({state:s,name:t,instance:u,options:void 0===n?{}:n});l.push(r||function(){})}}),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(le(t,n)){s.rects={reference:(i=sJ(n),r="fixed"===s.options.strategy,o=sI(i),h=sI(i)&&(l=sB((a=i.getBoundingClientRect()).width)/i.offsetWidth||1,d=sB(a.height)/i.offsetHeight||1,1!==l||1!==d),f=sj(i),p=sH(t,h,r),m={scrollLeft:0,scrollTop:0},g={x:0,y:0},(o||!o&&!r)&&(("body"!==sG(i)||sV(f))&&(m=function(e){return e!==s$(e)&&sI(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:sW(e)}(i)),sI(i)?(g=sH(i,!0),g.x+=i.clientLeft,g.y+=i.clientTop):f&&(g.x=sq(f))),{x:p.left+m.scrollLeft-g.x,y:p.top+m.scrollTop-g.y,width:p.width,height:p.height}),popper:sU(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(e){return s.modifiersData[e.name]=Object.assign({},e.data)});for(var i,r,o,a,l,d,h,f,p,m,g,y=0;y<s.orderedModifiers.length;y++){if(!0===s.reset){s.reset=!1,y=-1;continue}var v=s.orderedModifiers[y],b=v.fn,w=v.options,x=void 0===w?{}:w,A=v.name;"function"==typeof b&&(s=b({state:s,options:x,name:A,instance:u})||s)}}}},update:(r=function(){return new Promise(function(e){u.forceUpdate(),e(s)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(r())})})),a}),destroy:function(){d(),c=!0}};if(!le(e,t))return u;function d(){l.forEach(function(e){return e()}),l=[]}return u.setOptions(n).then(function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)}),u}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=s$(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,lt)}),s&&l.addEventListener("resize",n.update,lt),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,lt)}),s&&l.removeEventListener("resize",n.update,lt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=lo({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=n.adaptive,o=n.roundOffsets,a=void 0===o||o,s={placement:ln(t.placement),variation:li(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===i||i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ls(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===r||r,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ls(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ll,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,a=s6.reduce(function(e,n){var i,r,a,s,l,c;return e[n]=(i=t.rects,a=[s0,"top"].indexOf(r=ln(n))>=0?-1:1,l=(s="function"==typeof o?o(Object.assign({},i,{placement:n})):o)[0],c=s[1],l=l||0,c=(c||0)*a,[s0,sZ].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}),e},{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,y=ln(g)===g,v=l||(y||!p?[lu(g)]:function(e){if(ln(e)===s1)return[];var t=lu(e);return[lh(e),t,lh(t)]}(g)),b=[g].concat(v).reduce(function(e,n){var i,r,o,a,s,l,h,f,g,y,v,b;return e.concat(ln(n)===s1?(r=(i={placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}).placement,o=i.boundary,a=i.rootBoundary,s=i.padding,l=i.flipVariations,f=void 0===(h=i.allowedAutoPlacements)?s6:h,0===(v=(y=(g=li(r))?l?s4:s4.filter(function(e){return li(e)===g}):s2).filter(function(e){return f.indexOf(e)>=0})).length&&(v=y),Object.keys(b=v.reduce(function(e,n){return e[n]=lb(t,{placement:n,boundary:o,rootBoundary:a,padding:s})[ln(n)],e},{})).sort(function(e,t){return b[e]-b[t]})):n)},[]),w=t.rects.reference,x=t.rects.popper,A=new Map,C=!0,S=b[0],k=0;k<b.length;k++){var L=b[k],T=ln(L),M=li(L)===s5,E=["top",sQ].indexOf(T)>=0,$=E?"width":"height",P=lb(t,{placement:L,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),I=E?M?sZ:s0:M?sQ:"top";w[$]>x[$]&&(I=lu(I));var D=lu(I),N=[];if(o&&N.push(P[T]<=0),s&&N.push(P[I]<=0,P[D]<=0),N.every(function(e){return e})){S=L,C=!1;break}A.set(L,N)}if(C)for(var F=p?3:1,B=function(e){var t=b.find(function(t){var n=A.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},O=F;O>0&&"break"!==B(O);O--);t.placement!==S&&(t.modifiersData[i]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=n.altAxis,a=n.boundary,s=n.rootBoundary,l=n.altBoundary,c=n.padding,u=n.tether,d=void 0===u||u,h=n.tetherOffset,f=void 0===h?0:h,p=lb(t,{boundary:a,rootBoundary:s,padding:c,altBoundary:l}),m=ln(t.placement),g=li(t.placement),y=!g,v=lr(m),b="x"===v?"y":"x",w=t.modifiersData.popperOffsets,x=t.rects.reference,A=t.rects.popper,C="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,S="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(w){if(void 0===r||r){var T,M="y"===v?"top":s0,E="y"===v?sQ:sZ,$="y"===v?"height":"width",P=w[v],I=P+p[M],D=P-p[E],N=d?-A[$]/2:0,F=g===s5?x[$]:A[$],B=g===s5?-A[$]:-x[$],O=t.elements.arrow,R=d&&O?sU(O):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:lg(),W=H[M],G=H[E],j=lw(0,x[$],R[$]),q=y?x[$]/2-N-j-W-S.mainAxis:F-j-W-S.mainAxis,z=y?-x[$]/2+N+j+G+S.mainAxis:B+j+G+S.mainAxis,V=t.elements.arrow&&sJ(t.elements.arrow),U=V?"y"===v?V.clientTop||0:V.clientLeft||0:0,Y=null!=(T=null==k?void 0:k[v])?T:0,X=lw(d?sF(I,P+q-Y-U):I,P,d?sN(D,P+z-Y):D);w[v]=X,L[v]=X-P}if(void 0!==o&&o){var K,J,Q="x"===v?"top":s0,Z="x"===v?sQ:sZ,ee=w[b],et="y"===b?"height":"width",en=ee+p[Q],ei=ee-p[Z],er=-1!==["top",s0].indexOf(m),eo=null!=(J=null==k?void 0:k[b])?J:0,ea=er?en:ee-x[et]-A[et]-eo+S.altAxis,es=er?ee+x[et]+A[et]-eo-S.altAxis:ei,el=d&&er?(K=lw(ea,ee,es))>es?es:K:lw(d?ea:en,ee,d?es:ei);w[b]=el,L[b]=el-ee}t.modifiersData[i]=L}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=ln(n.placement),l=lr(s),c=[s0,sZ].indexOf(s)>=0?"height":"width";if(o&&a){var u,d=(u=r.padding,ly("number"!=typeof(u="function"==typeof u?u(Object.assign({},n.rects,{placement:n.placement})):u)?u:lv(u,s2))),h=sU(o),f="y"===l?"top":s0,p="y"===l?sQ:sZ,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],g=a[l]-n.rects.reference[l],y=sJ(o),v=y?"y"===l?y.clientHeight||0:y.clientWidth||0:0,b=d[f],w=v-h[c]-d[p],x=v/2-h[c]/2+(m/2-g/2),A=lw(b,x,w);n.modifiersData[i]=((t={})[l]=A,t.centerOffset=A-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;if(null!=i)("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&lf(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=lb(t,{elementContext:"reference"}),s=lb(t,{altBoundary:!0}),l=lx(a,i),c=lx(s,r,o),u=lA(l),d=lA(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),l_="tippy-content",lS="tippy-arrow",lk="tippy-svg-arrow",lL={passive:!0,capture:!0},lT=function(){return document.body};function lM(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function lE(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function l$(e,t){return"function"==typeof e?e.apply(void 0,t):e}function lP(e,t){var n;return 0===t?e:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}}function lI(e){return[].concat(e)}function lD(e,t){-1===e.indexOf(t)&&e.push(t)}function lN(e){return[].slice.call(e)}function lF(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function lB(){return document.createElement("div")}function lO(e){return["Element","Fragment"].some(function(t){return lE(e,t)})}function lR(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function lH(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function lW(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[i](t,n)})}function lG(e,t){for(var n,i=t;i;){if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var lj={isTouch:!1},lq=0;function lz(){!lj.isTouch&&(lj.isTouch=!0,window.performance&&document.addEventListener("mousemove",lV))}function lV(){var e=performance.now();e-lq<20&&(lj.isTouch=!1,document.removeEventListener("mousemove",lV)),lq=e}function lU(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var lY="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto;function lX(e){return e.replace(/[ \t]{2,}/g," ").replace(/^[ \t]*/gm,"").trim()}var lK=Object.assign({appendTo:lT,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),lJ=Object.keys(lK);function lQ(e){var t=(e.plugins||[]).reduce(function(t,n){var i,r=n.name,o=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(i=lK[r])?i:o),t},{});return Object.assign({},e,t)}function lZ(e,t){var n,i=Object.assign({},t,{content:l$(t.content,[e])},t.ignoreAttributes?{}:((n=t.plugins)?Object.keys(lQ(Object.assign({},lK,{plugins:n}))):lJ).reduce(function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{}));return i.aria=Object.assign({},lK.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}function l0(e,t){e.innerHTML=t}function l1(e){var t=lB();return!0===e?t.className=lS:(t.className=lk,lO(e)?t.appendChild(e):l0(t,e)),t}function l2(e,t){lO(t.content)?(l0(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?l0(e,t.content):e.textContent=t.content)}function l5(e){var t=e.firstElementChild,n=lN(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(l_)}),arrow:n.find(function(e){return e.classList.contains(lS)||e.classList.contains(lk)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function l3(e){var t=lB(),n=lB();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=lB();function r(n,i){var r=l5(t),o=r.box,a=r.content,s=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),(n.content!==i.content||n.allowHTML!==i.allowHTML)&&l2(a,e.props),i.arrow?s?n.arrow!==i.arrow&&(o.removeChild(s),o.appendChild(l1(i.arrow))):o.appendChild(l1(i.arrow)):s&&o.removeChild(s)}return i.className=l_,i.setAttribute("data-state","hidden"),l2(i,e.props),t.appendChild(n),n.appendChild(i),r(e.props,e.props),{popper:t,onUpdate:r}}l3.$$tippy=!0;var l8=1,l4=[],l6=[];function l9(e,t){void 0===t&&(t={});var n,i=lK.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",lz,lL),window.addEventListener("blur",lU);var r=Object.assign({},t,{plugins:i}),o=(lO(n=e)?[n]:lE(n,"NodeList")?lN(n):Array.isArray(n)?n:lN(document.querySelectorAll(n))).reduce(function(e,t){var n=t&&function(e,t){var n,i,r,o,a,s,l,c,u=lZ(e,Object.assign({},lK,lQ(lF(t)))),d=!1,h=!1,f=!1,p=!1,m=[],g=lP(V,u.interactiveDebounce),y=l8++,v=(n=u.plugins).filter(function(e,t){return n.indexOf(e)===t}),b={id:y,reference:e,popper:lB(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)},setProps:function(t){if(!b.state.isDestroyed){P("onBeforeUpdate",[b,t]),q();var n=b.props,i=lZ(e,Object.assign({},n,lF(t),{ignoreAttributes:!0}));b.props=i,j(),n.interactiveDebounce!==i.interactiveDebounce&&(N(),g=lP(V,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?lI(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):i.triggerTarget&&e.removeAttribute("aria-expanded"),D(),$(),A&&A(n,i),b.popperInstance&&(K(),Q().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var t=b.state.isVisible,n=b.state.isDestroyed,i=!b.state.isEnabled,r=lj.isTouch&&!b.props.touch,o=lM(b.props.duration,0,lK.duration);if(!(t||n||i||r||(c||e).hasAttribute("disabled"))&&(P("onShow",[b],!1),!1!==b.props.onShow(b))){if(b.state.isVisible=!0,T()&&(x.style.visibility="visible"),$(),R(),b.state.isMounted||(x.style.transition="none"),T()){var a,s,u,d=l5(x);lR([d.box,d.content],0)}l=function(){var e;if(b.state.isVisible&&!p){if(p=!0,x.offsetHeight,x.style.transition=b.props.moveTransition,T()&&b.props.animation){var t=l5(x),n=t.box,i=t.content;lR([n,i],o),lH([n,i],"visible")}I(),D(),lD(l6,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&T()&&W(o,function(){b.state.isShown=!0,P("onShown",[b])})}},s=b.props.appendTo,u=c||e,(a=b.props.interactive&&s===lT||"parent"===s?u.parentNode:l$(s,[u])).contains(x)||a.appendChild(x),b.state.isMounted=!0,K()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=lM(b.props.duration,1,lK.duration);if(!e&&!t&&!n&&(P("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,p=!1,d=!1,T()&&(x.style.visibility="hidden"),N(),H(),$(!0),T()){var r,o=l5(x),a=o.box,s=o.content;b.props.animation&&(lR([a,s],i),lH([a,s],"hidden"))}(I(),D(),b.props.animation)?T()&&(r=b.unmount,W(i,function(){!b.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&r()})):b.unmount()}},hideWithInteractivity:function(e){M().addEventListener("mousemove",g),lD(l4,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(J(),Q().forEach(function(e){e._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),l6=l6.filter(function(e){return e!==b}),b.state.isMounted=!1,P("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),q(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b]))}};if(!u.render)return b;var w=u.render(b),x=w.popper,A=w.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+b.id,b.popper=x,e._tippy=b,x._tippy=b;var C=v.map(function(e){return e.fn(b)}),S=e.hasAttribute("aria-expanded");return j(),D(),$(),P("onCreate",[b]),u.showOnCreate&&Z(),x.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&M().addEventListener("mousemove",g)}),b;function k(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function L(){return"hold"===k()[0]}function T(){var e;return!!(null!=(e=b.props.render)&&e.$$tippy)}function M(){var t,n,i=(c||e).parentNode;return i&&null!=(n=lI(i)[0])&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function E(e){return b.state.isMounted&&!b.state.isVisible||lj.isTouch||a&&"focus"===a.type?0:lM(b.props.delay,+!e,lK.delay)}function $(e){void 0===e&&(e=!1),x.style.pointerEvents=b.props.interactive&&!e?"":"none",x.style.zIndex=""+b.props.zIndex}function P(e,t,n){if(void 0===n&&(n=!0),C.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var i;(i=b.props)[e].apply(i,t)}}function I(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,i=x.id;lI(b.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}})}}function D(){!S&&b.props.aria.expanded&&lI(b.props.triggerTarget||e).forEach(function(t){b.props.interactive?t.setAttribute("aria-expanded",b.state.isVisible&&t===(c||e)?"true":"false"):t.removeAttribute("aria-expanded")})}function N(){M().removeEventListener("mousemove",g),l4=l4.filter(function(e){return e!==g})}function F(t){if(!lj.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(b.props.interactive&&lG(x,n))){if(lI(b.props.triggerTarget||e).some(function(e){return lG(e,n)})){if(lj.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),h=!0,setTimeout(function(){h=!1}),b.state.isMounted||H())}}}function B(){f=!0}function O(){f=!1}function R(){var e=M();e.addEventListener("mousedown",F,!0),e.addEventListener("touchend",F,lL),e.addEventListener("touchstart",O,lL),e.addEventListener("touchmove",B,lL)}function H(){var e=M();e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchend",F,lL),e.removeEventListener("touchstart",O,lL),e.removeEventListener("touchmove",B,lL)}function W(e,t){var n=l5(x).box;function i(e){e.target===n&&(lW(n,"remove",i),t())}if(0===e)return t();lW(n,"remove",s),lW(n,"add",i),s=i}function G(t,n,i){void 0===i&&(i=!1),lI(b.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,i),m.push({node:e,eventType:t,handler:n,options:i})})}function j(){L()&&(G("touchstart",z,{passive:!0}),G("touchend",U,{passive:!0})),b.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(G(e,z),e){case"mouseenter":G("mouseleave",U);break;case"focus":G(lY?"focusout":"blur",Y);break;case"focusin":G("focusout",Y)}})}function q(){m.forEach(function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)}),m=[]}function z(e){var t,n=!1;if(!(!b.state.isEnabled||X(e))&&!h){var i=(null==(t=a)?void 0:t.type)==="focus";a=e,c=e.currentTarget,D(),!b.state.isVisible&&lE(e,"MouseEvent")&&l4.forEach(function(t){return t(e)}),"click"===e.type&&(0>b.props.trigger.indexOf("mouseenter")||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:Z(e),"click"===e.type&&(d=!n),n&&!i&&ee(e)}}function V(t){var n,i,r,o=t.target,a=(c||e).contains(o)||x.contains(o);("mousemove"!==t.type||!a)&&(n=Q().concat(x).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null}).filter(Boolean),i=t.clientX,r=t.clientY,n.every(function(e){var t=e.popperRect,n=e.popperState,o=e.props.interactiveBorder,a=n.placement.split("-")[0],s=n.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,u="right"===a?s.left.x:0,d="left"===a?s.right.x:0,h=t.top-r+l>o,f=r-t.bottom-c>o,p=t.left-i+u>o,m=i-t.right-d>o;return h||f||p||m})&&(N(),ee(t)))}function U(e){if(!(X(e)||b.props.trigger.indexOf("click")>=0&&d)){if(b.props.interactive)return void b.hideWithInteractivity(e);ee(e)}}function Y(t){(!(0>b.props.trigger.indexOf("focusin"))||t.target===(c||e))&&(b.props.interactive&&t.relatedTarget&&x.contains(t.relatedTarget)||ee(t))}function X(e){return!!lj.isTouch&&L()!==e.type.indexOf("touch")>=0}function K(){J();var t=b.props,n=t.popperOptions,i=t.placement,r=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,s=T()?l5(x).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||c||e}:e,d=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(T()){var n=l5(x).box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];T()&&s&&d.push({name:"arrow",options:{element:s,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),b.popperInstance=lC(u,x,Object.assign({},n,{placement:i,onFirstUpdate:l,modifiers:d}))}function J(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return lN(x.querySelectorAll("[data-tippy-root]"))}function Z(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),R();var t=E(!0),n=k(),r=n[0],o=n[1];lj.isTouch&&"hold"===r&&o&&(t=o),t?i=setTimeout(function(){b.show()},t):b.show()}function ee(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),!b.state.isVisible)return void H();if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!d){var t=E(!1);t?r=setTimeout(function(){b.state.isVisible&&b.hide()},t):o=requestAnimationFrame(function(){b.hide()})}}}(t,r);return n&&e.push(n),e},[]);return lO(e)?o[0]:o}l9.defaultProps=lK,l9.setDefaultProps=function(e){Object.keys(e).forEach(function(t){lK[t]=e[t]})},l9.currentInput=lj,Object.assign({},ll,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});var l7={clientX:0,clientY:0};l9.setDefaultProps({render:l3});let ce='.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}';var ct={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function cn(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function ci(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cr="https://cdn.jsdelivr.net/npm/@wikipathways/pvjs@5.0.1/dist/pvjs.vanilla.js",co="_ideogramPathwayContainer";async function ca(e){let t=`https://raw.githubusercontent.com/wikipathways/wikipathways-assets/main/pathways/${e}/${e}.json`,n=await fetch(t),i=await n.json();return Ideogram.pathwayJson=i,i}async function cs(){let e=document.createElement("script");e.setAttribute("src",cr),document.querySelector("body").appendChild(e)}function cl(e,t){return Object.entries(t.entitiesById).filter(([t,n])=>n.textContent?.split(" ").some(t=>t===e)).map(e=>e[0])}function cc(e,t,n){return cl(e,t).map(e=>[null,e,n])}function cu(e,t){let n=e.entitiesById,i=Object.keys(n).filter(e=>e.startsWith("http://identifiers.org")),r={"Cell Type":"Cell type"},o=["Cell Type","Disease"],a=o;t&&(a=[o.find(e=>e.toLowerCase()===t.toLowerCase())]);let s=a.map(e=>{let t=i.filter(t=>n[t].ontology===e).map(e=>n[e]).map(e=>{let t=e.xrefIdentifier.replace(":","_"),n=`https://purl.obolibrary.org/obo/${t}`;return`<a href="${n}" target="_blank" class="_ideoPathwayOntologyLink">${e.term}</a>`}).join(", "),o=r[e]??e,a=e.replaceAll(" ","_"),s=`class="ideoPathwayOntology__${a}"`;return""===t?"":`<div ${s}>${o}: ${t}</div>`}).join("");return 0===s.length?"":"<div>"+s+"</div>"}async function cd(e,t,n,i="#_ideogramOuterWrap",r={height:440,width:900},o=!0,a,s,l,c,u,d=0){document.querySelector(`script[src="${cr}"]`)||cs();let h=`#${co}`;if("undefined"==typeof Pvjs)if(d<=40)return void setTimeout(()=>{cd(e,t,n,i,r,o,a,s,l,d++)},250);else throw Error("Pvjs is undefined.  Possible causes include unavailable network or CDN.");let f=await ca(e),p=cl(t,f)[0];cl(n,f)[0];let m=cc(t,f,"red"),g=cc(n,f,"purple"),y=m.concat(g),v=document.querySelector(h),b=document.querySelector(i);v&&v.remove();let w=r.width,x=r.height,A=`height: ${x}px; width: ${w-2}px;`,C=`height: ${x+20}px; width: ${w}px;`,S=`border: 0.5px solid #DDD; border-radius: 3px; position: relative; margin: auto; background-color: #FFF; z-index: 99; ${C} margin: auto;`,k=`<div id="_ideogramPvjsContainer" style="${A}"></div>`,L=`id="${co}" style="${S}" data-ideo-pathway-searched="${t}" data-ideo-pathway-interacting="${n}"`,T=`<div ${L}>${k}</div>`;b.insertAdjacentHTML("beforeEnd",T);let M=document.querySelector(h),E=new Pvjs(document.querySelector("#_ideogramPvjsContainer"),{theme:"plain",opacities:[],highlights:y,panned:[p],zoomed:[p],pathway:f.pathway,entitiesById:f.entitiesById,detailPanelOpen:!1,selected:null});!function(e,t,n,i=!0){let r,o=t.pathway.name,a=`https://wikipathways.org/pathways/${e}`,s=`href="${a}" target="_blank" style="margin-left: 4px;"`,l=`<a ${s}>${o}</a>`;r=i?'<button class="_ideoPathwayCloseButton" style="float: right; background-color: #aaa; border: none; color: white; font-weight: bold; font-size: 16px; padding: 0px 4px; border-radius: 3px; cursor: pointer;"}>x</button>':"";let c=`<div class="_ideoPathwayHeader">${l}${r}</div>`;n.insertAdjacentHTML("afterBegin",c),i&&document.querySelector("._ideoPathwayCloseButton").addEventListener("click",function(e){document.querySelector(`#${co}`).remove()})}(e,f,M,o),l&&function(e,t,n){var i;let r="<div>"+(function e(t,n){var i,r,o,a,s,l=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,c=[],u="",d=n||{},h=0;function f(e){var t=ct[e[1]||""],n=c[c.length-1]==e;return t?t[1]?(n?c.pop():c.push(e),t[0|n]):t[0]:e}function p(){for(var e="";c.length;)e+=f(c[c.length-1]);return e}for(t=t.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(e,t,n){return d[t.toLowerCase()]=n,""}).replace(/^\n+|\n+$/g,"");o=l.exec(t);)r=t.substring(h,o.index),h=l.lastIndex,i=o[0],r.match(/[^\\](\\\\)*\\$/)||((s=o[3]||o[4])?i='<pre class="code '+(o[4]?"poetry":o[2].toLowerCase())+'"><code'+(o[2]?' class="language-'+o[2].toLowerCase()+'"':"")+">"+cn(ci(s).replace(/^\n+|\n+$/g,""))+"</code></pre>":(s=o[6])?(s.match(/\./)&&(o[5]=o[5].replace(/^\d+/gm,"")),a=e(cn(o[5].replace(/^\s*[>*+.-]/gm,""))),">"==s?s="blockquote":(s=s.match(/\./)?"ol":"ul",a=a.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),i="<"+s+">"+a+"</"+s+">"):o[8]?i='<img src="'+ci(o[8])+'" alt="'+ci(o[7])+'">':o[10]?(u=u.replace("<a>",'<a href="'+ci(o[11]||d[r.toLowerCase()])+'">'),i=p()+"</a>"):o[9]?i="<a>":o[12]||o[14]?i="<"+(s="h"+(o[14]?o[14].length:o[13]>"="?1:2))+">"+e(o[12]||o[15],d)+"</"+s+">":o[16]?i="<code>"+ci(o[16])+"</code>":(o[17]||o[1])&&(i=f(o[17]||"--"))),u+=r,u+=i;return(u+t.substring(h)+p()).replace(/^\n+|\n+$/g,"")})((i=(i=(i=e.pathway.comments.filter(e=>"WikiPathways-description"===e.source)[0].content).replaceAll("\r\n\r\n","\r\n")).replaceAll("\r\n","<br/><br/>")).replace("Phosphorylation sites were added based on information from PhosphoSitePlus (R), www.phosphosite.org.","").replace(/Proteins on this pathway have targeted assays available via the \[https:\/\/assays\.cancer\.gov\/available_assays\?wp_id=WP\d+\s+CPTAC Assay Portal\]\./g,"").replace(/Proteins on this pathway have targeted assays available via the \[CPTAC Assay Portal\]\(https:\/\/assays\.cancer\.gov\/available_assays\?wp_id=WP\d+\)\./g,"")).replace(/<a href="([^"]+)">/g,'<a href="$1" class="_ideoPathwayDescriptionLink" target="_blank">').trim()+"</div>",o=n?cu(e):"";t.insertAdjacentHTML("beforeEnd",'<br/><div class="_ideoPathwayFooter">'+r+"<br/>"+o+"</div>")}(f,M,c);let $=new CustomEvent("ideogramDrawPathway",{detail:{pathwayViewer:E,pwId:e,sourceGene:t,destGene:n,dimensions:r}});if(document.dispatchEvent($),M.querySelectorAll("g.GeneProduct").forEach(e=>{let t=e.getAttribute("name"),n=t;e.addEventListener("mouseover",i=>{a&&(n=a(i,t),e.setAttribute("data-tippy-content",n))}),u&&e.setAttribute("data-tippy-content",n)}),u){let e=iB();e.trigger="mouseenter",l9("g.GeneProduct[data-tippy-content]",e)}s&&(M.querySelectorAll("g.Pathway").forEach(e=>{e.addEventListener("click",t=>{s(t,Array.from(e.classList).find(e=>e.startsWith("WikiPathways_")).split("WikiPathways_")[1])}),u&&e.setAttribute("data-tippy-content","Click to show pathway")}),u&&l9("g.Pathway[data-tippy-content]",tippyConfig))}function ch(e){return Math.round(performance.now()-e)}function cf(){let e=this.annotDescriptions.annots,t=Object.values(e).slice(),n=t.filter(e=>e.type&&e.type.includes("paralogous")),i=t.filter(e=>e.type&&e.type.includes("interacting gene"));return{related:t,paralogous:n,interacting:i,searched:Object.entries(e).filter(e=>e[1].type&&e[1].type.includes("searched gene"))[0][0]}}function cp(e){let t=performance.now()-this.time.prevTooltipOff,n=this.time.prevTooltipAnnotDomId;if(t<300&&e.domId===n)return null;let i=e.name;return Object.assign({tooltipGene:i,tooltipRelatedType:this.annotDescriptions.annots[e.name].type.split(" ")[0]},cm(this))}function cm(e){let t=e.getRelatedGenesByType(),n=t.related.length,i=t.paralogous.length;return{numRelatedGenes:n,numParalogs:i,numInteractingGenes:t.interacting.length,searchedGene:t.searched}}let cg="#F55",cy="#A00",cv="#922D5E",cb="#D26D9E",cw="#CAA",cx="#866",cA="#FFC0CB",cC="#CF909B",c_="#99D",cS="#22C",ck="#CCF",cL="#33D",cT="#66B",cM="#116",cE="#7D7",c$="#393",cP="#3A3",cI="#060",cD="#93E9BE",cN="#53AC7E",cF="#880ED4",cB="#5800A4",cO="#B24BF3",cR="#520B83",cH="#D7A1F9",cW="#A771C9",cG="#964B00",cj="#660B00",cq="#DACDBA",cz="#A99A89",cV="#FFA500",cU="#DD8000";function cY(e){return"_"===e[0][0]}let cX={_H:"Helical",_E:"Extracellular",_C:"Cytoplasmic"};function cK(e,t=!1){let n=["criteria provided, multiple submitters, no conflicts","reviewed by expert panel","practice guideline"].indexOf(e)+2,i='<span style="color: #C89306">&#9733;</span>'.repeat(n);t&&(i+='<span style="color: #C89306">&#9734;</span>'.repeat(4-n));let r=e[0].toUpperCase()+e.slice(1),o=`data-tippy-content="${r}"`;return`<span class="_ideoReviewStatus" ${o}>${i}</span>`}function cJ(e){return{theme:"light-border",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:e}}]},onShow:function(){document.querySelectorAll("[data-tippy-root]").forEach(e=>e.remove())}}}function cQ(){let e=document.querySelector("._ideoGeneStructureContainerHead");return[e,document.querySelector("._ideoTissueExpressionPlot"),document.querySelector("._ideoTissuePlotContainer")]}function cZ(e,t,n){let[i,r,o]=cQ(),a="g"===e.target.tagName,s=a?e.target:e.target.parentElement;document.querySelectorAll("._ideoVariant").forEach(e=>{e.classList.remove("_ideoBackgroundVariant")}),document.querySelectorAll("._ideoVariant").forEach(e=>{e.id!==s.id&&e.classList.add("_ideoBackgroundVariant")}),document.querySelector("._ideoVariantSummary")?.remove();let l=e.target,c=a?l.id:l.parentElement.id,u=function(e,t=!1){let n,i=t?e.diseases.length:1,r=e.diseases.slice(0,i).map(e=>{let n=e.id.replace(":","_"),i=`https://purl.obolibrary.org/obo/${n}`,r=`<a href="${i}" target=_blank>${e.name}</a>`;void 0===e.name&&(e.name="Not provided");let o=t&&"Not provided"!==e.name?r:e.name;return`<div>-&nbsp;${o}</div>`}).join("");if(!t&&e.diseases.length>1){let t=e.diseases.length-1,n=`- ${t} more condition`;t>1&&(n+="s"),r+=`<div>${n}</div>`}let o=`${e.chromosome}-${e.position}-${e.refAllele}-${e.altAllele}`;e.dbSnpId&&(o+=` ${c2} ${e.dbSnpId}`);let a=e.origin&&"germline"!==e.origin;(0!==e.rawReviewStatus||a)&&(o+=` ${c2} `,0!==e.rawReviewStatus&&(o+=cK(e.reviewStatus)),0!==e.rawReviewStatus&&a&&(o+=" "),a&&(o+=e.origin));let s=cK(e.reviewStatus,!0),l=0;t&&(l+=13*Math.min(e.diseases.length,5),e.origin&&(l+=13),e.afExac&&(l+=13));let c=(t?110:87)+l,u=`height: ${c}px; margin-top: 15px; `;n=t?`<div>Variant type: ${e.variantType}</div><div>Review status: ${s}</div>`+(e.origin?`<div>Origin: ${e.origin}</div>`:"")+(e.afExac?`<div>Allele frequency (ExAC): ${e.afExac}</div>`:"")+`<div>ClinVar Variation ID: ${e.clinvarVariantId}</div>`+"<br/>":"<div><i>Click variant for more details</i></div>";let d="";return t&&e.diseases.length>=5&&(d='<div style="width: 100px; height: 5px; position: relative; top: 6px; box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1); margin: auto;"></div>'),`
    <div class="_ideoVariantSummary" style="${u}">
      <div>${o}</div>
      <br/>
      <div>${e.clinicalSignificance} in:</div>
      <div style="max-height: 70px; overflow-y: scroll; width: 275px; margin: auto;">
      ${r}
      </div>
      ${d}
      <br/>
      ${n}
    </div>`}(n.variants.find(e=>"v"+e.clinvarVariantId===c),t);r.style.display="none",i.style.display="none",o.insertAdjacentHTML("beforeend",u);n.tippyVariant=l9("._ideoSpliceToggle[data-tippy-content]",cJ(["top-start","top"]));let d=l9("._ideoReviewStatus[data-tippy-content]",cJ(["bottom"]));n.tippyVariant=n.tippyVariant.concat(d)}function c0(){let[e,t,n]=cQ();document.querySelectorAll("._ideoVariant").forEach(e=>{e.classList.remove("_ideoBackgroundVariant")}),document.querySelector("._ideoVariantSummary")?.remove(),t.style.display="",n.style.display="",e.style.display=""}async function c1(e,t,n){Date.now();let i=e.name,r=e.startOffset,o=ur(i,n),a=Ideogram.variantCache;if(!a)return null;let s=await a.getVariants(o,n);if(0===s.length)return null;s.length>10&&(s=function(e,t){let n=e.filter(e=>""!==e.dbSnpId&&null!==e.afExac).sort((e,t)=>t.afExac-e.afExac).slice(0,10),i=n.map(e=>"v"+e.clinvarVariantId);if(n.length<10){let r=e.filter(e=>(""!==e.dbSnpId||null!==e.afExac)&&!i.includes("v"+e.clinvarVariantId)).sort((e,t)=>t.rawOrigin-e.rawOrigin).sort((e,t)=>t.rawClinicalSignifiance-e.rawClinicalSignifiance).sort((e,t)=>t.rawReviewStatus-e.rawReviewStatus).sort((e,t)=>t.afExac-e.afExac).slice(0,t-n.length);if(i=i.concat(r.map(e=>"v"+e.clinvarVariantId)),(n=n.concat(r)).length<t){let r=e.filter(e=>!i.includes("v"+e.clinvarVariantId)).sort((e,t)=>t.rawOrigin-e.rawOrigin).sort((e,t)=>t.rawClinicalSignifiance-e.rawClinicalSignifiance).sort((e,t)=>t.rawReviewStatus-e.rawReviewStatus).slice(0,t-n.length);n=n.concat(r)}}return n}(s,10)),console.log("updated rawVariants.length",s.length);let l=(function(e,t){let n=[],i=uA(e);return t=t.map(t=>{for(let r=0;r<e.length;r++){let o=e[r],[a,s,l]=o.slice(-3),c=5===o.length;if(s<=t.positionRelative&&s+a>=t.positionRelative){let e=t.positionRelative-s,r=e/i;c&&(r+=l.x);let o=["",e,1,{type:"",x:r,width:.5}];n.push(o);break}}return t}),n})(t,s=s.map(e=>(e.positionRelative-=r,e))).map((e,t)=>{let n=s[t];return n.x=e.slice(-1)[0].x,n.width=e.slice(-1)[0].width,n}),c={};l.forEach(e=>{e.diseases.map(e=>{e.name in c==!1&&(c[e.name]=0),c[e.name]+=1})});let u="<style>._ideoPathogenic {stroke: #D00; fill: #FBB;} ._ideoPathogenicLikelyPathogenic {stroke: #F55; fill: #FDD;} ._ideoLikelyPathogenic {stroke: #F99500; fill: #FEC;} ._ideoVariant._ideoBackgroundVariant {stroke: #BBB; fill: #EEE; opacity: 0.2;} </style>"+l.reverse().map(e=>{let t="_ideoPathogenic",n=13,i=1;"Pathogenic/Likely pathogenic"===e.clinicalSignificance?(t="_ideoPathogenicLikelyPathogenic",n=16,i=4):"Likely pathogenic"===e.clinicalSignificance&&(t="_ideoLikelyPathogenic",n=19,i=7);let r={bottom:`${e.x},${n}`,topLeft:`${e.x-6.5},${i}`,topRight:`${e.x+6.5},${i}`},o=`${r.bottom} ${r.topLeft} ${r.topRight}`;return`
      <g class="_ideoVariant ${t}" id="v${e.clinvarVariantId}" style="cursor: pointer;">
        <line x1="${e.x}" y1="10" x2="${e.x}" y2="25" />
        <polygon points="${o}" />
      </g>
    `}).join("");return n.variants=l,u}window.getVariantsSvg=c1,window.writeVariantsSvg=function(e,t){c1(e,t).then(e=>{document.querySelector("._ideoGeneStructure").insertAdjacentHTML("beforeend",e)})};let c2="<span style='color: #CCC'>|</span>",c5="5'-UTR",c3="3'-UTR",c8={"5'-UTR":20,exon:20,intron:20,"3'-UTR":20},c4={"5'-UTR":"#155069",exon:"#DAA521",intron:"#FFFFFF00","3'-UTR":"#357089"},c6={"5'-UTR":"#70A099",exon:"#BA8501","3'-UTR":"#90C0B9"},c9={"5'-UTR":"five-prime-utr",exon:"exon","3'-UTR":"three-prime-utr",intron:"intron"},c7=`<style>
  ._ideoGeneStructureContainerName {
    position: relative;
    left: 45px;
    margin-right: 20px;
  }
  ._ideoGeneStructureContainerName.pre-mRNA {
    left: 70px;
    margin-right: 70px;
  }
  ._ideoGeneStructureContainer rect:hover + line {
    visibility: hidden;
  }
  ._ideoGeneStructureContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  ._ideoGeneStructureContainer:hover ._ideoSpliceToggle {
    visibility: visible;
  }
  ._ideoGeneStructureContainer ._ideoSpliceToggle {
    visibility: hidden;
  }
  ._ideoSpliceToggle {
    margin-left: 53px; background-color: #EEE;
  }
  ._ideoSpliceToggle.pre-mRNA {
    margin-left: 43px; background-color: #F8F8F8;
  }
  ._ideoHoveredSubpart {
    stroke: #D0D0DD !important; stroke-width: 3px;
  }
  #_ideoGeneStructureTip {
    font-style: italic;
  }

  ${ce}

  .tippy-box {
    font-size: 12px;
  }

  .tippy-content {
    padding: 3px 7px;
  }
  </style>`,ue='<span id="_ideoGeneStructureTip">Hover for details</span>';function ut(){return document.querySelector("._ideoGeneStructureFooter")}function un(e){let t=ut(),n=e.querySelector("svg").getAttribute("data-ideo-footer");t.innerHTML=`&nbsp;<br/>${n}`}async function ui(e,t=0){let[n,i]=uo(e,t);document.querySelector("#_ideoGeneStructureMenu").options[i].selected=!0;let r=(await uS(n,e,Ideogram.spliceExons))[0],o=document.querySelector("._ideoGeneStructureSvgContainer");o.innerHTML=r,ub(Ideogram.spliceExons,0===i),un(o),e.addedSubpartListeners=!1,up(e),ug(e)}function ur(e){return e.split("-").slice(0,-1).join("-")}function uo(e,t=0){let n,i,r=document.querySelector("#_ideoGeneStructureMenu");if(r){let e=r.options.length;(n=r.selectedIndex+t)>=e?n=0:n<0&&(n=e-1),i=r.options[n].value}else{let e=document.querySelector("._ideoGeneStructure");if(!e)return null;i=e.getAttribute("data-ideo-gene-structure-name"),n=0}let o=ur(i);return[Ideogram.geneStructureCache[o].find(e=>e.name===i),n]}function ua(e){if("s"===e.key){let e=document.querySelector("._ideoSpliceToggle input");if(!e)return;let t=document.querySelector("#_ideoSubpartText");t&&(t.innerHTML="&nbsp;"),e.dispatchEvent(new MouseEvent("click"))}}function us(e,t){let n=e.slice(),i=t?c3:c5,r=e.some(e=>e[0]===i);return e.forEach((i,o)=>{if(0===o)return;let a=e[o-1],s=a[0]===c3,l=a[0]===c5;"exon"===i[0]&&r&&(!t&&s||t&&l)&&i[1]!==a[1]+a[2]-1&&2!==a[2]&&(n[o]=a,n[o-1]=i)}),n}function ul(e,t){return e.classList.contains(t)}function uc(){let e="_ideoHoveredSubpart";document.querySelectorAll(`.${e}`).forEach(t=>t.classList.remove(e))}function uu(e){let t,n,i=Array.from(document.querySelectorAll("rect.subpart")),r="+"===document.querySelector("._ideoGeneStructure").getAttribute("data-ideo-strand"),o=function(e,t){let n,i=e.slice(),r=Array.isArray(e[0]);if(r){let i=t?c3:c5;n=e.some(e=>e[0]===i)}else{let i=t?"three-prime-utr":"five-prime-utr";n=e.some(e=>ul(e,i))}return e.forEach((o,a)=>{if(a===i.length-1)return;let s=e[a+1];(r?function(e,t,n,i){let r=t[0]===c5,o=t[0]===c3,a=e[0]!==c3,s=e[0]!==c5;return i&&(!n&&o&&a||n&&r&&s)}:function(e,t,n,i){let r="five-prime-utr",o="three-prime-utr",a=ul(t,r),s=ul(t,o),l=!ul(e,o),c=!ul(e,r);return i&&(!n&&s&&l||n&&a&&c)})(o,s,t,n)&&(i.splice(a,1,s),i.splice(a+1,1,o))}),i}(i,r);if(0===o.length)return;let a="_ideoHoveredSubpart",s=document.querySelector(`.${a}`);if(!s){e.stopPropagation(),e.preventDefault();return}o.forEach((e,n)=>{e.classList.contains(a)&&(t=n)});let l={view:window,bubbles:!1,cancelable:!0},c=new MouseEvent("mouseenter",l),u=new MouseEvent("mouseleave",l),d=r?"ArrowLeft":"ArrowRight",h=r?"ArrowRight":"ArrowLeft";if(e.key===d?n="left":e.key===h&&(n="right"),void 0===n||function(e,t,n){let i="left"===n;return 0===e&&i||e===t.length-1&&!i}(t,o,n)){e.stopPropagation(),e.preventDefault();return}uc();let f=e.altKey,p=e.metaKey;if(e.key===d){s.dispatchEvent(u);let e=t-1;f&&(e=t-10<0?0:t-10),p&&(e=0),o[e].dispatchEvent(c)}else if(e.key===h){s.dispatchEvent(u);let e=o.length-1,n=t+1;f&&(n=t+10>e?e:t+10),p&&(n=e),o[n].dispatchEvent(c)}e.stopPropagation(),e.preventDefault()}function ud(){return document.querySelector("#_ideoGeneStructureMenuContainer")}function uh(e,t){ut().innerHTML=e,ug(t)}function uf(e,t){e.addEventListener("mouseenter",n=>{uc(),n.target.classList.add("_ideoHoveredSubpart");let i=ut();t.originalTooltipFooter=i.innerHTML;let r=e.getAttribute("data-subpart"),o=i.innerHTML.replace("&nbsp;","");uh(`<div id="_ideoSubpartText" style="margin-bottom: -10px; max-width: 260px;"">${r}</div>${o}`,t);let a=ud();a&&(a.style.marginTop="")}),e.addEventListener("mouseleave",e=>{e.target.classList.remove("_ideoHoveredSubpart"),uh(t.originalTooltipFooter,t);let n=ud();n&&(n.style.marginTop="4px")})}function up(e){let t=document.querySelectorAll("rect.subpart");if(0===t.length)return;e.subparts=t;let n=document.querySelector("._ideoGeneStructureContainer");n.addEventListener("mouseenter",()=>{document.addEventListener("keydown",uu),!e.addedMenuListeners&&(e.addedMenuListeners=!0,un(n),document.querySelector("._ideogramTooltip").addEventListener("change",async()=>{await ui(e),e.oneTimeDelayTooltipHideMs=2e3}),Ideogram.tissueCache&&(document.querySelector("._ideoTooltipFooter").style.display="none"))}),n.addEventListener("mouseleave",t=>{e.oneTimeDelayTooltipHideMs=2e3,Ideogram.tissueCache&&(document.querySelector("._ideoTooltipFooter").style.display=""),!0===function(e){let t=document.querySelector("._ideogramTooltip").getBoundingClientRect(),n=e.screenX,i=e.screenY;return n>t.left&&n<t.right&&i>t.top&&i<t.bottom}(t)&&uh(ue,e),e.addedMenuListeners=!1,document.removeEventListener("keydown",uu)}),e.addedSubpartListeners||(e.addedSubpartListeners=!0,t.forEach(t=>{uf(t,e)}))}function um(e){return{theme:"light-border",popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:e}}]},onShow:function(){document.querySelectorAll("[data-tippy-root]").forEach(e=>e.remove())}}}function ug(e){e.tippy=l9("._ideoSpliceToggle[data-tippy-content]",um(["top-start","top"]));let t=um(["bottom"]);t.popperOptions.modifiers.push({name:"offset",options:{offset:[-5,20]}});let n=l9("._ideoMenuArrow[data-tippy-content]",t);e.tippy=e.tippy.concat(n)}function uy(e){return e?"Unsplice exons (s)":"Splice exons (s)"}function uv(e,t=!0){let n="",i=" and protein",r="without";e||(n="pre-",i="",r="with");let o=t?"Canonical":"Alternative";return{title:`${o} transcript per Ensembl, ${r} introns`,name:`${o} ${n}mRNA ${i}`}}function ub(e,t){let n=document.querySelector("._ideoGeneStructureContainerName"),i=document.querySelector("._ideoSpliceToggle");if(n&&i){[n,i].forEach(e=>e.classList.remove("pre-mRNA")),e||[n,i].forEach(e=>e.classList.add("pre-mRNA"));let{title:r,name:o}=uv(e,t);n.textContent=o,n.title=r}}async function uw(e){Ideogram.spliceExons=!Ideogram.spliceExons;let t=Ideogram.spliceExons,[n,i]=uo(e),r=0===i,[,o,a]=await uS(n,e,t),s=document.querySelector("#_ideoProtein");s&&!t&&(s.style.display="none");let l=document.querySelectorAll(".intron").length>0;if(t||l)document.querySelectorAll(".intron").forEach(e=>e.remove());else{let t=0,n=document.querySelectorAll(".subpart");o.forEach((e,i)=>{let r=i-t;if(a[r][0]!==e[0]){let i=e.slice(-1)[0].summary,o=`y="5" height="20" fill="#FFFFFF00" ${i}`,a=`<rect class="subpart intron" ${o} />`;n[r].insertAdjacentHTML("beforebegin",a),t+=1}}),document.querySelectorAll(".intron").forEach(t=>{uf(t,e)})}document.querySelectorAll(".subpart-line.rna").forEach(e=>e.remove());let c=t?a:o;console.log("in toggleSplice, subparts",c),ip.select("._ideoGeneStructure").selectAll(".subpart").data(c).transition().duration(750).attr("x",(e,t)=>c[t].slice(-1)[0].x).attr("width",(e,t)=>c[t].slice(-1)[0].width).on("end",async(i,o)=>{if(console.log("in end"),o!==c.length-1)return;s&&t&&(s.style.display=""),document.querySelectorAll(".subpart:not(.domain)").forEach((e,t)=>{let n=u_(c[t]);e.insertAdjacentHTML("afterend",n)}),ub(t,r);let a=document.querySelector("#_ideoTranscriptLengthBp");if(!a)return;let l=ux(c,t).toLocaleString();a.innerText=`${l} bp`;let u=await c1(n,c,e);console.log("toggled variantSvg.length",u.length),document.querySelector(".variantsDiagrams").innerHTML=u,e.tippy[0].show()})}function ux(e,t=!1){let n=e.filter(e=>"exon"===e[0]);t&&(e=n);let i=e.slice(-1)[0],r=i[1],o=i[2];return r+o+(t?n.length-1:0)}function uA(e,t=null){return ux(e)/250/(t?3:1)}function uC(e,t=null){let n=uA(e,t),i=t??e;for(let e=0;e<i.length;e++){let t=i[e];if("object"==typeof t.slice(-1)[0])continue;let r=t[2],o=t[1]/n,a=r/n,s=t[0];i[e].push({type:s,x:o,width:a})}return i}function u_(e){let t=e[0],n=e.slice(-1)[0].x,i=c8[t],r=`stroke="${c6[t]}"`,o=`x1="${n}" x2="${n}" y1="5" y2="${5+i}" ${r}`;return`<line class="subpart-line rna" ${o} />`}async function uS(e,t,n=!1){let i,r=e.strand,o=e.subparts,a=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e[i],[o,a]=r.slice(1);if(o>n){let e=n,i=o-n-1;t.push(["intron",e,i])}n=o+a,t.push(r)}return uC(t)}(o),s=function(e){let t=[],n=0,i=0;for(let r=0;r<e.length;r++){let o,a,s,[l,c,u]=e[r],d=c===i;r>0&&([,o,a]=e[r-1]);let h=r>0&&c===o,f=r>0&&c<=o+a,p=(s=d?c:h?i:f?i+a-u:n)+u,m=[l,s,u+1,c];t.push(m),n=p,i=s}return uC(t)}(o);i=n?s:a;let l=document.querySelector("._ideoSpliceToggle");if(l){let e=uy(n);l.setAttribute("data-tippy-placement","right"),l.setAttribute("data-tippy-content",e),ug(t)}let c=[],u='x="0" width="248" y="15" height="1"',d=`<rect fill="black" ${u}/>`;c.push(d);let h={"5'-UTR":0,exon:0,intron:0,"3'-UTR":0},f={"5'-UTR":0,exon:0,intron:0,"3'-UTR":0},p="+"===r;i=us(i,p),a=us(a,p),s=us(s,p);for(let e=0;e<i.length;e++){let t=i[e][0];t in f&&(f[t]+=1)}let m=e.name,g=ur(m);for(let e=0;e<i.length;e++){let t=i[e],o=t[0],l="black";o in c4&&(l=c4[o]);let u=c8[o],d=t[2],p=t.slice(-1)[0].x,m=t.slice(-1)[0].width,g=`x="${p}" width="${m}" y="5" height="${u}"`,y=`class="subpart ${c9[o]}" `,v=f[o];h[o]+=1;let b=h[o],w=function(e,t,n,i,r){"-"===i&&(n=t-n+1);let o=t>1?`${n} of ${t} `:"",a=e[0].toUpperCase()+e.slice(1),s=r.toLocaleString(),l=`${a} ${o}${c2} ${s} bp`;return`data-subpart="${l}"`}(o,v,b,r,d);n?"intron"!==o&&(s[e].slice(-1)[0].summary=w):a[e].slice(-1)[0].summary=w;let x=`<rect ${y} rx="1.5" fill="${l}" ${g} ${w}/>`+u_(t);c.push(x)}let y="position: relative; width: 274px; margin: auto;",v=`style="${y} left: 10px;"`;"-"===r&&(v=`transform="scale(-1 1)" style="${y} left: -10px;"`);let b=(function(e,t,n){let i="_ideoGeneStructureMenuContainer",r="margin-bottom: 4px; margin-top: 4px; clear: both;",o=Ideogram.geneStructureCache[e];if(1===o.length){let e=o[0].name;return`<div id="${i}" style="${r}">Transcript: ${e}</div>`}let a=o.map(e=>{let t=e.name,i="";return n&&n===e.name&&(i=" selected"),`<option value="${t}" ${i}>${t}</option>`}).join(""),s="_ideoGeneStructureMenu";return`<div id="${i}" style="${r}"><label for="${s}">Transcript:</label> <select id="${s}" name="${s}">${a}</select>`+function(){let e="width: 12px; height: 12px; cursor: pointer;user-select: none;",t=`style="${e}; margin-left: 5px;"`,n=`style="${e}; margin-left: 2px;"`,i='class="_ideoMenuArrow"',r='data-tippy-placement="bottom-start"',o=`data-tippy-content="Next transcript" ${r}`,a=`data-tippy-content="Previous transcript" ${r}`,s=`${t} ${i} data-dir="down" ${o}`,l=`${n} ${i} data-dir="up" ${a}`,c=o5({shape:"triangle",color:"#888"},{config:{orientation:"down"}}),u=o5({shape:"triangle",color:"#888"},{config:""});return`<svg ${s}>${c}</svg><svg ${l}>${u}</svg>`}()+"</div>"})(g,0,m).replaceAll('"',"'"),w=Ideogram.proteinCache[g]?.some(e=>e.protein.some(e=>cY(e))),[x,A]=function(e,t,n,i,r){let o=[],a=ur(e,r);if(!r.config.showProteinInTooltip||"proteinCache"in Ideogram==!1||a in Ideogram.proteinCache==!1||"spliceExons"in Ideogram==!1||!1===Ideogram.spliceExons)return["<br/>",null];let s=Ideogram.proteinCache[a].find(t=>t.transcriptName===e);if(!s)return["<br/>",null];let l=s.protein,c=function(e,t){let n,i,r,o;t||(e=e.slice().reverse());let a=t?"5'-UTR":"3'-UTR",s=e.filter(e=>e[0]===a).slice(-1)[0];s?(n=s.slice(-1)[0].x+s.slice(-1)[0].width,i=s[1]+s[2]):(n=0,i=0);let l=t?"3'-UTR":"5'-UTR",c=e.filter(e=>e[0]===l).slice(-1)[0];if(c)r=c.slice(-1)[0].x,o=c[1];else{let t=e.slice(-1)[0];r=t.slice(-1)[0].x+t.slice(-1)[0].width,o=t[1]+t[2]}let u=o-i,d=r-n;return{px:{start:n,length:d},bp:{start:i,length:u}}}(t,n),u=uC(t,l),d=[];for(let e=0;e<u.length;e++){let t=u[e],r=cY(t),a=function(e,t,n,i){let r=e[0],o=e.slice(-1)[0],a=t.px.start+o.x,s=o.width;n||(a=t.px.length+t.px.start-(o.x+o.width));let l=30,c=14,u=cY(e),d="S"===e[0],h="";if(i&&(l=38,u)){var f;r=(f=e[0])in cX?cX[f]:f.slice(1),l=30,c=30;let i=`${e[0]} ${e[1]} ${e[2]}`;if((n&&o.x+o.width>t.px.length+3||!n&&o.x+o.width>t.px.length+3)&&(console.debug(`Truncate protein topology feature: ${i}`),s-=o.x+o.width-t.px.length,n||(a+=s)),h='data-topology="true"',s<0)return console.debug(`Width < 0, omit protein topology feature: ${i}`),""}let[p,m]=function(e){if("S"===e)return["#FF2","#F99"];if("Extracellular"===e)return["#EEF","#AAF"];if("Cytoplasmic"===e)return["#FFFBCC","#CCC89A"];if("Helical"===e||e.startsWith("Helical ---"))return[cq,cz];if("Lumenal"===e)return["#FFEA66","#FFB466"];else if("Lumenal, melanosome"===e)return["#EEBB00","#A99A89"];else if("Mitochondrial matrix"===e)return["#DFD","#CDC"];else if("Mitochondrial intermembrane"===e)return["#BCB","#9A9"];else if("Perinuclear space"===e)return["#EEDDFF","#A771C9"];else if("Nuclear"===e)return[cH,cW];else if("Beta stranded"===e)return[c_,cS];else if(e.includes("conserved site")||e.includes("conserved domain")||"WGR domain"===e||"R3H domain"===e||e.includes("QLQ")||"Sema domain"===e||"Proteasome component (PCI) domain"===e||"Sterol-sensing domain"===e||"Erythropoietin/thrombopoietin"===e||"SPRY domain"===e||"Anaphylatoxin/fibulin"===e||"Tetratricopeptide repeat"===e||"Doublecortin domain"===e||e.includes("Glycosyl transferase")||e.toLowerCase().includes("lethal")&&e.toLowerCase().includes("c-terminal")||e.includes("PUB")||e.includes("Myogenic determination")||"Globin"===e||"GPS motif"===e||e.includes("D-like")||e.toLowerCase().includes("insertion domain")||"Macro domain"===e)return[cv,cb];else if(e.includes("active site")||e.includes("hydroxylation site")||e.includes("catalytic domain")||e.includes("Lipid transport")||"BRCA1, serine-rich domain"===e||"Tower domain"===e||e.endsWith("attachment site")||e.endsWith("amyloid-beta peptide")||"Reverse transcriptase domain"===e||"Membrane attack complex component/perforin (MACPF) domain"===e||"Alpha-2-macroglobulin"===e||"Kinesin motor domain"===e||"Adenomatous polyposis coli tumour suppressor protein"===e||e.includes("endostatin"))return[cg,cy];else if("Cyclin, C-terminal domain"===e||e.includes("OB C-terminal domain")||"Cationic amino acid transporter, C-terminal"===e||"High mobility group box domain"===e||"HMG-box domain"===e||e.includes("CUB domain")||"C-5 cytosine methyltransferase"===e||e.includes("(G-protein), alpha subunit")||"SCAN domain"===e||"Apolipoprotein A/E"===e||e.includes("Clusterin")||e.includes("SMAD domain")||"PLAC"===e||e.endsWith("tripeptidyl peptidase II")||"Prohormone convertase enzyme"===e||e.includes("rod domain")||"Osteopontin"===e||"SPRY-associated"===e||"C1q domain"===e||"OAR domain"===e||e.includes("FTO, C-terminal")||e.includes("ATPase, C-terminal")||e.includes("Hint domain")||"Laminin IV"===e||"NACHT-associated domain"===e||e.includes("FANCD2")||e.startsWith("Acyl-CoA")&&e.endsWith("C-terminal")||"Kinesin-like"===e||"GUCT"===e||e.includes("(APC) repeat")||e.includes("IP3R"))return[cw,cx];else if(e.includes("trypsin domain")||e.includes("scaffold dimerization")||e.includes("eIF-4 gamma, MA3")||"Troponin"===e||"SKI/SNO/DAC domain"===e||e.toLowerCase().includes("large ribosom")||e.includes("KA1")||"V(D)J recombination-activating protein 1"===e||e.toLowerCase().includes("opiod")||"Corticotropin-releasing factor"===e||e.includes("2Fe-2S ferredoxin")||e.includes("acidic domain"))return["#E88","#A55"];else if("EGF-like calcium-binding domain"===e||e.includes("PTX/LNS")||"HSR domain"===e||e.includes("MutS, clamp")||e.includes("S5 domain 2-like")||e.endsWith("CC1/2")||e.includes("MUN")||e.includes("second molybdopterin"))return[cP,cI];else if(e.includes("binding site")||"EF-hand domain"===e||e.includes("EF hand-like")||"Zinc finger, nuclear hormone receptor-type"===e||e.includes("Serpin domain")||"Peptidase C14,  p20 domain"===e||"PWWP domain"===e||"Peptidoglycan binding-like"===e||"MAD homology 1, Dwarfin-type"===e||"F-actin binding"===e||e.includes("Glycoside hydrolase")&&e.endsWith("domain")||"p53 tumour suppressor family"===e||"Menin"===e||e.includes("von Hippel")&&e.includes("beta")||"Pointed domain"===e||e.includes("DNA binding")||"Helix-hairpin-helix domain"===e||"Helix-hairpin-helix motif"===e||"MIR motif"===e||"Rad52 family"===e||"Oxidoreductase FAD/NAD(P)-binding"===e||e.endsWith("NAD-binding")||e.endsWith("NAD binding")||e.includes("Bromo adjacent")||"HARP domain"===e||"FATC domain"===e||e.startsWith("XRN2-binding")||"SRCR-like domain"===e||e.includes("SRCR")||"Gamma-carboxyglutamic acid-rich (GLA) domain"===e||"Pterin-binding domain"===e||"Receptor, ligand binding region"===e||e.includes("DHEX domain")||"SANT/Myb domain"===e||e.includes("Forkhead-associated")||"Rap/Ran-GAP domain"===e||e.endsWith("C2 domain")||e.includes("tri-helix bundle domain")||e.includes("Cx50")||e.includes("tyrosine-rich")||"Filaggrin"===e)return[c_,cS];else if(e.includes("dehydrogenase, molybdopterin binding")||"Zinc finger CCHC HIVEP-type"===e||"Cyclin, N-terminal"===e||"MAD homology, MH1"===e||"Sodium ion transport-associated"===e||"Sodium ion transport-associated domain"===e||e.endsWith("head")||e.includes("Pleckstrin homology domain")||"PH domain"===e||e.endsWith("pleckstrin homology-like domain")||"DEP domain"===e||"Post-SET domain"===e||e.includes("Glycoside hydrolase")||"Pyridoxal phosphate-dependent decarboxylase"===e||e.includes("OB1")||e.includes("OB3")||e.includes("OB domain")||"Fork head domain"===e||"Histone deacetylase domain"===e||e.includes("MG1")||"Homocysteine-binding domain"===e||e.startsWith("Acyl-CoA")&&e.endsWith("N-terminal")||"Clathrin light chain"===e||"Hexokinase, N-terminal"===e)return[ck,cL];else if(e.includes("zinc-binding")||e.includes("DNA-binding")||"RUNT domain"===e||"G protein-coupled receptor, rhodopsin-like"===e||e.includes("CXC domain")||e.includes("Homeobox domain")||e.includes("BRCT domain")||e.includes("EF-hand")||"Laminin G domain"===e||"Peptidase C14, caspase non-catalytic subunit p10"===e||"ADD domain"===e||"PDZ domain"===e||"Krueppel-associated box"===e||"Ets domain"===e||"P domain"===e||e.includes("bHLH")||"Ras-associating (RA) domain"===e||"Ras-associating domain"===e||"Calcium/calmodulin-dependent protein kinase II, association-domain"===e||"Bromodomain"===e||"Bromodomain associated domain"===e||"SLIDE domain"===e||"Peptidase M24"===e||"Pentraxin-related"===e||e.includes("Notch ligand")||"Anti-proliferative protein"===e||e.includes("transpeptidase")||"Tuberin-type domain"===e||"Ras-like guanine nucleotide exchange factor, N-terminal"===e||e.includes("factor-binding protein")||e.includes("GPD")||"ELM2 domain"===e)return[cT,cM];else if("SH2 domain"===e||e.includes("SH2-like domain")||e.includes("Furin-like")||e.includes("heparin-binding")||"SRCR domain"===e||"EGF-like domain"===e||"Basic leucine zipper domain, Maf-type"===e||e.startsWith("Leucine zipper")||e.includes("Interleukin")&&e.includes("propeptide")||"Sirtuin family"===e||"Amino acid/polyamine transporter I"===e||"Peptidase M10, metallopeptidase"===e||"Metallothionein"===e||"DDHD domain"===e||"Zinc finger C2H2-type"===e||"Zinc finger, PARP-type"===e||e.endsWith("tail domain")||"SET domain"===e||"Hamartin"===e||e.includes("von Hippel")&&e.includes("alpha")||e.includes("transactivation domain 2")||"Phosphopantetheine binding ACP domain"===e||"Multicopper oxidase, second cupredoxin domain"===e||"Helicase, C-terminal"===e||e.includes("Carboxylesterase")||e.includes("presequence")||e.endsWith("CC3"))return[cE,c$];else if("Insulin-like"===e||"Fibroblast growth factor family"===e||"Nerve growth factor-related"===e||"Transforming growth factor-beta, C-terminal"===e||"Telomere-length maintenance and DNA damage repair"===e||"PDGF/VEGF domain"===e||e.includes("SH3-RhoGEF")||e.includes("MG4")||e.includes("RING domain")||e.includes("RING-type")||e.startsWith("DEAD/DEAH")||"Laminin alpha, domain I"===e||e.toLowerCase().includes("nuclear/hormone receptor")||"P-type trefoil domain"===e||e.includes("KHDRBS"))return[cP,cI];else if("SH3 domain"===e||"Variant SH3 domain"===e||e.endsWith("SH3 domain")||e.includes("copper-binding")||"Sushi/SCR/CCP domain"===e||e.includes("Coagulation factor 5/8")||"Basic-leucine zipper domain"===e||"Basic region leucine zipper"===e||"Sirtuin family, catalytic core domain"===e||"Amine oxidase"===e||e.includes("peroxidase")||e.includes("lid domain")||e.includes("prodomain")||"Pre-SET domain"===e||e.includes("transactivation domain")||e.includes(" activation domain")||e.includes("activating region")||"Thioesterase"===e||e.toLowerCase().includes("thiored")||e.includes("esterase")||e.endsWith("Claudin superfamily")||"Retinoblastoma-associated protein, A-box"===e||e.includes("Between PH and SH2")||e.includes("inter-SH2")||"Chromogranin A/B/C"===e||e.toLowerCase().includes("helicase")||e.endsWith("pro-domain")||"Brix domain"===e||"Coagulation Factor Xa inhibitory site"===e||"Trypsin Inhibitor-like, cysteine rich domain"===e||"WIF domain"===e||e.toLowerCase().includes("cystatin")||"EGF domain"===e||"Axin beta-catenin binding"===e||"Peptidase M2, peptidyl-dipeptidase A"===e||e.endsWith("phosphatase domain")||"PIGA, GPI anchor biosynthesis"===e||e.startsWith("Acyl-CoA")&&e.endsWith("middle domain")||e.includes("(COR)")||"K Homology domain, type 2"===e||e.includes("Phox")||e.includes("PB1")||e.includes("multifunctional domain")||e.includes("MutS, core")||"RAP domain"===e||e.endsWith("CC5")||e.includes("first molybdopterin"))return[cD,cN];else if("Immunoglobulin-like domain"===e||e.toLowerCase().endsWith("immunoglobulin-like domain")||e.endsWith("Ig domain")||e.endsWith("Ig-like domain")||"Major facilitator superfamily domain"===e||e.includes("interface")||"Class I myosin tail homology domain"===e||"Myosin tail"===e||"Acyl transferase"===e||e.endsWith("transferase")||e.startsWith("Acyl-CoA")||"JAK, FERM F2 lobe domain"===e||"Sodium/solute symporter"===e||e.includes("foci domain")||e.includes("Receptor L-domain")||"Wnt"===e||"R-spondin, Fu-CRD domain"===e||e.endsWith("merisation domain")||e.endsWith("merization domain")||e.endsWith("merisation motif")||e.endsWith("merization motif")||e.endsWith("BTB/POZ domain")||e.includes("CBS domain")||"DZF domain"===e||"GS domain"===e||e.includes("kinase domain")||e.includes("FAT")||e.startsWith("von Willebrand factor, type A")||e.includes("VWA")||"Reeler domain"===e||"BMP/retinoic acid-inducible neural-specific protein"===e||"Low-density lipoprotein (LDL) receptor class A repeat"===e||"TILa domain"===e||e.includes("chromosome condensation")||"Immunoglobulin I-set"===e||"Kinesin-associated"===e||"SMCs flexible hinge"===e||e.includes("Cys-His rich domain"))return[cA,cC];else if("Immunoglobulin"===e||"Immunoglobulin domain"===e||"CD20-like family"===e||"Calponin homology domain"===e||e.endsWith("Calponin-homology domain")||e.includes("ATPase")||e.includes("ATP coupling domain")||e.includes("globular domain")||"Mitochondrial substrate/solute carrier"===e||"Major facilitator,  sugar transporter-like"===e||"Major facilitator, sugar transporter-like"===e||"Sodium:neurotransmitter symporter"===e||e.toLowerCase().includes("methyltransferase")||"Rhodanese-like domain"===e||e.startsWith("Thyroglobulin")||"Retinoblastoma-associated protein, B-box"===e||"C-type lectin-like"===e||"Galectin, carbohydrate recognition domain"===e||"VWFC domain"===e||e.includes("CFC domain")||"POLO box domain"===e||e.endsWith("domain 1")||e.endsWith("domain II")||"Fibronectin, type I"===e||"Cadherin-like"===e||"G-protein gamma-like domain"===e||"GoLoco motif"===e||"MyTH4 domain"===e||e.endsWith("isomerase")||"BTB/Kelch-associated"===e||"Stathmin family"===e)return[cH,cW];else if("Immunoglobulin C1-set"===e||e.includes("GTPase")||"RGS domain"===e||"Major facilitator superfamily"===e||"Fibronectin type II domain"===e||e.includes("ectodomain")||e.endsWith("receptor domain")||e.endsWith("receptor domain 4")||"MAM domain"===e||"IPT domain"===e||e.endsWith("extracellular")||"Link domain"===e||e.includes("connector domain")||"WW domain"===e||"WHIM1 domain"===e||"TNFR/NGFR cysteine-rich region"===e||"Frizzled domain"===e||"Netrin module, non-TIMP type"===e||"CFTR regulator domain"===e||e.endsWith("domain 2")||"GNAT domain"===e||"NIDO domain"===e||"Myosin head, motor domain"===e||"von Willebrand domain, type D domain"===e||"Kinesin-like KIF1-type"===e||e.includes("Paxillin")||"Clathrin, heavy chain/VPS, 7-fold repeat"===e||"Collagen IV, non-collagenous"===e)return[cO,cR];else if("Fibronectin type III"===e||"Tissue factor"===e||"Immunoglobulin C2-set"===e||e.includes("immunoglobulin C2-set")||e.includes("protein interaction")||"SWIRM domain"===e||e.includes("(DSL) protein")||"Dishevelled protein domain"===e||e.endsWith("domain 3")||"DnaJ domain"===e||e.toLowerCase().includes("nuclear receptor")||"Gonadal family"===e)return[cF,cB];else if("Immunoglobulin V-set domain"===e||e.includes("V-set domain")||e.includes("V-like")||"Frizzled/Smoothened, 7TM"===e||e.endsWith("domain 4")||"Integrin alpha-2"===e||"Calcium-activated potassium channel BK, alpha subunit"===e||e.includes("Dbl homology (DH) domain")||e.includes("Glycine rich")||e.toLowerCase().includes("exonuclease")||"WHIM2 domain"===e||e.includes("Coactivator CBP")||e.includes("cryptic polo"))return["#51087E","#8138AE"];else if("Desmoplakin, spectrin-like domain"===e||"Spectrin repeat"===e||e.endsWith("TED domain")||"Polyadenylate-binding protein/Hyperplastic disc protein"===e||e.includes(" cap domain")||e.toLowerCase().includes("agenet")||e.includes("TATA")||e.includes("Citron")||"RIH domain"===e||e.toLowerCase().includes("sclerostin")||"ZU5 domain"===e||"Piezo domain"===e||"Histone H2A/H2B/H3"===e)return["#FF3","#AA0"];else if("Armadillo"===e||e.includes("Apple domain")||"Protocadherin"===e||"DIX domain"===e||"Ferritin-like diiron domain"===e||"4Fe-4S dicluster domain"===e||"Transferrin-like domain"===e||"PAS domain"===e||"PAS fold"===e||"Polyketide synthase, dehydratase domain"===e||"Flavodoxin/nitric oxide synthase"===e||"Flavodoxin-like fold"===e||"G-patch domain"===e||"Chromo domain"===e||e.toLowerCase().includes("tudor")||"Cytochrome P450"===e||"Potassium channel domain"===e||"G2 nidogen/fibulin G2F"===e||e.includes("bait region")||"WWE domain"===e||e.endsWith("deiodinase")||"Cobalamin (vitamin B12)-binding domain"===e||"Laminin domain II"===e||"Troponin I residues 1-32"===e||"KI67R"===e||e.includes("FAD-binding")||e.includes("Glucagon"))return[cV,cU];else if(e.includes("Kringle")||e.includes("Peptidase M12A")||"TGF-beta, propeptide"===e||e.includes("autopeptidase")||e.includes("GAIN")||"PIK-related kinase"===e||e.includes("(PIK) domain")||"LDLR class B repeat"===e||"Actin family"===e||"Ferritin/DPS protein domain"===e||"PAS fold-3"===e||"Polyketide synthase, ketoreductase domain"===e||e.startsWith("Heat shock protein")&&e.endsWith("family")||"BAG domain"===e||"MCM domain"===e||e.endsWith("reductase-like")||"Lipase"===e||"Phospholipase A2 domain"===e||"Notch domain"===e||e.includes("LCCL domain")||e.includes("SANT-like")||"VWF/SSPO/Zonadhesin-like, cysteine-rich domain"===e||"Kappa casein"===e||"Casein, alpha/beta"===e||"Natriuretic peptide"===e||"EMI domain"===e||"Neurohypophysial hormone"===e||"Synuclein"===e||e.includes("Hydroxymethylglutaryl-CoA reductase")||e.includes("Perilipin")||e.includes("lipase")||e.includes("CRAL")||e.includes("SAND")||e.toLowerCase().includes("hsp")||e.toLowerCase().includes("bombesin"))return[cq,cz];else if("Notch, NOD domain"===e||"Cadherin, Y-type LIR-motif"===e||"Protein patched/dispatched"===e||e.includes("membrane-proximal")||"LicD family"===e||e.includes("MoaB/Mog"))return["#C87D32","#722810"];else if(e.includes("transmembrane domain")||e.includes("trans-membrane domain")||e.includes("Transmembrane protein")||e.includes("7TM")||"Major intrinsic protein"===e||e.includes("Triadin")||e.includes("Collectrin")||e.includes("membrane glycoprotein")||"SEA domain"===e||"CD36 family"===e||e.includes("CD34")||"Hypoxia-inducible factor, alpha subunit"===e||"Hypoxia-inducible factor, alpha subunit-like"===e||"PKD domain"===e||e.includes("regulatory domain")||e.endsWith("E2 domain")||"PLAT/LH2 domain"===e||"Notch, NODP domain"===e||"Syndecan/Neurexin domain"===e||"Zona pellucida domain"===e||e.includes("Ion transport domain")||e.endsWith("Membrane transport protein MMPL domain")||e.includes("Caveolin")||"Band 7 domain"===e||e.includes("Shisa")||"ABC-2 family transporter protein"===e||"Anoctamin"===e||"Sodium-dependent phosphate transport protein"===e||e.includes("MHC II-interacting"))return[cG,cj];else if("DAPIN domain"===e||"Death effector domain"===e||"Death domain"===e||e.includes("death protein")||e.toLowerCase().includes("lethal")||e.includes("UBA domain")||e.includes("HECT domain")||e.toLowerCase().includes("ubiquitin")||e.includes("necrosis")||e.toLowerCase().includes("death")||e.includes("Bcl-2")||e.includes("CIDE-N")||"Disintegrin domain"===e||e.includes("TRAF")||e.includes("TIR")||e.toLowerCase().includes("caspase")||"Pellino family"===e)return["#888","#333"];else if(e.includes("unknown function")||e.toLowerCase().includes("unstructured")||e.startsWith("Uncharacterised"))return["#AAA","#555"];else if(e.toLowerCase().includes("leucine rich repeat")||e.includes("HIN")||e.includes("calcium")||e.toLowerCase().includes("calreticulin")||e.includes("cytokine receptor")||e.includes("pore forming")||e.includes("RHIM")||e.includes("SWIB")||"Ryanodine receptor Ryr"===e||e.includes("Armadillo")||"UME domain"===e||e.includes("WD40 domain")||"WSTF/Acf1/Cbp146"===e||"BCL7"===e||e.endsWith("repeat ring region")||e.includes("PANDER")||"GPCR, rhodopsin-like, 7TM"===e||"GPCR, family 2, secretin-like"===e||"GPCR, family 3, nine cysteines domain"===e||"G-protein coupled receptor"===e||e.toLowerCase().includes("orexin")||"[2Fe-2S]-binding"===e)return["#DD8300","#883000"];else if(e.includes("repeat")||"Vitellinogen, open beta-sheet"===e||e.includes("Interleukin")&&e.includes("family")||/Interleukin-\d+$/.test(e)||"Chemokine interleukin-8-like domain"===e||e.includes("beta-ribbon")||e.includes("cytoplasmic domain")||e.toLowerCase().includes("interleukin")||"Citrate transporter-like domain"===e||e.toLowerCase().includes("calsequestrin"))return[cV,cU];else if(e.includes("inhibit")||e.includes("central")||e.endsWith("tail")||e.endsWith("helical domain")||e.endsWith("helical domain HD2")||e.endsWith("coiled-coil domain")||e.endsWith("coiled-coil region")||e.includes("zinc ribbon fold")||e.includes("zinc-ribbon")||e.toLowerCase().includes("anhydrase")||"Macroglobulin domain"===e||e.includes("KH0")||e.includes("EGF")||e.toLowerCase().includes("olfact")||e.toLowerCase().includes("mucin"))return[cD,cN];else if(e.includes("Peptidase")||e.includes("Ras-binding")||e.includes("CRIB domain"))return[c_,cS];else if(e.toLowerCase().includes("zinc finger")||e.toLowerCase().includes("zinc-finger")||e.includes("RING finger")||e.toLowerCase().includes("transcription factor")||"Paired domain"===e||"JmjC domain"===e||"BRK domain"===e||e.includes("MG3")||e.toLowerCase().includes("polycomb")||e.toLowerCase().includes("metallopeptidase")||e.toLowerCase().includes("metallo-peptidase")||e.toLowerCase().includes("metalloenzyme")||"K Homology domain, type 1"===e||e.includes("winged helix")||e.toLowerCase().includes("dehydrogenase")||e.includes("BAR")||e.includes("metal")||e.includes("redoxin"))return[cE,c$];else if(e.startsWith("Tyrosine-protein kinase receptor")||"PTB/PI domain"===e||e.endsWith("receptor")||e.includes("cysteine rich")||e.includes("cysteine-rich")||"AWS domain"===e||e.toLowerCase().includes("somatomedin b")||e.includes("MHC class II")&&!e.includes("C-terminal"))return[cO,cR];else if(e.toLowerCase().includes("golgi")||"GOLD domain"===e||e.includes("deaminase")||e.includes("C-terminal core")||e.includes("nucleoside triphosphatase")||e.includes("globin")||e.includes("IspD/TarI")||"Telethonin"===e||e.includes("Sarcoglycan")||e.includes("toxin")||e.includes("ShKT")||e.includes("SAM")||e.includes("Sterile alpha motif")||e.includes("Unconventional myosin-X")||"CARD domain"===e||e.includes("endonuclease")||e.toLowerCase().includes("splicing factor")||e.toLowerCase().includes("interferon")||"Tropomyosin"===e||e.includes("R1 domain"))return[cv,cb];else if(e.includes("TM")||e.toLowerCase().includes("transmembrane")||e.toLowerCase().includes("trans-membrane"))return[cG,cj];else if(e.includes("binding domain")||e.includes("binding protein"))return[cT,cM];else if(e.includes("Ribosomal protein")||e.toLowerCase().includes("ribosomal subunit")||e.toLowerCase().includes("ribosom")||e.toLowerCase().includes("ribonuclease"))return[cP,cI];else if(e.includes("lectin")||e.includes("recognition")||e.toLowerCase().includes("solute carrier")||e.includes("isomerase")||"Clathrin-H-link"===e)return[cH,cW];else if(e.startsWith("von Willebrand factor")||e.endsWith("receptor-binding")||e.toLowerCase().includes("link")||e.includes("basic domain")||e.includes("interacting")||e.includes("domain IV")||e.toLowerCase().includes("immunoglobulin domain"))return[cF,cB];else if(e.includes("transferase")||e.includes("merisation"))return[cA,cC];else if(e.includes("oxygenase"))return[cg,cy];else if(e.includes("phosphatase")||e.includes("RNA polymerase")||e.includes("catenin"))return[cD,cN];else if(e.includes("bind")||e.includes("EF"))return[c_,cS];else if(e.includes("C-termin")||e.includes("C termin")||e.includes("kinase"))return[cw,cx];else if(e.includes("N-termin")||e.includes("N-teminal")||e.includes("N termin")||e.toLowerCase().includes("decarboxylase")||e.toLowerCase().includes("hydrolase")||e.includes("PH domain")||e.includes("cytosolic")||e.toLowerCase().includes("homeobox"))return[ck,cL];return["#D8D8D8","#888"]}(r);d&&(r="Signal peptide",c=8,l+=3),u&&("Helical"===r?r="Transmembrane":r.startsWith("Helical --- Name=")&&(r=r.replace("Helical --- Name=","Transmembrane: ")));let g=`${e[2]}&nbsp;aa`,y=`data-subpart="${r} ${c2} ${g}"`,v=`x="${a}" width="${s}" y="${l}" height="${c}"`,b=`class="subpart domain${u?" topology":""}" `;return`<rect ${b} rx="1.5" fill="${p}" ${v} ${y} ${h}/>`+function(e,t,n,i,r,o=!1){let a=t+i,s=`stroke="${r}"`,l=`x1="${e}" x2="${e}" y1="${t}" y2="${a}" ${s}`,c=e+n,u=`x1="${c}" x2="${c}" y1="${t}" y2="${a}" ${s}`,d=`<line class="subpart-line" ${l} />`,h=`<line class="subpart-line" ${u} />`,f="",p="";if(o){let n=`x1="${e}" x2="${c}" y1="${t}" y2="${t}" ${s}`,i=`x1="${e}" x2="${c}" y1="${a}" y2="${a}" ${s}`;f=`<line class="subpart-line" ${n} />`,p=`<line class="subpart-line" ${i} />`}return d+h+f+p}(a,l,s,c,m,!u)}(t,c,n,i);r?d.push(a):o.push(a)}let h=`<rect class="_ideoProteinLine"x="${c.px.start}" width="${c.px.length}" y="${i?"43":"35"}" height="4" fill="#${i?"BBB":"DDD"}" stroke="#${i?"555":"777"}" />`;return d.push(h),o=d.concat(o),[`<g id="_ideoProtein">${o.join("")}</g>`,null]}(m,i,p,w,t),C=await c1(e,i,t),S=ux(i,n).toLocaleString(),k=[`${f.exon} exons`,`<span id='_ideoTranscriptLengthBp'>${S} bp</span> `];if(A){let e=A.toLocaleString();k.push(`<span id='_ideoProteinLengthAa'>${e} aa</span> `)}let L=e.biotype.replace(/_/g," ");"protein coding"!==L&&k.push(L);let T=b+k.join(` ${c2} `),M=""===x?30:50;w&&(M=60);let E="";return C&&(M+=18,E='transform="translate(0, 18)"'),[`<svg class="_ideoGeneStructure" data-ideo-gene-structure-name="${m}" data-ideo-strand="${r}" data-ideo-footer="${T}" width="268" height="${M}" ${v}><g class="rnaProteinDiagrams" ${E}>`+c.join("")+x+'</g><g class="variantsDiagrams">'+C+"</g></svg>",a,s]}async function uk(e,t,n){let i="",r=e.name;if(t.config.showGeneStructureInTooltip&&!n&&"geneStructureCache"in Ideogram!=!1&&r in Ideogram.geneStructureCache!=!1){t.addedSubpartListeners=!1,"spliceExons"in Ideogram==!1&&(Ideogram.spliceExons=!0);let e=Ideogram.spliceExons,n=Ideogram.geneStructureCache[r][0],o=(await uS(n,t,e))[0],a=function(e){let t=Ideogram.spliceExons,n=t?"":"pre-",i=`class="_ideoSpliceToggle ${n}mRNA"`,r=t?"checked":"",o=uy(t),a=`data-tippy-content="${o}" data-tippy-placement="right"`,s=`type="checkbox" ${r} style="display: none;"`,l=`${i} style="position: relative; top: -10px; user-select: none; float: right; cursor: pointer; font-size: 16px; padding: 2px 4px; border: 1px solid #CCC; border-radius: 3px;" ${a}`;return`<label ${l}><input ${s} />&#x2702;</label>`}(0),s=e?"":" pre-mRNA",l=`class="_ideoGeneStructureContainerName${s}"`,{name:c,title:u}=uv(e),d=`${l} title="${u}"`;i=c7+'<div class="_ideoGeneStructureContainer">'+`<div class="_ideoGeneStructureContainerHead"><span ${d}>${c}</span>${a}</div>`+'<span class="_ideoGeneStructureSvgContainer" >'+o+'</span><div class="_ideoGeneStructureFooter">'+ue+"</div></div>"}return i}window.swapUTRsForward=us;let uL={Arrow:["acts on","acted on by"],TBar:["inhibits","inhibited by"],"mim-binding":["binds","binds"],"mim-catalysis":["catalyzes","catalyzed by"],"mim-cleavage":["cleaves","cleaved by"],"mim-conversion":["converts","converted by"],"mim-gap":["interacts with","interacts with"],"mim-inhibition":["inhibits","inhibited by"],"mim-modification":["modifies","modified by"],"mim-necessary-stimulation":["necessarily stimulates","necessarily stimulated by"],"mim-stimulation":["stimulates","stimulated by"],"mim-transcription-translation":["transcribes / translates","transcribed / translated by"]};function uT(e){return Object.values(e).find(e=>e.length>0&&"ixnType"in e[0])[0].ixnType.toLowerCase()}function uM(e,t){if(void 0===e||""===e)return[[],[]];let n=Array.from(e.querySelectorAll(`DataNode[TextLabel="${t}"]`)).map(e=>({type:"node",matchedLabel:t,textLabel:e.getAttribute("TextLabel"),graphId:e.getAttribute("GraphId"),groupRef:e.getAttribute("GroupRef")})),i=n.map(e=>e.graphId),r=n.map(e=>e.groupRef).map(e=>`Group[GroupId="${e}"]`).join(","),o=[];""!==r&&(o=Array.from(e.querySelectorAll(r)).map(e=>({type:"group",matchedLabel:t,graphId:e.getAttribute("GraphId"),groupId:e.getAttribute("GroupId")})));let a=o.map(e=>e.graphId);return[i.concat(a),n.concat(o)]}async function uE(e){if(!navigator.onLine)return"";let t=`${e}.xml.gz`,n=`https://cdn.jsdelivr.net/npm/ixn2/${t}`,i=await fetch(n);if(!i.ok)return console.log(`Gracefully degrading as request failed for: ${n}`),"";let r=await i.blob(),o=rU(rj(new Uint8Array(await r.arrayBuffer())));return new DOMParser().parseFromString(o,"text/xml")}function u$(e,t){return null==e?t:"function"==typeof e?e:t=>t[e]}function uP(e,t=!1){let n=new Float64Array(5),i=new Float64Array(4);!function(e,t,n){let i,r,o=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),s=Math.exp(-1.723/n),l=.6318/n,c=1.997/n,u=Float64Array.of(-a*Math.cos(l),a*Math.sin(l),-a*Math.cos(-l),a*Math.sin(-l),-s*Math.cos(c),s*Math.sin(c),-s*Math.cos(-c),s*Math.sin(-c)),d=2.5066282746310007*n,h=Float64Array.of(o[0],o[1],0,0,0,0,0,0),f=Float64Array.of(1,0,u[0],u[1],0,0,0,0,0,0);for(r=2;r<8;r+=2){for(h[r]=u[r]*h[r-2]-u[r+1]*h[r-1],h[r+1]=u[r]*h[r-1]+u[r+1]*h[r-2],i=r-2;i>0;i-=2)h[i]+=u[r]*h[i-2]-u[r+1]*h[i-1],h[i+1]+=u[r]*h[i-1]+u[r+1]*h[i-2];for(i=0;i<=r;i+=2)h[i]+=o[r]*f[i]-o[r+1]*f[i+1],h[i+1]+=o[r]*f[i+1]+o[r+1]*f[i];for(f[r+2]=u[r]*f[r]-u[r+1]*f[r+1],f[r+3]=u[r]*f[r+1]+u[r+1]*f[r],i=r;i>0;i-=2)f[i]+=u[r]*f[i-2]-u[r+1]*f[i-1],f[i+1]+=u[r]*f[i-1]+u[r+1]*f[i-2]}for(r=0;r<4;++r)i=r<<1,t[r]=h[i]/d,e[r+1]=f[i+2]}(n,i,e);let r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,s=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:e,negative:t,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:s}}function uI(e,t,n,i,r,o,a,s,l,c){let u,d,h,f=Math.abs(i)*n,p=i<0?f+i:0;for(d=0;d<s;++d)for(h=1,c[d]=d<=o?r[d]:0;h<=s&&h<=d;++h)c[d]-=a[h]*c[d-h];for(h=0;h<s;++h)for(e[h]=0,d=1;d<=h;++d)(u=p+i*d)>=0&&u<f&&(e[h]+=c[h-d]*t[u]);let m=t[p];if(m>0)for(h=0;h<s;++h)e[h]+=c[h]*m}function uD(e,t){let n=e.length;if(!n)return NaN;if((t*=1)<=0||n<2)return e[0];if(t>=1)return e[n-1];let i=(n-1)*t,r=Math.floor(i),o=e[r];return o+(e[r+1]-o)*(i-r)}function uN(e,t,n=!0,i=0,r=null){let o=function(e,t){let n=0;for(let i=0;i<e.length;i++){let r=e[i],o=r.expression.max;if(t){if(r.tissue===t){n=o;break}}else o>n&&(n=o)}return n}(e,r),a=0;r&&(a=e.find(e=>e.tissue===r).expression.min);let s=["max","q3","median","q1","min"];return e.map(e=>{if(e.px={},n)for(let n=0;n<s.length;n++){let r=s[n],l=t*(e.expression[r]-a)/(o-a)+i;Math.round(l)>t&&(e.px[r+"Raw"]=l,l+=t-l),l+=i,e.px[r]=l}else{let n=e.expression.min,r=e.expression.max;for(let o=0;o<s.length;o++){let a=s[o],l=t*(e.expression[a]-n)/(r-n)+i;e.px[a]=l}}return e}),e}function uF(e,t,n,i,r=!1){let o=e[t],a=!1;r&&o>48&&(o=49,a=!0);let s=a?12:e[t+"Height"];isNaN(s)&&(s=12);let l=i-s,c=l+n+s,u=e.max-e.min<=8,d="median"===t,h=u&&d;return{x:o,y1:l+n+.5,y2:c,style:h?"display: none":"",endStyle:a&&d||h?"display: none;":""}}function uB(e,t,n,i,r,o=!1){let a=e[0].toUpperCase()+e.slice(1),{x:s,y1:l,y2:c,style:u}=uF(t,e,i,r),d=""===u?"":`style="${u}"`,h=iD(iF(n,.55),n),f=`x1="${s}" y1="${l}" x2="${s}" y2="${c}" ${d} `+(o?'stroke-dasharray="3" ':"")+`class="_ideoExpression${a}" `;return`<line stroke="${h}" ${f} />`}function uO(e,t,n,i){let r=uB("median",e,i,t,n,!1);return[r,uB("q1",e,i,t,n,!0),uB("q3",e,i,t,n,!0)]}function uR(e,t,n,i=64,r=!1){let o=e.expression.quantiles,a=e.px,s=e.samples,l=[];o.map((e,t)=>{for(let n=0;n<e;n++)l.push(t)});let c=Array.from(function(e,t={}){let n,{adjust:i=1,pad:r=3,bins:o=512}=t,a=u$(t.x,e=>e),s=u$(t.weight,()=>1/e.length),l=t.bandwidth??i*function(e,t){let n=e.map(t).filter(e=>null!=e&&e>=e);n.sort((e,t)=>e-t);let i=function(e){let t,n=e.length,i=0,r=0,o=0;for(let a=0;a<n;++a){let n=e[a];t=n-r,r+=t/++i,o+=t*(n-r)}return i>1?Math.sqrt(o/(i-1)):NaN}(n),r=uD(n,.25),o=uD(n,.75);return 1.06*(Math.min(i,(o-r)/1.34)||i||Math.abs(r)||1)*Math.pow(n.length,-.2)}(e,a),[c,u]=t.extent??function(e,t,n=0){let i,r,o=e.length;for(let n=0;n<o;++n){let o=t(e[n],n,e);null!=o&&(void 0===i?o>=o&&(i=r=o):(o<i&&(i=o),o>r&&(r=o)))}return[i-n,r+n]}(e,a,r*l),d=function(e,t,n,i,r,o){let a=new Float64Array(o),s=(o-1)/(r-i);for(let r=0;r<e.length;++r){let l=e[r],c=t(l,r,e),u=n(l,r,e);if(!(Number.isFinite(c)&&Number.isFinite(u)))continue;let d=(c-i)*s,h=Math.floor(d),f=h+1;0<=h&&f<o?(a[h]+=(f-d)*u,a[f]+=(d-h)*u):-1===h?a[f]+=(d-h)*u:f===o&&(a[h]+=(f-d)*u)}return a}(e,a,s,c,u,o),h=(u-c)/(o-1),f=d.some(e=>e<0),p=uP(l/h,f);function*m(e="x",t="y"){let n=g.grid(),i=1/h;for(let r=0;r<o;++r)yield{[e]:c+r*h,[t]:n[r]*i}}let g={[Symbol.iterator]:m,points:m,grid:()=>n||(n=function(e,t,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),s=r,l=uI){let c,u,d=2*i,h=3*i,f=4*i,p=i*n;for(l(r,t,n,i,e.b_causal,3,e.a,4,e.sum_causal,a,e.sigma),u=4,c=f;u<n;++u,c+=i)r[u]=e.b_causal[0]*t[c]+e.b_causal[1]*t[c-i]+e.b_causal[2]*t[c-d]+e.b_causal[3]*t[c-h]-e.a[1]*r[u-1]-e.a[2]*r[u-2]-e.a[3]*r[u-3]-e.a[4]*r[u-4];for(l(o,t,n,-i,e.b_anticausal,4,e.a,4,e.sum_anticausal,a,e.sigma),u=4,c=p-5*i;u<n;++u,c-=i)o[u]=e.b_anticausal[1]*t[c+i]+e.b_anticausal[2]*t[c+d]+e.b_anticausal[3]*t[c+h]+e.b_anticausal[4]*t[c+f]-e.a[1]*o[u-1]-e.a[2]*o[u-2]-e.a[3]*o[u-3]-e.a[4]*o[u-4];if(e.negative)for(u=0,c=0;u<n;++u,c+=i)s[c]=r[u]+o[n-u-1];else for(u=0,c=0;u<n;++u,c+=i)s[c]=Math.max(0,r[u]+o[n-u-1]);return s}(p,d,o)),extent:()=>[c,u],bandwidth(e){return arguments.length?(e!==l&&(n=null,p=uP((l=e)/h,f)),g):l}};return g}(l,{bins:i,bandwidth:s>=70?.7:1.5})).filter(e=>0<=e.x&&e.x<=10);if(0===c.length)return"";let u=Math.max(...c.map(e=>e.y)),d=c[0].x,h=c.slice(-1)[0].x,f=(("maxRaw"in a?a.maxRaw:a.max)-a.min)/(h-d),p=n+t,m=0,g=c.map((e,t)=>{let i=(e.x-d)*f+a.min;r&&i>48&&(i=48);let o=n*(e.y/u);return t>0&&["q1","median","q3"].forEach(e=>{let t=a[e];m<t&&t<=i&&(a[e+"Height"]=o)}),m=i,`${i},${p-o}`}),y=a.max,v=a.min;r&&(a.max>48&&(y=48),a.min>48&&(v=48)),g.push(y+","+p),g.push(v+","+p);let b=g[0];return g.push(b),[g.join(" "),a]}function uH(e,t,n,i,r,o=64){let[a,s]=uR(e,t,n,o),l=`fill="${i}" stroke="${r}" points="${a}" class="tissue-curve" data-tissue-curve="${e.tissue}"`;return[`<polyline ${l} />`,s]}function uW(e,t,n){let i,r=function(e,t,n,i){let r=function(e){let t=`https://www.gtexportal.org/home/gene/${e}`,n=`<a href="${t}" class="_ideoGtexLink" target="_blank">GTEx</a>`;return`<i>Full detail: ${n}</i>`}(e);if(n.length<=3)return`<br/>${r}<br/><br/>`;let o=`<span style="margin: 0 6px; color: #CCC;">|</span>${r}`,a=i.showTissuesMore?"More...":"Less...",s=`left: ${!i.showTissuesMore?1:-50}px;`,l=`style="position: relative; ${s} top: -1px; font-size: 12px"`;return`<div ${l}><a class="_ideoMoreOrLessTissue" style="cursor: pointer;px;">${a}</a>${!i.showTissuesMore?o:""}</div>`}(e,0,t=uN(t,48,!0,0),n),o=n.showTissuesMore?3:10,a=t.slice(0,o).map((t,n)=>{let r;i=1+14*n;let o=(r=t.tissue.replace(/_/g," ").toLowerCase(),["ba24","ba9","basal ganglia","omentum","suprapubic","lower leg","cervical c-1"].forEach(e=>r=r.replace(e,"("+e+")")),["ba24","ba9","ebv"].forEach(e=>{r=r.replace(e,e.toUpperCase())}),["adipose","artery","brain","breast","cells","cervix","colon","heart","kidney","muscle","nerve","skin","small intestine"].forEach(e=>{r=r.replace(e,e+" -")}),r=(r=r.replace("basal ganglia","BG"))[0].toUpperCase()+r.slice(1)),a=`#${t.color}`,s=iF(a,.85),[l,c]=uH(t,i,12,a,s),[u]=uO(c,i,12,a),d=`data-tissue="${t.tissue}"`,h=`height="14" width="48px" fill="#FFF" opacity="0" x="0" y="${i}" data-gene="${e}" `+d,f=`y="${i+12}" style="font-size: 12px;" x="58" `+d;return`<g data-group-tissue="${t.tissue}"><text ${f}>${o}</text>`+l+u+`<rect ${h} class="_ideoExpressionTrace" />`+"</g>"}).join(""),s='style="margin-bottom: 30px;"';return e in Ideogram.geneStructureCache||(s='style="margin-bottom: 10px;"'),`<div class="_ideoTissuePlotContainer" ${s}><div class="_ideoTissueExpressionPlot" style="margin-top: 15px; margin-bottom: -15px;">
        <div class="_ideoTissuePlotTitle" style="margin-bottom: 4px;">Reference expression by tissue</div>
        <svg width="275" height="${i+12+2}" style="position: relative; left: 10px">${a}</svg>
        ${r}
      </div></div>`}function uG(e,t){let n=e.getAttribute("data-tissue");document.querySelector(`text[data-tissue="${n}"]`).setAttribute("fill",t)}function uj(e,t,n=!1){let i=e.getAttribute("data-gene"),r=n?null:e.getAttribute("data-tissue"),o=t.showTissuesMore?3:10,a=Ideogram.tissueExpressionsByGene[i];(a=uN(a,48,!0,0,r).slice(0,o)).forEach((e,t)=>{let i=e.tissue,r=a.find(e=>e.tissue===i),o=1+14*t,s=!n,[l,c]=uR(r,o,12,64,s);a[t].points=l;let u=uF(c,"median",o,12,s);a[t].medianLine=u}),ip.select("._ideoTissueExpressionPlot").selectAll("polyline").data(a).transition().duration(500).attr("points",(e,t)=>a[t].points),ip.select("._ideoTissueExpressionPlot").selectAll("._ideoExpressionMedian").data(a).attr("style",(e,t)=>a[t].medianLine.style).transition().duration(500).attr("x1",(e,t)=>a[t].medianLine.x).attr("x2",(e,t)=>a[t].medianLine.x).attr("y1",(e,t)=>a[t].medianLine.y1).attr("y2",(e,t)=>a[t].medianLine.y2).attr("style",(e,t)=>a[t].medianLine.endStyle)}async function uq(e,t){let n={},i={},r=t.config.organism.replace(/-/g," "),o=e.name.toUpperCase(),a={result:[]};if(Ideogram.interactionCache)o in Ideogram.interactionCache&&(a=Ideogram.interactionCache[o]);else{let e=`https://cdn.jsdelivr.net/npm/ixn2/${o}.json.gz`,t=await fetch(e);if(t.ok){let e=await t.blob();a=JSON.parse(rU(rj(new Uint8Array(await e.arrayBuffer()))))}}a.result.forEach(o=>{if(o.species.toLowerCase()===r){var a,s;let r=o.fields.right.values,l=o.fields.left.values,c=r.concat(l),u=o.name,d=o.id;(a=c.map(e=>({name:e,color:""})),(s=t)&&(a=am(a,s)),a.sort((e,t)=>e.rank-t.rank)).map(e=>e.name).forEach(t=>{let r=t.toLowerCase();if(r.includes(e.name.toLowerCase()))return;let o=u+d+r;if(function(e,t,n,i,r){let o;if("geneCache"in Ideogram&&t.name)o=e.toLowerCase()in Ideogram.geneCache.nameCaseMap;else o=""!==e&&!e.includes(" ")&&!e.includes("/")&&e.toLowerCase()!==t.name.toLowerCase();return o&&!(n in i)}(r,e,o,i,0)){i[o]=1;let e={name:u,pathwayId:d};r in n?n[r].push(e):n[r]=[e]}})}});let s=Object.entries(n).length,l={};if(s>20){let e=Ideogram.geneCache.interestingNames.map(e=>e.toLowerCase());Object.keys(n).map(t=>{let n=1e10;return e.includes(t)&&(n=e.indexOf(t)+1),[t,n]}).filter(([e,t])=>e in n).sort((e,t)=>e[1]-t[1]).slice(0,20).forEach(([e,t])=>l[e]=n[e])}else l=n;return l}async function uz(e){let t=await fetch("https://mygene.info/v3/query"+e+"&size=400");return await t.json()}function uV(e){let t=e.name,n=e.genomic_pos.ensemblgene,i=n;return void 0===n&&(i=e.genomic_pos.filter(e=>!e.chr.includes("_"))[0].ensemblgene),{name:t,ensemblId:i}}function uU(e,t){let n=t.organismScientificName;throw Error(`"${e}" is not a known gene in ${n}`)}function uY(e,t){if(!Ideogram.synonymCache)return null;let n=e.toLowerCase();if(!Ideogram.synonymCache?.nameCaseMap){let e={};for(let t in Ideogram.synonymCache.byGene){let n=Ideogram.synonymCache.byGene[t];e[t.toLowerCase()]=n.map(e=>e.toLowerCase())}Ideogram.synonymCache.nameCaseMap=e}let i=Ideogram.synonymCache.nameCaseMap;for(let e in i)if(i[e].includes(n))return Ideogram.geneCache.nameCaseMap[e];return null}async function uX(e,t,n,i){let r=uK[e];if(r>t)throw TypeError("Failed to fetch from Ideogram third-party service for: "+e);uK[e]+=1;let o=Math.round(500+10*Math.random())*r**2;return console.log(`Failed fetch for ${e} ${r} times, retrying in ${o} ms`),await new Promise(e=>setTimeout(e,o)),await n(...i)}let uK={genes:0};async function uJ(e,t,n){let i;"string"==typeof e&&(e=[e]);let r=e.map(e=>`${t}:${e.trim()}`).join(" OR "),o=n.config.taxid,a=`?q=${r}&species=${o}&fields=`;if(Ideogram.geneCache){let r=function(e,t,n){let i=Ideogram.geneCache,r="symbol"===t,o=r?i.lociByName:i.lociById,a=r?i.idsByName:i.namesById,s=/ENS[A-Z]{0,3}G\d{11}/;return e.map(e=>{let t=!1,l=null;s.test(e)&&(e=e.split(".")[0]);let c=e in i.namesById;if(c&&r)e=i.namesById[e];else{let a=e.toLowerCase();if(!o[e]&&!i.nameCaseMap[a]&&!uY(e,n))if(!r)return;else uU(e,n);r&&!o[e]&&(i.nameCaseMap[a]?e=i.nameCaseMap[a]:(e=uY(l=e,n),t=!0))}let u=o[e],d=r?e:a[e],h=r?a[e]:e;return{symbol:d,name:i.fullNamesById[h],source:"cache",genomic_pos:{chr:u[0],start:u[1],end:u[2],ensemblgene:h},isSynonym:t,isIdentifier:c,synonym:l}}).filter(e=>void 0!==e)}(e,t,n);r.forEach(e=>{let t=e.symbol,i=e.name,r=e.isSynonym,o=e.synonym;t in n.annotDescriptions.annots?(n.annotDescriptions.annots[t].name=i,n.annotDescriptions.annots[t].isSynonym=e.isSynonym,n.annotDescriptions.annots[t].synonym=e.synonym):n.annotDescriptions.annots[t]={name:i,isSynonym:r,synonym:o}}),i={hits:r,fromGeneCache:!0}}else{let r=`${a}symbol,genomic_pos,name`;try{i=await uz(r)}catch(r){"Failed to fetch"===r.message&&navigator.onLine&&(i=await uX("genes",3,uJ,[e,t,n]))}}return i}async function uQ(e,t,n){let i=[],r=Object.keys(e);if(0===r.length)return i;(await uJ(r,"symbol",n)).hits.forEach(r=>{if("genomic_pos"in r==!1||r.symbol===t.name)return;let o=u3(r,n,"purple");i.push(o);let a=e[r.symbol.toLowerCase()];u7(o,function(e,t,n){let i=[],r=[],o="";if(void 0!==t){let e=t.map(e=>{e.pathwayId,i.push(e.pathwayId),r.push(e.name);let t=`class="ideo-pathway-link" style="cursor: pointer" title="View pathway diagram from WikiPathways" data-pathway-id="${e.pathwayId}"`;return`<a ${t}>${e.name}</a>`});e=e.join("<br/>"),o=`Interacts with ${n.name} in:<br/>${e}`}let{name:a,ensemblId:s}=uV(e);return{description:o,ixnsDescription:o,ensemblId:s,name:a,type:"interacting gene",pathwayIds:i,pathwayNames:r}}(r,a,t),n)});let o={};Object.entries(n.annotDescriptions.annots).forEach(([e,t])=>{"type"in t&&t.type.includes("interacting gene")&&(o[e]=t.pathwayIds)});let a={};return Object.entries(o).forEach(([e,t])=>{a[e]={},t.map(async t=>{let n=await uE(t);a[e][t]=n})}),n.gpmlsByInteractingGene=a,i}async function uZ(e,t,n){let i=[],r=e.length&&"string"==typeof e[0];console.log("cached",r);let o=r?e:e.map(e=>e.id);return(await uJ(o,"ensemblgene",n)).hits.forEach(e=>{if("genomic_pos"in e==!1||"name"in e==!1)return;let r=u3(e,n,"pink");i.push(r);let o=Ideogram.tissueCache?"":`Paralog of ${t.name}`,{name:a,ensemblId:s}=uV(e);u7(r,{description:o,ensemblId:s,name:a,type:"paralogous gene"},n)}),i}function u0(e,t){e=u6(e,t),t.drawAnnots(e,"overlay",!0,!0),u4(t)}function u1(e,t){if(!t.config.showParalogNeighborhoods)return;if(t.neighborhoodAnnots?.length>0){t.neighborhoodAnnots.forEach(e=>{t.annotDescriptions.annots[e.name]=e}),u0(t.neighborhoodAnnots,t);return}let n=t.relatedAnnots[0];if((e=u6(e,t)).unshift(n),e.length<2)return;let i={};i[e[0].chr]={},i[e[0].chr][e[0].start]=[e[0]];for(let t=1;t<e.length;t++){let n=e[t],r=n.chr,o=n.start;if(r in i){let e=Object.keys(i[r]);for(let t=0;t<e.length;t++){let a=parseInt(e[t]);2e6>Math.abs(o-a)?i[r][a].push(n):i[r][o]=[n]}}else i[r]={},i[r][o]=[n]}let r=n.name,o=Object.entries(i).map(([e,i],o)=>{let a=parseInt(Object.keys(i)[0]),s=Object.values(i)[0];if(s.length<2)return{paralogs:s};let l=!1;s[0].name===n.name&&(s=s.slice(1),l=!0);let c="paralog"+(s.length>1?"s":""),u=`${s.length} nearby ${c} of ${r}`,d=t.chromosomes[t.config.taxid][e].bpLength,h=a-75e5,f=a+75e5;f>d?(h=a-15e6,f=d):h<1&&(h=1,f=15e6),"geneCache"in Ideogram&&(s=s.map(e=>{e.fullName=Ideogram.geneCache.fullNamesById[e.id];let t=Ideogram.geneCache.interestingNames;return t.includes(e.name)?e.rank=t.indexOf(e.name)+1:e.rank=1e10,e}));let p=a.toLocaleString(),m=`chr${e}:${p} \xb1 2 Mbp`,g={name:"paralogNeighborhood-"+o,chr:e,start:h,stop:f,color:"pink",description:u,paralogs:s,type:"paralog neighborhood",displayCoordinates:m,includesSearched:l};return t.annotDescriptions.annots[g.name]=g,g}).filter(e=>e.paralogs.length>1||e.includesSearched);t.neighborhoodAnnots=o,o.length>0&&u0(o,t)}async function u2(e,t){let n,i=t.config.taxid;if(Ideogram.paralogCache){let t=Ideogram.paralogCache.paralogsByName,i=e.name.toUpperCase();n=i in t?t[i]:[]}else{let r=`&format=condensed&type=paralogues&target_taxon=${i}`,o=t.config.organism.replace("-","_"),a=`/homology/id/${o}/${e.id}?${r}`;n=(await Ideogram.fetchEnsembl(a)).data[0].homologies}let r=await uZ(n,e,t);return r.filter(e=>!e.name.match(/^AC[0-9.]+$/))}function u5(e,t){let n=null;return Array.isArray(e.genomic_pos)?e.genomic_pos.filter(e=>e.chr in t.chromosomes[t.config.taxid])[0]:e.genomic_pos}function u3(e,t,n="red"){let i=u5(e,t);return{name:e.symbol,chr:i.chr,start:i.start,stop:i.end,id:i.ensemblgene,color:n}}function u8(e){let t,n=e.innerText.toLowerCase();return n.includes("interacting")&&(t="interacting"),n.includes("paralogous")&&(t="paralogous"),n.includes("searched")&&(t="searched"),t}function u4(e,t=0){let n=document.querySelector("#_ideogramInnerWrap"),i=df({}).legendPad,r=`position: absolute; top: 15px; left: ${i+20+t}px`,o=document.querySelector("#_ideogramLegend");n.prepend(o),o.style=r;function a(t){var n=t.target;n.classList+=" active";let i={interacting:"purple",paralogous:"pink",searched:"red"}[u8(n)];if(e.config.showAnnotLabels){e.clearAnnotLabels(),e.flattenAnnots().forEach(e=>{e.color!==i&&(document.getElementById(e.domId).style.display="none")});let t=e.flattenAnnots().sort((t,n)=>e.annotSortFunction(t,n)).filter(e=>e.color===i),n=Math.min(t.length,20);e.fillAnnotLabels(t,n)}e.onHoverLegendCallback&&e.onHoverLegendCallback()}function s(){if(document.querySelectorAll("#_ideogramLegend li").forEach(e=>{e.classList.remove("active")}),e.flattenAnnots().forEach(e=>{document.getElementById(e.domId).style.display=null}),e.config.showAnnotLabels){let t=e.flattenAnnots().sort((t,n)=>e.annotSortFunction(t,n));e.fillAnnotLabels(t)}}document.querySelectorAll("#_ideogramLegend li._ideoLegendEntry").forEach(e=>{e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",s);let t=u8(e),n=`data-tippy-content="${{interacting:"Adjacent to searched gene in a biochemical pathway, per WikiPathways",paralogous:"Evolutionarily related to searched gene by a duplication event, per Ensembl"}[t]}" `,i=`class="_ideoLegendEntry" style="position: inherit; left: inherit" ${n}`;"paralogous"===t?e.innerHTML=`<span ${i}>Paralogous genes</span>`:"interacting"===t&&(e.innerHTML=`<span ${i}>Interacting genes</span>`)});let l=`<style>
    ${ce}

    .tippy-box {
      font-size: 12px;
    }

    .tippy-content {
      padding: 3px 7px;
    }

    #_ideogramLegend li {
      padding-left: 5px;
      border-radius: 2px;
    }

    #_ideogramLegend li.active {
      color: #00C;
      background-color: #EEF;
    }
    </style>`;document.querySelector("#_ideogramLegend").insertAdjacentHTML("afterBegin",l);let c=iB();c.maxWidth=180,c.offset=[-30,10],e.legendTippy=l9("._ideoLegendEntry[data-tippy-content]",c)}function u6(e,t){if("all"===t.config.annotsInList)return e;let n=[];return e.forEach(e=>{t.config.annotsInList.includes(e.name.toLowerCase())&&n.push(e)}),n}function u9(e,t){var n,i,r,o;if("name"in e?(e.name,t.name,r=e.color,o=t.color):([n,r]=[e[0],e[3]],[i,o]=[t[0],t[3]]),"initRank"in e==!1){if("red"===r)return -1;if("red"===o)return 1;if("purple"===r&&"pink"===o)return -1;if("purple"===o&&"pink"===r)return 1}return e.rank-t.rank}function u7(e,t,n){let i,r=n.annotDescriptions.annots;if(e.name in r){let n=r[e.name];if(i=t,t.type===n.type)return;Object.keys(n).forEach(function(e){e in i==!1&&(i[e]=n[e])}),"type"in n&&!Ideogram.tissueCache&&(i.type+=", "+n.type,i.description+=`<br/><br/>${n.description}`)}else i=t;n.annotDescriptions.annots[e.name]=i}function de(){return Ideogram.tissueCache&&Object.keys(Ideogram.tissueCache).length>0}async function dt(e,t){if(!de())return void function e(t,n,i){setTimeout(()=>{i<40&&(de()?dt(t,n):e(t,n,i+1))},50)}(e,t,0);let n={},i=Ideogram.tissueCache,r=[];e.forEach(async e=>{let o=new Promise(async r=>{let o=await i.getTissueExpressions(e,t);n[e]=o,r()});r.push(o)}),await Promise.all(r),Ideogram.tissueExpressionsByGene=n}function dn(e,t){var n;let i=t.relatedAnnots;if(i.length>1&&t.onFindGenesCallback&&t.onFindGenesCallback(),n=u6(n=i=function(e){let t={},n=[];return e.forEach(e=>{e.name in t==!1?(n.push(e),t[e.name]=1):"purple"===e.color&&(n=n.map(t=>e.name===t.name?e:t))}),n}(i),t),t.drawAnnots(n),t.config.showAnnotLabels){let e=t.flattenAnnots().sort((e,n)=>t.annotSortFunction(e,n));t.fillAnnotLabels(e)}u4(t),function(e,t){if("pathway"===e)return;let n=t.getRelatedGenesByType(),i={paralogous:"interacting",interacting:"paralogous"}[e],r=n[e].length,o=n[i]?n[i].length:0;if(t._didRelatedGenesFirstPlot)if(r>0&&o>0){let e=t.time.rg.timestampFirstPlot;t.time.rg.totalLastPlotDiff=ch(e)}else r>0&&0===o?(t.time.rg.timestampFirstPlot=performance.now(),t.time.rg.totalFirstPlot=ch(t.time.rg.t0),t._relatedGenesFirstPlotType=e):0===r&&o>0||(t._relatedGenesFirstPlotType="searched"),t.time.rg.totalLastPlotDiff=0;else t._didRelatedGenesFirstPlot=!0,t.time.rg.totalFirstPlot=ch(t.time.rg.t0),r>0&&(t.time.rg.timestampFirstPlot=performance.now(),t._relatedGenesFirstPlotType=e)}(e,t)}async function di(e,t){let n=performance.now(),i=await uJ(e,"symbol",t);if(0===i.hits.length)return;let r=i.hits.find(e=>{let n=u5(e,t);return n&&n.ensemblgene}),o={description:"",ensemblId:r.genomic_pos.ensemblgene,type:"searched gene"};r.symbol in t.annotDescriptions.annots?o=Object.assign(t.annotDescriptions.annots[r.symbol],o):o.name=r.name,t.annotDescriptions.annots[r.symbol]=o;let a=u3(r,t);return t.relatedAnnots.push(a),t.time.rg.searchedGene=ch(n),a}function dr(e){var t=document.querySelector(e.config.container);t.style.visibility="",t.style.position="absolute",t.style.width="100%";var n=document.querySelector("#_ideogramInnerWrap");n.style.position="relative",n.style.marginLeft="auto",n.style.marginRight="auto",n.style.overflowY="hidden",document.querySelector("#_ideogramMiddleWrap").style.overflowY="hidden";let i=e.config.legendPad;if(void 0===e.didAdjustIdeogramLegend){var r=document.querySelector("#_ideogram");n.style.maxWidth=parseInt(n.style.maxWidth)+160+i+"px",r.style.minWidth=parseInt(r.style.minWidth)+i+"px",r.style.maxWidth=parseInt(r.style.minWidth)+i+"px",r.style.position="relative",r.style.left="160px",e.didAdjustIdeogramLegend=!0}}async function da(e=null){var t,n;if(!e)return dm(this);this.clearAnnotLabels();let i=document.querySelector("#_ideogramLegend");i&&i.remove(),this.config=df(this.config),function(e,t){let n=e.getScientificName(e.config.taxid),i=Ideogram.version,r=`# ${t}
# Organism: ${n}
# Generated by Ideogram.js version ${i}, https://github.com/eweitz/ideogram
# Generated at ${window.location.href}`;delete e.annotDescriptions,e.annotDescriptions={headers:r,annots:{}}}(this,`Related genes for ${e}`);let r=this.selector;document.querySelectorAll(r+" .annot").forEach(e=>e.remove()),this.startHideAnnotTooltipTimeout(),document.querySelectorAll(".chromosome").forEach(e=>{e.style.cursor=""}),dr(this),this.relatedAnnots=[],this.neighborhoodAnnots=[];let o=await di(e,this);void 0===o&&uU(e,this),this.config.legend=dd,o8(this),u4(this),await Promise.all([(t=this,new Promise(async e=>{let n=performance.now(),i=await uq(o,t),r=await uQ(i,o,t);t.relatedAnnots.push(...r),dn("interacting",t),t.time.rg.interactions=ch(n),u1(r,t),e()})),(n=this,new Promise(async e=>{let t=performance.now(),i=await u2(o,n);n.relatedAnnots.push(...i),dn("paralogous",n),u1(i,n),n.time.rg.paralogs=ch(t),e()}))]),this.time.rg.total=ch(this.time.rg.t0),function(e){let t=cm(e),n=e.time.rg.total,i=e.time.rg.totalFirstPlot,r=e.time.rg.totalLastPlotDiff,o=e.time.rg.paralogs,a=e.time.rg.interactions,s=e.time.rg.searchedGene,l=Object.assign({firstPlotType:e._relatedGenesFirstPlotType,timeTotal:n,timeTotalFirstPlot:i,timeTotalLastPlotDiff:r,timeSearchedGene:s,timeInteractingGenes:a,timeParalogs:o},t);e.relatedGenesAnalytics=l}(this),this.onPlotFoundGenesCallback&&this.onPlotFoundGenesCallback()}function ds(e){return Object.entries(e.annotDescriptions.annots).find(([e,t])=>"searched gene"===t.type)[0]}async function dl(e){if(e.name===this.prevClickedAnnot?.name&&e.name===this.prevShownAnnot?.name&&!this.hasShownAnnotSinceClick&&this.isTooltipCooling)return this.prevShownAnnot=e,null;this.prevShownAnnot=e,this.hasShownAnnotSinceClick=!0;let t=this.annotDescriptions.annots[e.name];"related"===this.config.relatedGenesMode&&(t=function(e,t,n){if("type"in t&&t.type.includes("interacting gene")){let i=t.pathwayIds,r=ds(n),o=n.gpmlsByInteractingGene[e.name],a=function(e,t,n,i){let r=null;if(!navigator.onLine)return"Interacts with";let o=function(e,t,n,i){let r={};return n.map(n=>{let o=function(e,t,n){if(void 0===n||""===n)return[];let[i,r]=uM(n,t),[o,a]=uM(n,e),s={searchedGene:r,interactingGene:a},l=i.concat(o),c={searchedGeneGraphIds:i,matchingGraphIds:l},u=[];return Array.from(n.querySelectorAll("Interaction Graphics")).forEach(e=>{let t=function(e,t){let n=null,{searchedGeneGraphIds:i,matchingGraphIds:r}=t,o=[],a=0,s=!1,l=null,c=null;return Array.from(e.children).forEach(e=>{if("Point"!==e.nodeName)return;let t=e.getAttribute("GraphRef");if(null!==t&&r.includes(t)&&(a+=1,o.push(t),i.includes(t)&&(s=!0),e.getAttribute("ArrowHead"))){let n=e.getAttribute("ArrowHead"),r=i.includes(t);null===c&&(c=+!r);try{l=uL[n][+!r]}catch(e){}}}),a>=2&&s&&((null===c||null===l)&&(l="interacts with"),l=l[0].toUpperCase()+l.slice(1),n={interactionId:e.parentNode.getAttribute("GraphId"),endIds:o,ixnType:l}),n}(e,c);null!==t&&(t.elements=s,u.push(t))}),u}(e,t,i[n]);r[n]=o}),r}(e,t,n,i),a=o[n[0]];if(a.length>0){let e={ixnsByPwid:o,isSameByPwid:{},isSame:null,isDirectionSameByPwid:{},isDirectionSame:null,directionsByPwid:{}};r=(e=function(e){let t=!0,n=e.ixnsByPwid,i=uT(n);return Object.entries(n).map(([n,r])=>{let{isRefMatch:o,thisIsSame:a}=function(e,t){let n=!0,i=!0;if(0===e.length)return{isRefMatch:n,thisIsSame:i};let r=e[0].ixnType.toLowerCase();return e.forEach(e=>{let o=e.ixnType.toLowerCase();o!==t&&(n=!1),o!==r&&(i=!1)}),{isRefMatch:n,thisIsSame:i}}(r,i);a&&o||(t=!1),e.isSameByPwid[n]=a}),e.isSame=t,e}(e)).isSame?a[0].ixnType:(e=function(e){let t=!0,n=[],i=[];Object.values(uL).forEach(e=>{i.push(e[0]),n.push(e[1])});let r="Acts on",o="Acted on by",a=e.ixnsByPwid,s=uT(a),l=i.includes(s)?r:o;return Object.entries(a).map(([n,a])=>{let s=!0;if(a.length>0){let c=a[0].ixnType.toLowerCase(),u=i.includes(c)?r:o;a.forEach(a=>{let c=a.ixnType.toLowerCase(),d=i.includes(c)?r:o;e.directionsByPwid[n]=d,d!==l&&(t=!1),d!==u&&(s=!1)})}e.isDirectionSameByPwid[n]=s}),e.isDirectionSame=t,!0===t&&(e.direction=l),e}(e)).isDirectionSame?e.direction:"Interacts with"}return r}(e.name,r,i,o);null!==a&&(t.description=t.description.replace("Interacts with",a))}return t}(e,t,this));let n=t.description.length>0?`<br/>${t.description}`:"",i=t.name,r="color: #0366d6; cursor: pointer;",o=i;if("rank"in e){let t="Ranked "+e.rank+" in general or scholarly interest";o=`<span title="${t}">${i}</span>`}let a="";if(t?.isSynonym){let e=t.synonym;a=`<div style="font-style: italic">Synonym: ${e}</div>`}let s=e.name.includes("paralogNeighborhood"),l=await uk(e,this,s),c=function(e,t){if(!Ideogram.tissueCache||!(e.name in Ideogram.tissueCache.byteRangesByName))return"<br/>";void 0===t.showTissuesMore&&(t.showTissuesMore=!0);let n=e.name,i=Ideogram.tissueExpressionsByGene[n];if(i)return uW(n,i,t)}(e,this),u=`<span id="_ideoGeneSymbolAndFullName">
      <span id="ideo-related-gene" style="${r}">${e.name}</span><br/>${o}<br/>
    </span>`+a+n+c+l;return s&&([e,u]=function(e,t,n){let i=t.paralogs.sort((e,t)=>e.rank-t.rank),r="Paralog neighborhood<br/><br/>"+t.description+":<br/>"+`${i.map(e=>{let t="";if(e.fullName&&(t=e.fullName),e.rank){let n=e.rank;t+=` &#013;Ranked ${n} in general or scholarly interest`}return""!==t&&(t=`title="${t}"`),`<span class="ideo-paralog-neighbor" ${t} style="${n}"'>${e.name}</span>`}).join("<br/>")}`+"<br/>";return e.displayCoordinates=t.displayCoordinates,[e,r]}(e,t,r)),e.displayName=u,e}let dc="triangle";function du(e,t=null){let n=`<div style="font-size: 14px; font-weight: bold; font-color: #333;">${e}</div>`;return t&&(n=t),`
    <div style="position: relative; left: 30px;">
      ${n}
      <i>Click gene to search</i>
    </div>
  `}let dd=[{name:du("Related genes"),nameHeight:50,rows:[{name:"Interacting gene",color:"purple",shape:dc},{name:"Paralogous gene",color:"pink",shape:dc},{name:"Searched gene",color:"red",shape:dc}]}];du("Related genes");let dh=[{name:du("Highly cited genes"),nameHeight:30,rows:[]}];function df(e){return e.legendPad=e.showAnnotLabels?70:30,e}let dp={chrWidth:9,chrHeight:100,chrLabelSize:12,annotationHeight:7,showFullyBanded:!1,rotatable:!1,legend:dd,chrBorderColor:"#333",chrLabelColor:"#333",onBeforeDrawAnnots:function(){!function(e){let t=[],n=e.chromosomesArray.map(e=>e.name);if("relatedAnnots"in e){e.relatedAnnots=u6(e.relatedAnnots,e);let t={};e.relatedAnnots=e.relatedAnnots.filter(e=>!(e.name in t)&&(t[e.name]=1,!0))}let i={};e.annots.forEach(t=>{let n=t.annots.sort((t,n)=>-e.annotSortFunction(t,n));i[t.chr]=n});let r={};Object.entries(i).forEach(([e,i])=>{r[e]={chr:e,annots:[]},i.forEach((t,i)=>{t.domId=aa(n.indexOf(e),i),r[e].annots.push(t)}),t.push(r[e])}),e.annots=t}(this);let e=[],t=this.annots;for(let n=0;n<t.length;n++){let i=t[n].annots;for(let t=0;t<i.length;t++){let r=i[t];if(e.push(r.name),this.config.colorMap&&r.differentialExpression?.length){let e=this.config.colorMap,i=r.differentialExpression[0].group;r.color=e[i],this.annots[n].annots[t]=r}}}dt(e,this.config)},onWillShowAnnotTooltip:dl,onDidShowAnnotTooltip:function(){Ideogram.tissueCache&&function(){let e=document.querySelector("._ideogramTooltip"),t=e.getBoundingClientRect().top,n=document.querySelector("#_ideogram").getBoundingClientRect().top;t>n&&(e.style.top=n+"px")}(),function(e){let t=document.querySelector("._ideogramTooltip");e.addedTooltipClickHandler||(t.addEventListener("click",t=>{var n,i;if(["input","label"].includes(t.target.localName))return;let r=document.querySelector("#ideo-related-gene");r||(r=t.target);let o=(n=r.textContent,e.annots.forEach(e=>{e.annots.forEach(e=>{n===e.name&&(i=e)})}),null===i&&(i=e.annotDescriptions.annots[n]),i);e.onClickAnnot(o)}),e.addedTooltipClickHandler=!0)}(this),function(e){if(null!==uo(e)){document.addEventListener("keydown",ua);let t=document.querySelector("._ideoGeneStructureContainer"),n=document.querySelector("._ideoSpliceToggle");t&&n.addEventListener("change",async t=>{uw(e),up(e),t.stopPropagation()}),up(e),document.querySelector("._ideoGeneStructureContainer").addEventListener("click",async t=>{"_ideoGeneStructureMenu"===t.target.id&&t.stopPropagation();let n=t.target;if("svg"===n.parentElement.tagName&&(n=n.parentElement),Array.from(n.classList).includes("_ideoMenuArrow")){let i=n.getAttribute("data-dir");await ui(e,"down"===i?1:-1),t.stopPropagation()}}),function(e){let t=uo(e)[0].strand;if("+"===t)return;let n=document.querySelector("._ideoTooltipFooter");n.innerText=n.innerText.replace(")",`, ${t})`)}(e),ug(e)}}(this),function e(t){let n=document.querySelector("._ideoMoreOrLessTissue");n&&n.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault(),t.showTissuesMore=!t.showTissuesMore;let i=document.querySelector("._ideoTissueExpressionPlot").parentElement,r=document.querySelector("#ideo-related-gene").innerText,o=Ideogram.tissueExpressionsByGene[r];i.innerHTML=uW(r,o,t),e(t)});let i=document.querySelectorAll("._ideoExpressionTrace");i.forEach(e=>{e.addEventListener("mouseenter",()=>{uG(e,"#338"),uj(e,t),function(e,t){let n,i=e.getAttribute("data-gene"),r=e.getAttribute("data-tissue"),o=Ideogram.tissueExpressionsByGene[i].find(e=>e.tissue===r);o=uN([o],225,!1,35)[0];let a=`#${o.color}`,s=iF(a,.85),[l,c]=uH(o,1,50,a,s,256),[u,d,h]=uO(c,0,50,a),f=function(e,t){let n=e.px.min,i=e.expression.min,r=e.px.max,o=e.expression.max,a=e.px.median,s=e.expression.median,l=r/2,c='stroke="#CCC" stroke-width="1px"',u={config:{weight:400,annotLabelSize:12}},d=71,h=82,f=52,p=60,m=i$("Max",u).width,g=i$(o,u).width,y=`x1="${r}" x2="${r}" y1="${f}" y2="${p}" ${c}`,v=`<line ${y} /><text x="${r-m/2}" y="${d}">Max.</text><text x="${r-g/2}" y="${h}">${o}</text>`,b=i$("Min",u).width,w=i$(i,u).width,x=n-b/2,A=n-w/2,C=n+b,S=`x1="${n}" x2="${n}" y1="${f}" y2="${p}" ${c}`,k=i$("Median",u).width,L=i$(s,u).width,T=`x1="${a}" x2="${a}" y1="${f}" y2="${p}" ${c}`,M=a-k/2,E=a-L/2;C>=M&&(M=a,E=a),C>=M&&(M+=1.5,E+=1.5,x=n-b-1.5,A=n-w-1.5);let $=`<line ${T} /><text x="${M}" y="${d}">Median</text><text x="${E}" y="${h}">${s}</text>`,P=`x="${l-40}" y="${101}"`,I=`x="${l-70}" y="${114}"`;return`<g><line ${S} /><text x="${x}" y="${d}" >Min.</text><text x="${A}" y="${h}" >${i}</text>`+v+$+`<text ${P}>Expression (TPM)</text>`+`<text ${I}>Samples: ${e.samples} | Source: GTEx</text>`+"</g>"}(o,0),p=document.querySelector("._ideoGeneStructureContainer"),m=document.querySelector("._ideoTooltipFooter");p?(n=p,p.style.display="none",m.style.display="none"):(n=m,document.querySelector("._ideoTissuePlotContainer").setAttribute("style","margin-bottom: 20px"));let g='<div class="_ideoDistributionContainer" style="position: relative; height: 119.5px"<svg width="280px" height="119.5px" style="position: absolute; top: 2px; left: -5px;">'+f+l+u+d+h+"</svg></div>";n.insertAdjacentHTML("beforebegin",g)}(e,0)}),e.addEventListener("mouseleave",()=>{uG(e,"#000"),uj(i[0],t,!0),function(){let e=document.querySelector("._ideoDistributionContainer");if(!e)return;e.remove();let t=document.querySelector("._ideoGeneStructureContainer");t&&(t.style.display=""),document.querySelector("._ideoTooltipFooter").style.display=""}(e,t)})})}(this);var e,t=this;let n=document.querySelectorAll(".ideo-pathway-link");n.length>0&&!t.addedPathwayClickHandler&&n.forEach(e=>{e.addEventListener("click",function(e){let n=e.target.getAttribute("data-pathway-id"),i=ds(t);cd(n,i,document.querySelector("#ideo-related-gene").textContent,void 0,void 0,void 0,function(e,t){return console.log("in geneNodeHoverFn"),"<div>ok "+t+"</div><div>1234</div>"},function(e,t){console.log("in pathwayNodeClickFn, pathwayNode",e.target),console.log("in pathwayNodeClickFn, pathwayId",t)}),e.stopPropagation()})}),e=this,document.querySelectorAll("._ideoVariant").forEach(t=>{t.addEventListener("mouseover",t=>{cZ(t,!1,e)}),t.addEventListener("click",n=>{cZ(n,!0,e),n.stopPropagation(),t.removeEventListener("mouseout",c0)}),t.addEventListener("mouseout",c0)}),this.tissueTippy=l9("._ideoGeneTissues[data-tippy-content]",iB())},showTools:!0,showAnnotLabels:!0,showGeneStructureInTooltip:!0,showProteinInTooltip:!0,showVariantInTooltip:!1,chrFillColor:{centromere:"#DAAAAA"}};function dm(){let e=this;if(!e||"annotDescriptions"in e)return;e.annotDescriptions={annots:{}},e.flattenAnnots().map(t=>{let n=[];"significance"in t&&"n/a"!==t.significance&&n.push(t.significance),"citations"in t&&void 0!==t.citations&&n.push(t.citations),n=n.join("<br/><br/>"),e.annotDescriptions.annots[t.name]={description:n,name:decodeURIComponent(t.fullName)}}),dr(e),u4(e,-60);let t=e.config.container;if(document.querySelector(t).style.visibility="",e.config.showAnnotLabels){let t=e.flattenAnnots().sort((t,n)=>e.annotSortFunction(t,n));e.fillAnnotLabels(t)}}function dg(e,t,n){if("all"!==n&&(n=n.map(e=>e.toLowerCase())),t.annotsInList=n,e.legendPad=e.showAnnotLabels?80:30,"onWillShowAnnotTooltip"in t){let n="onWillShowAnnotTooltip",i=t[n],r=e[n];e[n]=function(e){return e=r.bind(this)(e),e=i.bind(this)(e)},delete t[n]}if("onDidShowAnnotTooltip"in t){let n="onDidShowAnnotTooltip",i=t[n],r=e[n];e[n]=function(e){return e=r.bind(this)(e),e=i.bind(this)(e)},delete t[n]}if("onBeforeDrawAnnots"in t){let n="onBeforeDrawAnnots",i=t[n],r=e[n];e[n]=function(){r&&r.bind(this)(),i.bind(this)()},delete t[n]}if("onDrawAnnots"in t){let n="onDrawAnnots",i=t[n],r=e[n];e[n]=function(){r&&r.bind(this)(),i.bind(this)()},delete t[n]}let i=new Ideogram(Object.assign(e,t));return t.onFindGenes&&(i.onFindGenesCallback=t.onFindGenes),t.onPlotFoundGenes&&(i.onPlotFoundGenesCallback=t.onPlotFoundGenes),t.onHoverLegend&&(i.onHoverLegendCallback=t.onHoverLegend),i.getTooltipAnalytics=cp,i.annotSortFunction=u9,i.time={rg:{t0:performance.now()}},"_didRelatedGenesFirstPlot"in i&&delete i._didRelatedGenesFirstPlot,i}class dy{constructor(e){this.configure=iR,this.initDrawChromosomes=ow,this.onLoad=oA,this.handleRotateOnClick=ox,this.init=function e(t){var n,i=(t=t||this).config.container;oS[i]?(o_[i]=!0,oC[i]=t):(oS[i]=!0,(n=t,new Promise(function(e){var t=n.config.organism;"number"==typeof t?n.getOrganismFromEutils(t,function(){n.getTaxids(e)}):n.getTaxids(e)})).then(function(n){var r=n[0];t.config.taxid=r,t.config.taxids=n,t.organismScientificName=t.getScientificName(t.config.taxid);var o,a,s,l=new Date().getTime(),c=t,u=[];for(s in o={},ih)o[s]="";for(a=0;a<n.length;a++)o=function(e,t,n){var i,r,o,a,s,l,c,u,d=n.config;s=n.organisms[e],d.assembly||(n.config.assembly="default"),l=s.assemblies,c=n.assemblyIsAccession()?d.assembly:l[d.assembly],r=[iL((i=n.organisms[e]).scientificName)],o=i.assemblies,a=n.config.resolution,c!==o.default&&r.push(c),"9606"===e&&""!==a&&850!==a&&r.push(a),r=r.join("-"),["9606","10090","10116"].includes(e)&&!n.config.showFullyBanded&&(r+="-no-bands"),u=r+=".json";var h="-1"===e;return(e in n.organismsWithBands||h)&&(t[e]=u),t}(s=String(n[a]),o,c),u.push(function(e,t,n,i){var r,o,a;return(r=ob(t,e,i),(void 0===window.chrBands||""!==ov||ov!==r)&&"assembly"in(o=i).config&&!1===/(GCA_)/.test(o.config.assembly)&&e in t)?(a=ob(t,e,i),!i.numBandDataResponses&&(i.numBandDataResponses=0),iy(a).then(function(e){return e.json().then(function(n){ov=a,delete window.chrBands,window.chrBands=n.chrBands,function(e,t,n,i){var r,o,a;for(r in t)a=t[r],e.includes(a)&&""!==a&&(o=r);i.bandData[o]=n}(e.url,t,chrBands,i)})})).then(function(){return i.processBandData(e)}):new Promise(function(t){i.processBandData(e),t([e,void 0])})}(s,o,0,c));Promise.all(u).then(function(e){var t,n,i;for(a=0;a<e.length;a++)n=(t=e[a])[0],i=t[1],"bandsArray"in c==!1&&(c.bandsArray={}),c.bandsArray[n]=i;c.writeContainer(l)}),oS[i]=!1,o_[i]&&(o_[i]=!1,e(oC[i]))}))},this.finishInit=os,this.writeContainer=oy,this.onLoadAnnots=oB,this.onDrawAnnots=oO,this.processAnnotData=as,this.restoreDefaultTracks=an,this.updateDisplayedTracks=ai,this.initAnnotSettings=au,this.fetchAnnots=af,this.drawAnnots=o4,this.getHistogramBars=o1,this.drawHeatmaps=oN,this.deserializeAnnotsForHeatmap=oF,this.fillAnnots=ap,this.drawProcessedAnnots=o6,this.drawSynteny=at,this.startHideAnnotTooltipTimeout=oH,this.showAnnotTooltip=oq,this.onWillShowAnnotTooltip=oW,this.onDidShowAnnotTooltip=oG,this.onClickAnnot=oj,this.setOriginalTrackIndexes=ar,this.afterRawAnnots=ad,this.downloadAnnotations=ac,this.addAnnotLabel=oJ,this.removeAnnotLabel=oZ,this.fillAnnotLabels=oQ,this.clearAnnotLabels=o0,this.flattenAnnots=ah,this.highlight=ag,this.unhighlight=ay,this.esearch=aw,this.esummary=ax,this.elink=aA,this.getOrganismFromEutils=aC,this.getTaxids=a_,this.getAssemblyAndChromosomesFromEutils=aS,this.drawBandLabels=a$,this.getBandColorGradients=aP,this.processBandData=aI,this.setBandsToShow=aT,this.hideUnshownBandLabels=ak,this.drawBandLabelText=aM,this.drawBandLabelStalk=aE,this.onBrushMove=aD,this.onBrushEnd=aN,this.createBrush=aF,this.createClickCursor=aO,this.onCursorMove=aB,this.drawSexChromosomes=aR,this.setSexChromosomes=aH,this.convertBpToPx=aW,this.convertPxToBp=aG,this.unpackAnnots=sl,this.packAnnots=sc,this.initCrossFilter=su,this.filterAnnots=sd,this.assemblyIsAccession=im,this.getDataDir=iv,this.round=ib,this.onDidRotate=iw,this.getSvg=ix,this.fetch=iA,this.getTaxid=iC,this.getCommonName=i_,this.getScientificName=iS,this.getChromosomeModel=sf,this.getChromosomePixels=sh,this.drawChromosomeLabels=sM,this.rotateChromosomeLabels=sE,this.appendHomolog=sS,this.drawChromosome=sk,this.rotateAndToggleDisplay=sL,this.setOverflowScroll=sT,this.plotRelatedGenes=da,this.getRelatedGenesByType=cf,this.configure(e)}static get version(){return v}static get d3(){return ip}static async fetchEnsembl(e,t=null,n="GET"){let i={method:n};if(null!==t&&(i.body=JSON.stringify(t)),"GET"===n){let t=e.includes("&")?"&":"?";e+=t+"content-type=application/json"}else i.headers={"Content-Type":"application/json"};let r=await fetch(`https://rest.ensembl.org${e}`,i);return await r.json()}static getChrSortNamesAndTypes(e,t){var n,i,r,o,a,s,l,c,u,d;return"string"==typeof e||"chr"in e&&"annots"in e?(n="string"==typeof e?e:e.chr,i="string"==typeof t?t:t.chr,r="CP"===n,o="CP"===i,a="MT"===n,s="MT"===i,l="AP"===n,c="AP"===i,u=!r&&!a&&!l,d=!o&&!s&&!c):(n=e.name,i=t.name,r="chloroplast"===e.type,o="chloroplast"===t.type,a="mitochondrion"===e.type,s="mitochondrion"===t.type,l="apicoplast"===e.type,c="apicoplast"===t.type,u="nuclear"===e.type,d="nuclear"===t.type),[n,i,{aIsNuclear:u,bIsNuclear:d,aIsCP:r,bIsCP:o,aIsMT:a,bIsMT:s,aIsAP:l,bIsAP:c}]}static sortChromosomes(e,t){let[n,i,r]=dy.getChrSortNamesAndTypes(e,t),{aIsNuclear:o,bIsNuclear:a,aIsCP:s,bIsCP:l,aIsMT:c,bIsMT:u,aIsAP:d,bIsAP:h}=r;if(o&&a)return iT(n)&&iT(i)&&(n=iM(n).toString(),i=iM(i).toString()),n.localeCompare(i,"en",{numeric:!0});if(!o&&a)return 1;if(c&&l)return 1;if(s&&u)return -1;if(!d&&!c&&!s&&(u||l||h))return -1}static initRelatedGenes(e,t="all"){return"leads"===e.relatedGenesMode&&(delete e.onDrawAnnots,delete e.relatedGenesMode),dg(Object.assign({showParalogNeighborhoods:!0,isLegendInteractive:!0,relatedGenesMode:"related",useCache:!0,awaitCache:!0},dp),e,t)}static initGeneLeads(e,t="all"){let n,i;if(delete e.onPlotFoundGenes,e.legendName)if(e.legendContent)dh[0].name=du(e.legendName,e.legendContent);else if(e.geneLeadsDE){let t=`<span style="font-size: 14px; font-weight: bold; left: 0">Gene leads</span> from<br/><div style="margin-top: 10px; padding: 3px 6px; font-size: 14px; font-weight: bold; color: #3D629A;">${fileIcon} <span style="margin-left: 20px; position: relative; top: -1px;">Publication</span></div><div style="margin-top: 3px; margin-bottom: -10px; font-size: 14px; padding: 3px 6px;">${deltaIcon} <span style="margin-left: 20px;">Differential expression</span></div><br/>`;dh[0].name=du(e.legendName,t)}else dh[0].name=du(e.legendName);return e.legend=dh,e.geneLeadsDE?(i="leads",n="annotations/gene_leads.tsv"):(i="hints",n="cache/homo-sapiens-top-genes.tsv"),dg(Object.assign({relatedGenesMode:i,chrMargin:-4,annotationsPath:ig(n),onDrawAnnots:dm,useCache:!0},dp),e,t)}static drawPathway(e,t,n,i,r={height:440,width:900},o=!0,a,s,l=!0,c=!0,u=!0){cd(e,t,n,i,r,o,a,s,l,c,u)}static initCaches(e={organism:"homo-sapiens",useCache:!0,awaitCache:!0,showGeneStructureInTooltip:!0}){oi(e)}static getPathwayGenes(){return Array.from(new Set(Object.values(Ideogram.pathwayJson.entitiesById).filter(e=>["GeneProduct","RNA","Protein"].includes(e.wpType)).map(e=>e.textContent)))}static getPathwayOntologies(e,t){return cu(e,t)}}window.Ideogram=dy;let dv=dy}}]);
//# sourceMappingURL=997.fd7da6d60585e4d5.js.map