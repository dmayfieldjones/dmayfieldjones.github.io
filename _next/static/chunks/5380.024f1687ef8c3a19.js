"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5380],{95380:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var i=a(91682),n=a(92766),r=a(54262),s=a(31177),c=a(72471);class l extends n.BaseFeatureDataAdapter{async configurePre(){let e=this.pluginManager,t=this.getConf("bedGraphGzLocation"),a=this.getConf(["index","location"]),n=this.getConf(["index","indexType"]),r=(0,s.openLocation)(t,e),c="CSI"===n,l=new i.wD({filehandle:r,csiFilehandle:c?(0,s.openLocation)(a,e):void 0,tbiFilehandle:c?void 0:(0,s.openLocation)(a,e),chunkCacheSize:0x3200000}),o=this.getConf("columnNames"),u=await l.getHeader();return{columnNames:o,bedGraph:l,header:u}}async configure(){return this.configured||(this.configured=this.configurePre().catch(e=>{throw this.configured=void 0,e})),this.configured}async getNames(){let{bedGraph:e,columnNames:t}=await this.configure();if(t.length)return t;let a=(await e.getHeader()).split(/\n|\r\n|\r/).filter(e=>!!e).at(-1);return(null==a?void 0:a.includes("	"))?a.slice(1).split("	").map(e=>e.trim()):void 0}async getRefNames(e={}){let{bedGraph:t}=await this.configure();return t.getReferenceSequenceNames(e)}async getHeader(){let{bedGraph:e}=await this.configure();return e.getHeader()}getFeatures(e,t={}){return(0,c.ObservableCreate)(async a=>{var i;let{bedGraph:n}=await this.configure(),{columnNumbers:s}=await n.getMetadata(),c=s.ref-1,l=s.start-1,o=s.end-1,u=l===o,d=(null===(i=await this.getNames())||void 0===i?void 0:i.slice(u?2:3))||[];await n.getLines(e.refName,e.start+(u?-1:0),e.end,{lineCallback:(e,t)=>{let i=e.split("	"),n=i[c],s=+i[l],g=+(u?s+1:i[o]),h=i.slice(o+1);for(let e=0;e<h.length;e++){let i=`${this.id}-${t}-${e}`,c=Math.abs(+h[e]),l=d[e]||`col${e}`;c&&a.next(new r.SimpleFeature({id:i,data:{refName:n,start:s,end:g,score:c,source:l}}))}},...t}),a.complete()})}freeResources(){}}}}]);
//# sourceMappingURL=5380.024f1687ef8c3a19.js.map