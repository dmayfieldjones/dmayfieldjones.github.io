"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1534],{61534:(e,o,r)=>{r.d(o,{drawDensity:()=>n});var l=r(88753),t=r(15715),a=r(64294),c=r(13188);function n(e,o){let{stopToken:r,features:n,regions:f,bpPerPx:p,scaleOpts:i,height:s,config:u}=o,C=f[0],b=(0,l.readConfObject)(u,"bicolorPivot"),d=(0,l.readConfObject)(u,"bicolorPivotValue"),g=(0,l.readConfObject)(u,"negColor"),h=(0,l.readConfObject)(u,"posColor"),k=(0,l.readConfObject)(u,"color"),v=(0,l.readConfObject)(u,"clipColor"),w="none"!==b&&"log"!==i.scaleType,S=(0,c.getScale)({...i,pivotValue:w?d:void 0,range:w?[g,"#eee",h]:["#eee",h]}),j=(0,c.getScale)({...i,range:[0,s]}),m="#f0f"===k?(e,o)=>S(o):(e,o)=>(0,l.readConfObject)(u,"color",{feature:e,score:o}),O=j.domain(),N=O[0],T=O[1],y=Number.NEGATIVE_INFINITY,_=!1,x=[],E=performance.now();for(let o of n.values()){performance.now()-E>400&&((0,a.checkStopToken)(r),E=performance.now());let[l,c]=(0,t.featureSpanPx)(o,C,p);Math.floor(l)!==Math.floor(y)&&(x.push(o),y=l);let n=o.get("score");_=_||n>T||n<N;let f=c-l+.3;e.fillStyle=m(o,n),e.fillRect(l,0,f,s)}if(e.save(),_)for(let o of(e.fillStyle=v,n.values())){performance.now()-E>400&&((0,a.checkStopToken)(r),E=performance.now());let[l,n]=(0,t.featureSpanPx)(o,C,p),f=n-l+.3,s=o.get("score");s>T?(0,c.fillRectCtx)(l,0,f,2,e):s<N&&"log"!==i.scaleType&&(0,c.fillRectCtx)(l,0,f,2,e)}return e.restore(),{reducedFeatures:x}}}}]);
//# sourceMappingURL=1534.f98cd853fe6f8cf7.js.map