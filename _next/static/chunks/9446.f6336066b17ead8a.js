"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9446],{15508:(o,e,r)=>{r.d(e,{DW:()=>d,L9:()=>a,pf:()=>n,sY:()=>f,w7:()=>l});var t=r(9273);let n={color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000",color_rev_diff_chr:"#969696",color_pair_lr:"#c8c8c8",color_pair_rr:"navy",color_pair_rl:"teal",color_pair_ll:"green",color_nostrand:"#c8c8c8",color_interchrom:"purple",color_longinsert:"red",color_shortinsert:"pink",color_unknown:"grey"},l={color_fwd_strand_not_proper:"#CA6767",color_rev_strand_not_proper:"#7272AA",color_fwd_strand:"#DC2A2A",color_rev_strand:"#4141BA",color_fwd_missing_mate:"#921111",color_rev_missing_mate:"#111192",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#696969",color_pair_lr:"#8C8C8C",color_pair_rr:"#00005A",color_pair_rl:"#005A5A",color_pair_ll:"#005A00",color_nostrand:"#8C8C8C",color_interchrom:"#5A005A",color_longinsert:"#B30000",color_shortinsert:"#FF3A5C",color_unknown:"grey"};function a(o,e,r){let t=o.refName===e.refName,a=Math.abs(o.tlen||0);return t&&a>((null==r?void 0:r.upper)||0)?[n.color_longinsert,l.color_longinsert]:t&&a<((null==r?void 0:r.lower)||0)?[n.color_shortinsert,l.color_shortinsert]:t?void 0:[n.color_interchrom,l.color_interchrom]}let i=[n.color_unknown,n.color_unknown];function f(o,e,r){return s(o)||a(o,e,r)||i}function s(o){let e=t.il.fr[o.pair_orientation||""],r=t.rr[e];return"LR"===e?void 0:[n[r],l[r]]}function d(o){return s(o)||i}},49446:(o,e,r)=>{r.d(e,{drawFeats:()=>s});var t=r(15715),n=r(88753);function l(o,e,r,t,n,l){r<0&&(o+=r,r=-r),t<0&&(e+=t,t=-t),l&&(n.fillStyle=l),n.fillRect(o,e,r,t)}function a(o,e,r,t,n,l){r<0&&(o+=r,r=-r),t<0&&(e+=t,t=-t),l&&(n.strokeStyle=l),n.strokeRect(o,e,r,t)}var i=r(15508),f=r(68821);function s(o,e){let{chainData:r}=o;if(!r)return;let{assemblyManager:s}=(0,t.getSession)(o),d=(0,t.getContainingView)(o),c=d.assemblyNames[0],_=s.get(c);_&&((0,f.dv)(r)?function({ctx:o,self:e,chainData:r,view:f,asm:s}){var d,c,_,m,v,h,u;let p=[],x=(0,n.getConf)(e,"featureHeight"),g=(null===(d=e.colorBy)||void 0===d?void 0:d.type)||"insertSizeAndOrientation",{chains:N,stats:P}=r;for(let r of N)if(r.length>1){let o=r[0],e=r[1],t=s.getCanonicalRefName(o.refName)||o.refName,n=s.getCanonicalRefName(e.refName)||e.refName,l=null===(c=f.bpToPx({refName:t,coord:o.start}))||void 0===c?void 0:c.offsetPx,a=null===(_=f.bpToPx({refName:t,coord:o.end}))||void 0===_?void 0:_.offsetPx,i=null===(m=f.bpToPx({refName:n,coord:e.start}))||void 0===m?void 0:m.offsetPx,d=null===(v=f.bpToPx({refName:n,coord:e.end}))||void 0===v?void 0:v.offsetPx,h=0;if(void 0!==l&&void 0!==a&&void 0!==i&&void 0!==d){if(o.refName===e.refName){let r=Math.min(o.start,e.start);h=Math.abs(Math.max(o.end,e.end)-r)}p.push({r1s:l,r1e:a,r2s:i,r2e:d,v0:o,v1:e,distance:h})}}else if(e.drawSingletons){let e=r[0],t=s.getCanonicalRefName(e.refName)||e.refName,n=null===(h=f.bpToPx({refName:t,coord:e.start}))||void 0===h?void 0:h.offsetPx,i=null===(u=f.bpToPx({refName:t,coord:e.end}))||void 0===u?void 0:u.offsetPx;if(void 0!==n&&void 0!==i){let e=Math.max(i-n,2);l(n-f.offsetPx,0,e,x,o,"#f00"),a(n-f.offsetPx,0,e,x,o,"#a00")}}let M=Math.log((0,t.max)(p.map(o=>o.distance))),C=Math.max(Math.log((0,t.min)(p.map(o=>o.distance)))-1,0),b=(e.height-20)/(M-C);for(let{r1e:e,r1s:r,r2e:t,r2s:n,distance:s,v0:d,v1:c}of p){let _=Math.max(e-r,2),m=Math.max(t-n,2),[v,h]=function({type:o,v0:e,v1:r,stats:t}){if("insertSizeAndOrientation"===o)return(0,i.sY)(e,r,t);if("orientation"===o)return(0,i.DW)(e);if("insertSize"===o)return(0,i.L9)(e,r,t);if("gradient"===o){let o=Math.min(e.start,r.start),t=Math.max(e.end,r.end);return[`hsl(${10*Math.log10(Math.abs(t-o))},50%,50%)`,`hsl(${10*Math.log10(Math.abs(t-o))},50%,30%)`]}}({type:g,v0:d,v1:c,stats:P})||[],u=(Math.log(s)-C)*b,p=x/2-.5,N=n-e;l(e-f.offsetPx,u+p,N,1,o,"black"),a(r-f.offsetPx,u,_,x,o,h),a(n-f.offsetPx,u,m,x,o,h),l(r-f.offsetPx,u,_,x,o,v),l(n-f.offsetPx,u,m,x,o,v)}}({self:o,view:d,asm:_,ctx:e,chainData:r}):function({ctx:o,self:e,chainData:r,view:f,asm:s}){var d,c,_,m,v;let h=[],{chains:u}=r,{height:p}=e,x=(0,n.getConf)(e,"featureHeight");for(let o of u){let e=Number.MAX_VALUE,r=Number.MIN_VALUE;for(let t of o){let o=s.getCanonicalRefName(t.refName)||t.refName,n=null===(d=f.bpToPx({refName:o,coord:t.start}))||void 0===d?void 0:d.offsetPx,l=null===(c=f.bpToPx({refName:o,coord:t.end}))||void 0===c?void 0:c.offsetPx;void 0!==n&&void 0!==l&&(e=Math.min(e,n),r=Math.max(r,l))}h.push({distance:Math.abs(r-e),minX:e,chain:o})}let g=h.map(o=>o.distance),N=Math.log((0,t.max)(g)),P=Math.max(Math.log((0,t.min)(g))-1,0),M=(p-20)/(N-P),C=x/2-.5;for(let{minX:e,distance:r,chain:t}of h){let n;let d=(Math.log(r)-P)*M;l(e-f.offsetPx,d+C,r,1,o,"black");let c=t[0];for(let e of(n=2048&c.flags?"-"===(null===(_=c.SA)||void 0===_?void 0:_.split(";")[0].split(",")[2])?-1:1:c.strand,t)){let r=s.getCanonicalRefName(e.refName)||e.refName,t=null===(m=f.bpToPx({refName:r,coord:e.start}))||void 0===m?void 0:m.offsetPx,c=null===(v=f.bpToPx({refName:r,coord:e.end}))||void 0===v?void 0:v.offsetPx;if(void 0!==t&&void 0!==c){let r=Math.max(c-t,2),s=t-f.offsetPx,_=-1==e.strand*n?"color_rev_strand":"color_fwd_strand";a(s,d,r,x,o,i.w7[_]),l(s,d,r,x,o,i.pf[_])}}}}({self:o,view:d,asm:_,ctx:e,chainData:r}))}}}]);
//# sourceMappingURL=9446.f6336066b17ead8a.js.map