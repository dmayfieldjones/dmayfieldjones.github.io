"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4809,7862],{87862:(e,t,l)=>{l.r(t),l.d(t,{default:()=>F});var r=l(12115),n=l(47204),a=l(54262),o=l(67072),i=l(97771),c=l(51846),s=l(40939),m=l.n(s),d=l(14294),u=l(22471),g=l(95155);let E=(0,u.A)((0,g.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var p=l(77159),h=l(49300);let f=(0,u.A)((0,g.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft"),v=(0,u.A)((0,g.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight");var k=l(68749),b=l(44394),y=l(47821),A=l(34809);let x=(0,i.makeStyles)()(e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}})),C=(0,o.observer)(function({model:e}){let{classes:t}=x(),[l,n]=(0,r.useState)(null);return r.createElement("div",{className:t.controls},r.createElement(y.A,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow},r.createElement(b.A,null)),r.createElement(y.A,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in"},r.createElement(k.A,null)),r.createElement(y.A,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise"},r.createElement(f,null)),r.createElement(y.A,{onClick:e.rotateClockwiseButton,title:"rotate clockwise"},r.createElement(v,null)),r.createElement(y.A,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock},e.lockedFitToWindow?r.createElement(d.A,null):r.createElement(E,null)),r.createElement(y.A,{onClick:e=>{n(e.currentTarget)}},r.createElement(p.A,null)),e.hideTrackSelectorButton?null:r.createElement(y.A,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select"},r.createElement(c.TrackSelector,null)),l?r.createElement(m(),{anchorEl:l,menuItems:[{label:"Export SVG",icon:h.A,onClick:()=>{(0,a.getSession)(e).queueDialog(t=>[A.default,{model:e,handleClose:t}])}}],onMenuItemClick:(e,t)=>{t(),n(null)},open:!!l,onClose:()=>{n(null)}}):null)});var S=l(9552),T=l(88552),w=l(78443);let z=(0,i.makeStyles)()(e=>({importFormContainer:{padding:e.spacing(6)}})),M=(0,o.observer)(function({model:e}){let{classes:t}=z(),l=(0,a.getSession)(e),{error:o}=e,{assemblyNames:i,assemblyManager:c}=l,[s,m]=(0,r.useState)(i[0]),d=c.get(s),u=i.length?null==d?void 0:d.error:"No configured assemblies",g=(null==d?void 0:d.regions)||[],E=u||o;return r.createElement(S.A,{className:t.importFormContainer},E?r.createElement(T.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},r.createElement(T.Ay,{item:!0},r.createElement(n.ErrorMessage,{error:E}))):null,r.createElement(T.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},r.createElement(T.Ay,{item:!0},r.createElement(n.AssemblySelector,{onChange:t=>{e.setError(void 0),m(t)},session:l,selected:s})),r.createElement(T.Ay,{item:!0},r.createElement(w.A,{disabled:!g.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(g)},variant:"contained",color:"primary"},g.length||E?"Open":"Loading..."))))});var N=l(87457);let L=(0,i.makeStyles)()(e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}})),P=(0,o.observer)(({model:e})=>r.createElement(r.Fragment,null,e.staticSlices.map(t=>r.createElement(N.A,{key:(0,a.assembleLocString)(t.region.elided?t.region.regions[0]:t.region),model:e,slice:t})),e.tracks.map(t=>{let l=t.displays[0];return r.createElement(l.RenderingComponent,{key:l.id,display:l,view:e})}))),V=(0,o.observer)(({model:e})=>{let t=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight&&e.initialized,l=!t&&!e.disableImportForm;return l||e.error?r.createElement(M,{model:e}):t&&!l?r.createElement($,{model:e}):null}),$=(0,o.observer)(function({model:e}){let{width:t,height:l,id:a,offsetRadians:o,centerXY:i,figureWidth:c,figureHeight:s,hideVerticalResizeHandle:m}=e,{classes:d}=L();return r.createElement("div",{className:d.root,style:{width:t,height:l},"data-testid":a},r.createElement("div",{className:d.scroller,style:{width:t,height:l}},r.createElement("svg",{style:{transform:`rotate(${o}rad)`,transition:"transform 0.5s",transformOrigin:i.map(e=>`${e}px`).join(" "),position:"absolute",left:0,top:0},width:c,height:s},r.createElement("g",{transform:`translate(${i})`},r.createElement(P,{model:e})))),r.createElement(C,{model:e}),m?null:r.createElement(n.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))}),F=V},34809:(e,t,l)=>{l.r(t),l.d(t,{default:()=>v});var r=l(12115),n=l(47204),a=l(54262),o=l(77311),i=l(9561),c=l(19293),s=l(55089),m=l(80583),d=l(79201),u=l(17386),g=l(93929),E=l(78443);function p(){return r.createElement("div",null,r.createElement(o.A,{size:20,style:{marginRight:20}}),r.createElement(i.A,{display:"inline"},"Creating SVG"))}function h({children:e,...t}){return r.createElement("div",null,r.createElement(c.A,{...t},e))}function f(e,t){return(0,a.useLocalStorage)(`svg-${e}`,t)}function v({model:e,handleClose:t}){let l=(0,a.getSession)(e),o="undefined"!=typeof OffscreenCanvas,[c,v]=(0,r.useState)(o),[k,b]=(0,r.useState)(!1),[y,A]=(0,r.useState)(),[x,C]=f("file","jbrowse.svg"),[S,T]=f("theme",l.themeName||"default");return r.createElement(n.Dialog,{open:!0,onClose:t,title:"Export SVG"},r.createElement(s.A,null,y?r.createElement(n.ErrorMessage,{error:y}):k?r.createElement(p,null):null,r.createElement(h,{helperText:"filename",value:x,onChange:e=>{C(e.target.value)}}),l.allThemes?r.createElement(h,{select:!0,label:"Theme",value:S,onChange:e=>{T(e.target.value)}},Object.entries(l.allThemes()).map(([e,t])=>r.createElement(m.A,{key:e,value:e},t.name||"(Unknown name)"))):null,o?r.createElement(d.A,{control:r.createElement(u.A,{checked:c,onChange:()=>{v(e=>!e)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):r.createElement(i.A,null,"Note: rasterizing layers not yet supported in this browser, so SVG size may be large")),r.createElement(g.A,null,r.createElement(E.A,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel"),r.createElement(E.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{b(!0),A(void 0);try{await e.exportSvg({rasterizeLayers:c,filename:x,themeName:S}),t()}catch(e){console.error(e),A(e)}finally{b(!1)}}},"Submit")))}},87457:(e,t,l)=>{l.d(t,{A:()=>u});var r=l(12115),n=l(54262),a=l(28446),o=l(35761),i=l(67072);let c=(0,l(97771).makeStyles)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}}),s=(0,i.observer)(function({model:e,slice:t,region:l}){let a=(0,o.A)(),{radiusPx:i}=e,c=i+1,{endRadians:s,startRadians:d}=t,u=(0,n.polarToCartesian)(c,d),g=(0,n.polarToCartesian)(c,s),E=(s-d)*c,p=s-d>Math.PI?"1":"0",h=`[${Number(l.regions.length).toLocaleString()}]`;return r.createElement(r.Fragment,null,r.createElement(m,{text:h,view:e,maxWidthPx:E,radians:(s+d)/2,radiusPx:c,title:`${h} more regions`,color:a.palette.text.primary}),r.createElement("path",{d:["M",...u,"A",c,c,"0",p,"1",...g].join(" "),...(0,n.getStrokeProps)(a.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"}))}),m=(0,i.observer)(function({view:e,text:t,maxWidthPx:l,radians:a,radiusPx:o,title:i,color:s}){let{classes:m}=c(),d=(0,n.polarToCartesian)(o+5,a);return t?6.5*t.length<l?r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${d}) rotate(${(0,n.radToDeg)(a)+90})`,...(0,n.getFillProps)(s)},t,r.createElement("title",null,i||t)):l>4?(0,n.radToDeg)(a+e.offsetRadians-Math.PI/2)>=180?r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${d}) rotate(${(0,n.radToDeg)(a)})`,fill:s},t,r.createElement("title",null,i||t)):r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${d}) rotate(${(0,n.radToDeg)(a)+180})`,fill:s},t,r.createElement("title",null,i||t)):null:null}),d=(0,i.observer)(function({model:e,slice:t,region:l}){let i=(0,o.A)(),{radiusPx:c}=e,{endRadians:s,startRadians:d}=t,u=(0,n.getSession)(e).assemblyManager.get(l.assemblyName),g=u?u.getRefNameColor(l.refName):void 0;if(g)try{g=(0,a.makeContrasting)(g,i.palette.background.paper)}catch(e){g=i.palette.text.primary}else g=i.palette.text.primary;return r.createElement(r.Fragment,null,r.createElement(m,{text:l.refName,view:e,maxWidthPx:(s-d)*c,radians:(s+d)/2,radiusPx:c,color:g}),r.createElement("path",{d:function(e,t,l,r){e.flipped&&([l,r]=[r,l]);let n=e.bpToXY(l,t),a=e.bpToXY(r,t);return["M",...n,"A",t,t,"0",Math.abs(r-l)/e.bpPerRadian>Math.PI?"1":"0","1",...a].join(" ")}(t,c+1,l.start,l.end),stroke:g,strokeWidth:2,fill:"none"}))}),u=(0,i.observer)(function({model:e,slice:t}){return t.region.elided?r.createElement(s,{key:(0,n.assembleLocString)(t.region.regions[0]),model:e,region:t.region,slice:t}):r.createElement(d,{key:(0,n.assembleLocString)(t.region),region:t.region,model:e,slice:t})})},14294:(e,t,l)=>{l.d(t,{A:()=>a});var r=l(22471),n=l(95155);let a=(0,r.A)((0,n.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")}}]);
//# sourceMappingURL=7862.8e80a23a0c9b2cc6.js.map