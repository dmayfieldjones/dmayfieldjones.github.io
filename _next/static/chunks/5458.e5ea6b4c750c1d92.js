"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5458],{85458:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(13452),a=n(91682),i=n(92766),o=n(54262),r=n(31177),c=n(72471),l=n(28251),h=n(77419);class u extends i.BaseFeatureDataAdapter{constructor(e,t,n){super(e,t,n);let i=this.getConf("bedGzLocation"),o=this.getConf(["index","indexType"]),c=this.getConf(["index","location"]),l=this.getConf("autoSql"),h=this.pluginManager;this.bed=new a.wD({filehandle:(0,r.openLocation)(i,h),csiFilehandle:"CSI"===o?(0,r.openLocation)(c,h):void 0,tbiFilehandle:"CSI"!==o?(0,r.openLocation)(c,h):void 0,chunkCacheSize:0x3200000}),this.columnNames=this.getConf("columnNames"),this.scoreColumn=this.getConf("scoreColumn"),this.parser=new s.A({autoSql:l})}async getRefNames(e={}){return this.bed.getReferenceSequenceNames(e)}async getHeader(){return this.bed.getHeader()}async getNames(){if(this.columnNames.length)return this.columnNames;let e=(await this.bed.getHeader()).split(/\n|\r\n|\r/).filter(e=>!!e).at(-1);return(null==e?void 0:e.includes("	"))?e.slice(1).split("	").map(e=>e.trim()):void 0}getFeatures(e,t={}){let{stopToken:n}=t;return(0,c.ObservableCreate)(async s=>{let{columnNumbers:a}=await this.bed.getMetadata(),i=a.ref-1,r=a.start-1,c=a.end-1,u=await this.getNames(),d=performance.now();(0,l.checkStopToken)(n),await this.bed.getLines(e.refName,e.start,e.end,{lineCallback:(e,t)=>{performance.now()-d>200&&((0,l.checkStopToken)(n),d=performance.now()),s.next(new o.SimpleFeature((0,h.dE)({line:e,colRef:i,colStart:r,colEnd:c,scoreColumn:this.scoreColumn,parser:this.parser,uniqueId:`${this.id}-${t}`,names:u})))},stopToken:t.stopToken}),s.complete()},t.stopToken)}freeResources(){}}u.capabilities=["getFeatures","getRefNames"];let d=u}}]);
//# sourceMappingURL=5458.e5ea6b4c750c1d92.js.map