"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1371],{21371:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(29269),s=a(15715),n=a(31232),i=a(64294),o=a(41431),c=a(96885);class l extends r.BaseFeatureDataAdapter{constructor(){super(...arguments),this.gcMode="content"}async configure(){var e;let t=await (null===(e=this.getSubAdapter)||void 0===e?void 0:e.call(this,this.getConf("sequenceAdapter")));if(!t)throw Error("Error getting subadapter");return t.dataAdapter}async getRefNames(e){return(await this.configure()).getRefNames(e)}getFeatures(e,t){let{statusCallback:a=()=>{},stopToken:r}=t||{};return(0,n.ObservableCreate)(async n=>{var l;let u=await this.configure(),d=this.getConf("windowSize"),f=this.getConf("windowDelta"),h=1===d?1:Math.ceil(d/2),g=1===d,p=Math.max(0,Math.floor((e.start-h)/d)*d),w=Math.ceil((e.end+h)/d)*d;if(w<0||p>w){n.complete();return}let m=(null===(l=(await (0,o._)(u.getFeatures({...e,start:p,end:w},t).pipe((0,c.$)())))[0])||void 0===l?void 0:l.get("seq"))||"",C=performance.now();await (0,s.updateStatus)("Calculating GC",a,()=>{for(let t=h;t<m.length-h;t+=f){performance.now()-C>400&&((0,i.checkStopToken)(r),C=performance.now());let a=g?m[t]:m.slice(t-h,t+h),o=0,c=0,l=0;for(let e of a)"c"===e||"C"===e?o++:("g"===e||"G"===e)&&c++,"N"!==e&&l++;let u="content"===this.gcMode?(c+o)/(l||1):"skew"===this.gcMode?(c-o)/(c+o||1):0;n.next(new s.SimpleFeature({uniqueId:`${this.id}_${p+t}`,refName:e.refName,start:p+t,end:p+t+f,score:u}))}}),n.complete()})}freeResources(){}}l.capabilities=["hasLocalStats"];let u=l}}]);
//# sourceMappingURL=1371.bf7d59c14fad5fdc.js.map