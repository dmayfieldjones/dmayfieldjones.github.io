"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2668],{62668:(e,a,i)=>{i.r(a),i.d(a,{default:()=>D});var t=i(95155),l=i(12115),s=i(47204),n=i(54262),r=i(55089),o=i(9561),p=i(19293),d=i(80583),c=i(93929),u=i(78443),y=i(67072),g=i(2848),h=i(28278),f=i(50324);let D=(0,y.observer)(function(e){let{model:a,handleClose:i}=e,[y,D]=(0,l.useState)(""),[k,m]=(0,l.useState)(),[$,v]=(0,l.useState)(!1),[A,x]=(0,l.useState)(),C=/^[A-Za-z][A-Za-z0-9]$/.exec(y),L=2===y.length&&!C,j=(0,n.useDebounce)(y,1e3),[I,w]=(0,l.useState)("");return(0,l.useEffect)(()=>{(async()=>{try{if(!L){x(void 0),v(!0);let e=await (0,h.X)({self:a,tag:j,blocks:(0,n.getContainingView)(a).staticBlocks});m(e)}}catch(e){console.error(e),x(e)}finally{v(!1)}})()},[a,L,j]),(0,t.jsxs)(s.Dialog,{open:!0,onClose:i,title:"Group by",children:[(0,t.jsxs)(r.A,{children:[(0,t.jsx)(o.A,{children:'NOTE: this will create new session tracks with the "filter by" set to the values chosen here rather than affecting the current track state'}),(0,t.jsxs)(p.A,{fullWidth:!0,value:I,onChange:e=>{w(e.target.value)},label:"Group by...",select:!0,children:[(0,t.jsx)(d.A,{value:"strand",children:"Strand"}),(0,t.jsx)(d.A,{value:"tag",children:"Tag"})]}),"tag"===I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{color:"textSecondary",children:"Examples: HP for haplotype, RG for read group, etc."}),(0,t.jsx)(p.A,{value:y,onChange:e=>{D(e.target.value)},placeholder:"Enter tag name",error:L,helperText:L?"Not a valid tag":"",autoComplete:"off","data-testid":"group-tag-name",slotProps:{htmlInput:{maxLength:2,"data-testid":"group-tag-name-input"}}}),A?(0,t.jsx)(s.ErrorMessage,{error:A}):$?(0,t.jsx)(s.LoadingEllipses,{title:"Loading unique tags"}):k?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["Found unique ",y," values:"]}),(0,t.jsx)("div",{children:k.join(", ")})]}):null]}):null]}),(0,t.jsxs)(c.A,{children:[(0,t.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",disabled:!k,autoFocus:!0,onClick:()=>{let e=(0,n.getContainingTrack)(a),t=structuredClone((0,g.getSnapshot)(e.configuration)),l=(0,n.getSession)(a),s=(0,n.getContainingView)(a);if("tag"===I){if(k)for(let e of[...k,void 0]){let a=`${t.trackId}-${y}:${e}-${+Date.now()}-sessionTrack`;l.addTrackConf({...t,trackId:a,name:`${t.name} (${y}:${e})`,displays:[{displayId:`${a}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${a}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:{...f.JD,tagFilter:{tag:y,value:e}}}}]}),s.showTrack(a)}}else if("strand"===I){let e=`${t.trackId}-${y}:(-)-${+Date.now()}-sessionTrack`,a=`${t.trackId}-${y}:(+)-${+Date.now()}-sessionTrack`;l.addTrackConf({...t,trackId:e,name:`${t.name} (-)`,displays:[{displayId:`${e}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${e}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:f.CQ}},{displayId:`${e}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:f.CQ}]}),l.addTrackConf({...t,trackId:a,name:`${t.name} (+)`,displays:[{displayId:`${a}-LinearAlignmentsDisplay`,type:"LinearAlignmentsDisplay",pileupDisplay:{displayId:`${a}-LinearAlignmentsDisplay-LinearPileupDisplay`,type:"LinearPileupDisplay",filterBy:f.Ar}},{displayId:`${a}-LinearSNPCoverageDisplay`,type:"LinearSNPCoverageDisplay",filterBy:f.Ar}]}),s.showTrack(e),s.showTrack(a)}i()},children:"Submit"}),(0,t.jsx)(u.A,{variant:"contained",color:"secondary",onClick:()=>{i()},children:"Cancel"})]})]})})}}]);
//# sourceMappingURL=2668.fc77e4d0890e2d7b.js.map