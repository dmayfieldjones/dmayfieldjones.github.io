"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3734],{89476:(e,t,r)=>{r.d(t,{d:()=>function e(t){let r;let{end:s,start:i,child_features:n,derived_features:l,attributes:a,type:o,source:u,phase:h,seq_id:c,score:f,strand:d}=t;"+"===d?r=1:"-"===d?r=-1:"."===d&&(r=0);let _=new Set(["start","end","seq_id","score","type","source","phase","strand"]),p=a||{},m={};for(let e of Object.keys(p)){let t=e.toLowerCase();if(_.has(t)&&(t+="2"),p[e]&&"_lineHash"!==e){let r=p[e];Array.isArray(r)&&1===r.length&&([r]=r),m[t]=r}}return{...m,start:i-1,end:s,strand:r,type:o,source:u,refName:c,derived_features:l,phase:null===h?void 0:Number(h),score:null===f?void 0:f,subfeatures:n.flatMap(t=>t.map(t=>e(t)))}}})},93818:(e,t,r)=>{function s(e){return e.replaceAll(/%([0-9A-Fa-f]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16)))}r.d(t,{g:()=>a});let i={Parent:"child_features",Derives_from:"derived_features"};class n{constructor(e){this.seqCallback=e,this.currentSequence=void 0}addLine(e){let t=/^>\s*(\S+)\s*(.*)/.exec(e);t?(this._flush(),this.currentSequence={id:t[1],sequence:""},t[2]&&(this.currentSequence.description=t[2].trim())):this.currentSequence&&/\S/.test(e)&&(this.currentSequence.sequence+=e.replaceAll(/\s/g,""))}_flush(){this.currentSequence&&this.seqCallback(this.currentSequence)}finish(){this._flush()}}class l{constructor(e){this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};let t=()=>{};this.featureCallback=e.featureCallback||t,this.endCallback=e.endCallback||t,this.commentCallback=e.commentCallback||t,this.errorCallback=e.errorCallback||t,this.directiveCallback=e.directiveCallback||t,this.sequenceCallback=e.sequenceCallback||t,this.disableDerivesFromReferences=e.disableDerivesFromReferences||!1,this.bufferSize=void 0===e.bufferSize?1e3:e.bufferSize}addLine(e){if(this.fastaParser){this.fastaParser.addLine(e);return}if(this.eof)return;if(this.lineNumber+=1,/^\s*[^#\s>]/.test(e)){this._bufferLine(e);return}let t=/^\s*(#+)(.*)/.exec(e);if(t){let[,r]=t,[,,s]=t;if(3===r.length)this._emitAllUnderConstructionFeatures();else if(2===r.length){let t=function(e){var t,r;let s=/^\s*##\s*(\S+)\s*(.*)/.exec(e);if(!s)return null;let[,i]=s,[,,n]=s,l={directive:i};if(n.length&&(n=n.replace(/\r?\n$/,""),l.value=n),"sequence-region"===i){let e=n.split(/\s+/,3);return{...l,seq_id:e[0],start:null===(t=e[1])||void 0===t?void 0:t.replaceAll(/\D/g,""),end:null===(r=e[2])||void 0===r?void 0:r.replaceAll(/\D/g,"")}}if("genome-build"===i){let[e,t]=n.split(/\s+/,2);return{...l,source:e,buildName:t}}return l}(e);t&&("FASTA"===t.directive?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new n(this.sequenceCallback)):this._emitItem(t))}else s=s.replace(/\s*/,""),this._emitItem({comment:s})}else if(/^\s*$/.test(e));else if(/^\s*>/.test(e))this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new n(this.sequenceCallback),this.fastaParser.addLine(e);else{let t=e.replaceAll(/\r?\n?$/g,"");throw Error(`GFF3 parse error.  Cannot parse '${t}'.`)}}finish(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){let t=e=>{var r,s;e&&Array.isArray(e)&&(null===(s=null===(r=e[0].attributes)||void 0===r?void 0:r.ID)||void 0===s?void 0:s[0])&&(e[0].attributes.ID.forEach(e=>{delete this._underConstructionById[e],delete this._completedReferences[e]}),e.forEach(e=>{e.child_features&&e.child_features.forEach(e=>t(e)),e.derived_features&&e.derived_features.forEach(e=>t(e))}))};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){let e=this._underConstructionTopLevel.shift();e&&(this._emitItem(e),t(e))}}_emitAllUnderConstructionFeatures(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${Object.keys(this._underConstructionOrphans).join(",")}`)}_bufferLine(e){var t,r,i;let n;let l={...function(e){let t=e.split("	").map(e=>"."===e||""===e?null:e);return{seq_id:t[0]&&s(t[0]),source:t[1]&&s(t[1]),type:t[2]&&s(t[2]),start:null===t[3]?null:parseInt(t[3],10),end:null===t[4]?null:parseInt(t[4],10),score:null===t[5]?null:parseFloat(t[5]),strand:t[6],phase:t[7],attributes:null===t[8]?null:function(e){if(!e.length||"."===e)return{};let t={};return e.replace(/\r?\n$/,"").split(";").forEach(e=>{var r;let i=e.split("=",2);if(!(null===(r=i[1])||void 0===r?void 0:r.length))return;i[0]=i[0].trim();let n=t[i[0].trim()];n||(n=[],t[i[0]]=n),n.push(...i[1].split(",").map(e=>e.trim()).map(s))}),t}(t[8])}}(e),child_features:[],derived_features:[]},a=(null===(t=l.attributes)||void 0===t?void 0:t.ID)||[],o=(null===(r=l.attributes)||void 0===r?void 0:r.Parent)||[],u=this.disableDerivesFromReferences?[]:(null===(i=l.attributes)||void 0===i?void 0:i.Derives_from)||[];if(!a.length&&!o.length&&!u.length){this._emitItem([l]);return}a.forEach(e=>{let t=this._underConstructionById[e];t?(t[t.length-1].type!==l.type&&this._parseError(`multi-line feature "${e}" has inconsistent types: "${l.type}", "${t[t.length-1].type}"`),t.push(l),n=t):(n=[l],this._enforceBufferSizeLimit(1),o.length||u.length||this._underConstructionTopLevel.push(n),this._underConstructionById[e]=n,this._resolveReferencesTo(n,e))}),this._resolveReferencesFrom(n||[l],{Parent:o,Derives_from:u},a)}_resolveReferencesTo(e,t){let r=this._underConstructionOrphans[t];r&&(e.forEach(e=>{e.child_features.push(...r.Parent)}),e.forEach(e=>{e.derived_features.push(...r.Derives_from)}),delete this._underConstructionOrphans[t])}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,t,r){function s(e,t,r){let s=e[t];s||(s={},e[t]=s);let i=s[r]||!1;return s[r]=!0,i}t.Parent.forEach(t=>{let n=this._underConstructionById[t];if(n){let l=i.Parent;r.filter(e=>s(this._completedReferences,e,`Parent,${t}`)).length||n.forEach(t=>{t[l].push(e)})}else{let r=this._underConstructionOrphans[t];r||(r={Parent:[],Derives_from:[]},this._underConstructionOrphans[t]=r),r.Parent.push(e)}}),t.Derives_from.forEach(t=>{let n=this._underConstructionById[t];if(n){let l=i.Derives_from;r.filter(e=>s(this._completedReferences,e,`Derives_from,${t}`)).length||n.forEach(t=>{t[l].push(e)})}else{let r=this._underConstructionOrphans[t];r||(r={Parent:[],Derives_from:[]},this._underConstructionOrphans[t]=r),r.Derives_from.push(e)}})}}function a(e){let t=[],r=new l({featureCallback:e=>t.push(e),disableDerivesFromReferences:!0,errorCallback:e=>{throw e}});for(let t of e.split(/\r?\n/))r.addLine(t);return r.finish(),t}}}]);
//# sourceMappingURL=3734.638b5283201a7dd1.js.map