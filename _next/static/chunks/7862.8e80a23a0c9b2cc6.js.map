{"version":3,"file":"static/chunks/7862.8e80a23a0c9b2cc6.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@mui/icons-material/esm/LockOpen.js","webpack://_N_E/./node_modules/@mui/icons-material/esm/RotateLeft.js","webpack://_N_E/./node_modules/@mui/icons-material/esm/RotateRight.js","webpack://_N_E/./node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/Controls.js","webpack://_N_E/./node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/ImportForm.js","webpack://_N_E/./node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/CircularView.js","webpack://_N_E/./node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/ExportSvgDialog.js","webpack://_N_E/./node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/Ruler.js","webpack://_N_E/./node_modules/@mui/icons-material/esm/Lock.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z\"\n}), 'LockOpen');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93\"\n}), 'RotateLeft');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48\"\n}), 'RotateRight');","import React, { useState } from 'react';\nimport { TrackSelector as TrackSelectorIcon } from '@jbrowse/core/ui/Icons';\nimport JBrowseMenu from '@jbrowse/core/ui/Menu';\nimport { getSession } from '@jbrowse/core/util';\nimport LockIcon from '@mui/icons-material/Lock';\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport MoreVert from '@mui/icons-material/MoreVert';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport RotateLeftIcon from '@mui/icons-material/RotateLeft';\nimport RotateRightIcon from '@mui/icons-material/RotateRight';\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\nimport ZoomOutIcon from '@mui/icons-material/ZoomOut';\nimport { IconButton } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport ExportSvgDialog from './ExportSvgDialog';\nconst useStyles = makeStyles()(theme => ({\n    controls: {\n        position: 'absolute',\n        borderRight: `1px solid ${theme.palette.divider}`,\n        borderBottom: `1px solid ${theme.palette.divider}`,\n        left: 0,\n        top: 0,\n    },\n}));\nconst Controls = observer(function ({ model }) {\n    const { classes } = useStyles();\n    const [anchorEl, setAnchorEl] = useState(null);\n    return (React.createElement(\"div\", { className: classes.controls },\n        React.createElement(IconButton, { onClick: model.zoomOutButton, title: model.lockedFitToWindow ? 'unlock to zoom out' : 'zoom out', disabled: model.atMaxBpPerPx || model.lockedFitToWindow },\n            React.createElement(ZoomOutIcon, null)),\n        React.createElement(IconButton, { onClick: model.zoomInButton, disabled: model.atMinBpPerPx, title: \"zoom in\" },\n            React.createElement(ZoomInIcon, null)),\n        React.createElement(IconButton, { onClick: model.rotateCounterClockwiseButton, title: \"rotate counter-clockwise\" },\n            React.createElement(RotateLeftIcon, null)),\n        React.createElement(IconButton, { onClick: model.rotateClockwiseButton, title: \"rotate clockwise\" },\n            React.createElement(RotateRightIcon, null)),\n        React.createElement(IconButton, { onClick: model.toggleFitToWindowLock, title: model.lockedFitToWindow\n                ? 'locked model to window size'\n                : 'unlocked model to zoom further', disabled: model.tooSmallToLock }, model.lockedFitToWindow ? React.createElement(LockIcon, null) : React.createElement(LockOpenIcon, null)),\n        React.createElement(IconButton, { onClick: event => {\n                setAnchorEl(event.currentTarget);\n            } },\n            React.createElement(MoreVert, null)),\n        model.hideTrackSelectorButton ? null : (React.createElement(IconButton, { onClick: model.activateTrackSelector, title: \"Open track selector\", \"data-testid\": \"circular_track_select\" },\n            React.createElement(TrackSelectorIcon, null))),\n        anchorEl ? (React.createElement(JBrowseMenu, { anchorEl: anchorEl, menuItems: [\n                {\n                    label: 'Export SVG',\n                    icon: PhotoCamera,\n                    onClick: () => {\n                        getSession(model).queueDialog(handleClose => [\n                            ExportSvgDialog,\n                            { model, handleClose },\n                        ]);\n                    },\n                },\n            ], onMenuItemClick: (_event, callback) => {\n                callback();\n                setAnchorEl(null);\n            }, open: Boolean(anchorEl), onClose: () => {\n                setAnchorEl(null);\n            } })) : null));\n});\nexport default Controls;\n","import React, { useState } from 'react';\nimport { AssemblySelector, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession } from '@jbrowse/core/util';\nimport { Button, Container, Grid } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    importFormContainer: {\n        padding: theme.spacing(6),\n    },\n}));\nconst ImportForm = observer(function ({ model }) {\n    const { classes } = useStyles();\n    const session = getSession(model);\n    const { error } = model;\n    const { assemblyNames, assemblyManager } = session;\n    const [selectedAsm, setSelectedAsm] = useState(assemblyNames[0]);\n    const assembly = assemblyManager.get(selectedAsm);\n    const assemblyError = assemblyNames.length\n        ? assembly === null || assembly === void 0 ? void 0 : assembly.error\n        : 'No configured assemblies';\n    const regions = (assembly === null || assembly === void 0 ? void 0 : assembly.regions) || [];\n    const err = assemblyError || error;\n    return (React.createElement(Container, { className: classes.importFormContainer },\n        err ? (React.createElement(Grid, { container: true, spacing: 1, justifyContent: \"center\", alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(ErrorMessage, { error: err })))) : null,\n        React.createElement(Grid, { container: true, spacing: 1, justifyContent: \"center\", alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(AssemblySelector, { onChange: val => {\n                        model.setError(undefined);\n                        setSelectedAsm(val);\n                    }, session: session, selected: selectedAsm })),\n            React.createElement(Grid, { item: true },\n                React.createElement(Button, { disabled: !regions.length, onClick: () => {\n                        model.setError(undefined);\n                        model.setDisplayedRegions(regions);\n                    }, variant: \"contained\", color: \"primary\" }, regions.length || err ? 'Open' : 'Loading...')))));\n});\nexport default ImportForm;\n","import React from 'react';\nimport { ResizeHandle } from '@jbrowse/core/ui';\nimport { assembleLocString } from '@jbrowse/core/util';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport Controls from './Controls';\nimport ImportForm from './ImportForm';\nimport Ruler from './Ruler';\nconst dragHandleHeight = 3;\nconst useStyles = makeStyles()(theme => ({\n    root: {\n        position: 'relative',\n        marginBottom: theme.spacing(1),\n        overflow: 'hidden',\n    },\n    scroller: {\n        overflow: 'auto',\n    },\n}));\nconst Slices = observer(({ model }) => {\n    return (React.createElement(React.Fragment, null,\n        model.staticSlices.map(slice => (React.createElement(Ruler, { key: assembleLocString(slice.region.elided ? slice.region.regions[0] : slice.region), model: model, slice: slice }))),\n        model.tracks.map(track => {\n            const display = track.displays[0];\n            return (React.createElement(display.RenderingComponent, { key: display.id, display: display, view: model }));\n        })));\n});\nconst CircularView = observer(({ model }) => {\n    const initialized = !!model.displayedRegions.length &&\n        !!model.figureWidth &&\n        !!model.figureHeight &&\n        model.initialized;\n    const showImportForm = !initialized && !model.disableImportForm;\n    const showFigure = initialized && !showImportForm;\n    return showImportForm || model.error ? (React.createElement(ImportForm, { model: model })) : showFigure ? (React.createElement(CircularViewLoaded, { model: model })) : null;\n});\nconst CircularViewLoaded = observer(function ({ model, }) {\n    const { width, height, id, offsetRadians, centerXY, figureWidth, figureHeight, hideVerticalResizeHandle, } = model;\n    const { classes } = useStyles();\n    return (React.createElement(\"div\", { className: classes.root, style: { width, height }, \"data-testid\": id },\n        React.createElement(\"div\", { className: classes.scroller, style: { width, height } },\n            React.createElement(\"svg\", { style: {\n                    transform: `rotate(${offsetRadians}rad)`,\n                    transition: 'transform 0.5s',\n                    transformOrigin: centerXY.map(x => `${x}px`).join(' '),\n                    position: 'absolute',\n                    left: 0,\n                    top: 0,\n                }, width: figureWidth, height: figureHeight },\n                React.createElement(\"g\", { transform: `translate(${centerXY})` },\n                    React.createElement(Slices, { model: model })))),\n        React.createElement(Controls, { model: model }),\n        hideVerticalResizeHandle ? null : (React.createElement(ResizeHandle, { onDrag: model.resizeHeight, style: {\n                height: dragHandleHeight,\n                position: 'absolute',\n                bottom: 0,\n                left: 0,\n                background: '#ccc',\n                boxSizing: 'border-box',\n                borderTop: '1px solid #fafafa',\n            } }))));\n});\nexport default CircularView;\n","import React, { useState } from 'react';\nimport { Dialog, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession, useLocalStorage } from '@jbrowse/core/util';\nimport { Button, Checkbox, CircularProgress, DialogActions, DialogContent, FormControlLabel, MenuItem, TextField, Typography, } from '@mui/material';\nfunction LoadingMessage() {\n    return (React.createElement(\"div\", null,\n        React.createElement(CircularProgress, { size: 20, style: { marginRight: 20 } }),\n        React.createElement(Typography, { display: \"inline\" }, \"Creating SVG\")));\n}\nfunction TextField2({ children, ...rest }) {\n    return (React.createElement(\"div\", null,\n        React.createElement(TextField, { ...rest }, children)));\n}\nfunction useSvgLocal(key, val) {\n    return useLocalStorage(`svg-${key}`, val);\n}\nexport default function ExportSvgDialog({ model, handleClose, }) {\n    const session = getSession(model);\n    const offscreenCanvas = typeof OffscreenCanvas !== 'undefined';\n    const [rasterizeLayers, setRasterizeLayers] = useState(offscreenCanvas);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n    const [filename, setFilename] = useSvgLocal('file', 'jbrowse.svg');\n    const [themeName, setThemeName] = useSvgLocal('theme', session.themeName || 'default');\n    return (React.createElement(Dialog, { open: true, onClose: handleClose, title: \"Export SVG\" },\n        React.createElement(DialogContent, null,\n            error ? (React.createElement(ErrorMessage, { error: error })) : loading ? (React.createElement(LoadingMessage, null)) : null,\n            React.createElement(TextField2, { helperText: \"filename\", value: filename, onChange: event => {\n                    setFilename(event.target.value);\n                } }),\n            session.allThemes ? (React.createElement(TextField2, { select: true, label: \"Theme\", value: themeName, onChange: event => {\n                    setThemeName(event.target.value);\n                } }, Object.entries(session.allThemes()).map(([key, val]) => (React.createElement(MenuItem, { key: key, value: key }, val.name || '(Unknown name)'))))) : null,\n            offscreenCanvas ? (React.createElement(FormControlLabel, { control: React.createElement(Checkbox, { checked: rasterizeLayers, onChange: () => {\n                        setRasterizeLayers(val => !val);\n                    } }), label: \"Rasterize canvas based tracks? File may be much larger if this is turned off\" })) : (React.createElement(Typography, null, \"Note: rasterizing layers not yet supported in this browser, so SVG size may be large\"))),\n        React.createElement(DialogActions, null,\n            React.createElement(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                    handleClose();\n                } }, \"Cancel\"),\n            React.createElement(Button, { variant: \"contained\", color: \"primary\", type: \"submit\", onClick: async () => {\n                    setLoading(true);\n                    setError(undefined);\n                    try {\n                        await model.exportSvg({\n                            rasterizeLayers,\n                            filename,\n                            themeName,\n                        });\n                        handleClose();\n                    }\n                    catch (e) {\n                        console.error(e);\n                        setError(e);\n                    }\n                    finally {\n                        setLoading(false);\n                    }\n                } }, \"Submit\"))));\n}\n","import React from 'react';\nimport { assembleLocString, getFillProps, getSession, getStrokeProps, polarToCartesian, radToDeg, } from '@jbrowse/core/util';\nimport { makeContrasting } from '@jbrowse/core/util/color';\nimport { useTheme } from '@mui/material/styles';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()({\n    rulerLabel: {\n        fontSize: '0.8rem',\n        fontWeight: 500,\n        lineHeight: 1.6,\n        letterSpacing: '0.0075em',\n    },\n});\nfunction sliceArcPath(slice, radiusPx, startBase, endBase) {\n    if (slice.flipped) {\n        ;\n        [startBase, endBase] = [endBase, startBase];\n    }\n    const startXY = slice.bpToXY(startBase, radiusPx);\n    const endXY = slice.bpToXY(endBase, radiusPx);\n    const largeArc = Math.abs(endBase - startBase) / slice.bpPerRadian > Math.PI ? '1' : '0';\n    const sweepFlag = '1';\n    return [\n        'M',\n        ...startXY,\n        'A',\n        radiusPx,\n        radiusPx,\n        '0',\n        largeArc,\n        sweepFlag,\n        ...endXY,\n    ].join(' ');\n}\nconst ElisionRulerArc = observer(function ({ model, slice, region, }) {\n    const theme = useTheme();\n    const { radiusPx: modelRadiusPx } = model;\n    const radiusPx = modelRadiusPx + 1;\n    const { endRadians, startRadians } = slice;\n    const startXY = polarToCartesian(radiusPx, startRadians);\n    const endXY = polarToCartesian(radiusPx, endRadians);\n    const widthPx = (endRadians - startRadians) * radiusPx;\n    const largeArc = endRadians - startRadians > Math.PI ? '1' : '0';\n    const centerRadians = (endRadians + startRadians) / 2;\n    const regionCount = `[${Number(region.regions.length).toLocaleString()}]`;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(RulerLabel, { text: regionCount, view: model, maxWidthPx: widthPx, radians: centerRadians, radiusPx: radiusPx, title: `${regionCount} more regions`, color: theme.palette.text.primary }),\n        React.createElement(\"path\", { d: [\n                'M',\n                ...startXY,\n                'A',\n                radiusPx,\n                radiusPx,\n                '0',\n                largeArc,\n                '1',\n                ...endXY,\n            ].join(' '), ...getStrokeProps(theme.palette.text.secondary), strokeWidth: 2, strokeDasharray: \"2,2\", fill: \"none\" })));\n});\nconst RulerLabel = observer(function ({ view, text, maxWidthPx, radians, radiusPx, title, color, }) {\n    const { classes } = useStyles();\n    const textXY = polarToCartesian(radiusPx + 5, radians);\n    if (!text) {\n        return null;\n    }\n    if (text.length * 6.5 < maxWidthPx) {\n        return (React.createElement(\"text\", { x: 0, y: 0, className: classes.rulerLabel, textAnchor: \"middle\", dominantBaseline: \"baseline\", transform: `translate(${textXY}) rotate(${radToDeg(radians) + 90})`, ...getFillProps(color) },\n            text,\n            React.createElement(\"title\", null, title || text)));\n    }\n    if (maxWidthPx > 4) {\n        const overallRotation = radToDeg(radians + view.offsetRadians - Math.PI / 2);\n        if (overallRotation >= 180) {\n            return (React.createElement(\"text\", { x: 0, y: 0, className: classes.rulerLabel, textAnchor: \"start\", dominantBaseline: \"middle\", transform: `translate(${textXY}) rotate(${radToDeg(radians)})`, fill: color },\n                text,\n                React.createElement(\"title\", null, title || text)));\n        }\n        return (React.createElement(\"text\", { x: 0, y: 0, className: classes.rulerLabel, textAnchor: \"end\", dominantBaseline: \"middle\", transform: `translate(${textXY}) rotate(${radToDeg(radians) + 180})`, fill: color },\n            text,\n            React.createElement(\"title\", null, title || text)));\n    }\n    return null;\n});\nconst RegionRulerArc = observer(function ({ model, slice, region, }) {\n    const theme = useTheme();\n    const { radiusPx } = model;\n    const { endRadians, startRadians } = slice;\n    const centerRadians = (endRadians + startRadians) / 2;\n    const widthPx = (endRadians - startRadians) * radiusPx;\n    const session = getSession(model);\n    const assembly = session.assemblyManager.get(region.assemblyName);\n    let color = assembly ? assembly.getRefNameColor(region.refName) : undefined;\n    if (color) {\n        try {\n            color = makeContrasting(color, theme.palette.background.paper);\n        }\n        catch (error) {\n            color = theme.palette.text.primary;\n        }\n    }\n    else {\n        color = theme.palette.text.primary;\n    }\n    return (React.createElement(React.Fragment, null,\n        React.createElement(RulerLabel, { text: region.refName, view: model, maxWidthPx: widthPx, radians: centerRadians, radiusPx: radiusPx, color: color }),\n        React.createElement(\"path\", { d: sliceArcPath(slice, radiusPx + 1, region.start, region.end), stroke: color, strokeWidth: 2, fill: \"none\" })));\n});\nconst Ruler = observer(function ({ model, slice, }) {\n    return slice.region.elided ? (React.createElement(ElisionRulerArc, { key: assembleLocString(slice.region.regions[0]), model: model, region: slice.region, slice: slice })) : (React.createElement(RegionRulerArc, { key: assembleLocString(slice.region), region: slice.region, model: model, slice: slice }));\n});\nexport default Ruler;\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z\"\n}), 'Lock');"],"names":["createSvgIcon","_jsx","d"],"sourceRoot":"","ignoreList":[0,1,2,3,4,5,6,7,8]}