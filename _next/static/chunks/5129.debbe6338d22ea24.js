"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5129],{25129:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var l=n(95155),a=n(97717),r=n.n(a),s=n(54262),i=n(12115),o=n(47204),u=n(9561),c=n(28254),d=n(46042);async function f({view:e,feature:t}){var n;let{assemblyManager:l}=(0,s.getSession)(e),a=t.get("CIGAR"),r=t.get("strand"),i=(null===(n=t.get("tags"))||void 0===n?void 0:n.SA)||"",o=t.get("name"),u=(0,d.NI)(a,1),c=await l.waitForAssembly(e.assemblyNames[0]);if(!c)throw Error("assembly not found");let f=(0,d.Cu)(i,t.id(),r,o,!0),m=t.toJSON();m.clipPos=u,m.strand=1,m.mate={refName:o,start:u,end:u+(0,d.Gl)(a)};let h=[m,...f];return h.forEach((e,t)=>{e.refName=c.getCanonicalRefName(e.refName)||e.refName,e.syntenyId=t,e.mate.syntenyId=t,e.mate.uniqueId=`${e.uniqueId}_mate`}),h.sort((e,t)=>e.clipPos-t.clipPos),h}let m=(0,i.lazy)(()=>n.e(6e3).then(n.bind(n,96e3))),h=(0,i.lazy)(()=>n.e(7375).then(n.bind(n,37375)));function p({model:e,feature:t}){let{view:n}=e,[a,r]=(0,i.useState)(),[c,d]=(0,i.useState)();(0,i.useEffect)(()=>{(async()=>{try{let e=await f({view:n,feature:new s.SimpleFeature(t)});r(e)}catch(e){d(e),console.error(e)}})()},[t,n]);let m=[];if(a)for(let e=0;e<a.length-1;e++)m.push([a[e],a[e+1]]);return m.length?(0,l.jsxs)("div",{children:[(0,l.jsx)(u.A,{children:"Launch split view"}),c?(0,l.jsx)(o.ErrorMessage,{error:c}):null,(0,l.jsx)("ul",{children:m.map((t,n)=>{let[a,r]=t;return(0,l.jsxs)("li",{children:[a.refName,":",(0,s.toLocale)(1===a.strand?a.end:a.start)," ->"," ",r.refName,":",(0,s.toLocale)(1===r.strand?r.start:r.end)," ",(0,l.jsx)(g,{model:e,f1:a,f2:r})," ",(0,l.jsx)(y,{model:e,f1:a,f2:r})]},`${JSON.stringify(t)}-${n}`)})})]}):null}function g({model:e,f1:t,f2:n}){return(0,l.jsx)(c.A,{href:"#",onClick:l=>{l.preventDefault();let a=(0,s.getSession)(e);a.queueDialog(l=>[m,{handleClose:l,session:a,feature:new s.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(top/bottom)"})}function y({model:e,f1:t,f2:n}){return(0,l.jsx)(c.A,{href:"#",onClick:l=>{l.preventDefault();let a=(0,s.getSession)(e);a.queueDialog(l=>[h,{handleClose:l,session:a,feature:new s.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(single row)"})}var w=n(13516);function v({tag:e,model:t}){return(0,l.jsxs)("div",{children:[(0,l.jsx)(u.A,{children:"List of supplementary alignment locations"}),(0,l.jsx)("ul",{children:e.split(";").filter(e=>!!e).map((e,n)=>{let[a,r,s,i]=e.split(","),o=(0,d.PC)(i),u=Math.floor(o/5),f=+r,m=+r+o,h=f-u,p=m+u,g=`${a}:${Math.max(1,h)}-${p}`,y=f.toLocaleString("en-US"),v=m.toLocaleString("en-US"),x=`${a}:${y}-${v} (${s}) [${o}bp]`;return(0,l.jsx)("li",{children:(0,l.jsx)(c.A,{href:"#",onClick:async e=>{e.preventDefault(),(0,w.h)(g,t)},children:x})},`${g}-${n}`)})})]})}function x(e){let{model:t,tag:n,feature:a}=e,i=(0,s.getSession)(t),{pluginManager:o}=(0,s.getEnv)(i),u=!1;try{u=!!o.getViewType("BreakpointSplitView")}catch(e){}return(0,l.jsxs)(r(),{...e,title:"Supplementary alignments",children:[(0,l.jsx)(v,{model:t,tag:n}),u?(0,l.jsx)(p,{model:t,feature:a}):null]})}}}]);
//# sourceMappingURL=5129.debbe6338d22ea24.js.map